{"version":3,"file":"ptj.esm.js","sources":["../presstojam/src/js/settings.js","../presstojam/src/js/client.js","../presstojam/src/js/route.js","../presstojam/src/js/map.js","../node_modules/style-inject/dist/style-inject.es.js","../presstojam/src/js/user.js","../import.js"],"sourcesContent":["let settings = {};\r\n\r\nfunction regSettings(isettings, type = null) {\r\n    if (!type) settings = isettings;\r\n    else settings[type] = isettings;\r\n}\r\n\r\n\r\nfunction getSettings(type) {\r\n    return settings[type];\r\n} \r\n\r\n\r\nfunction getModelSettings(model, state) {\r\n    if (settings.models && settings.models[model] && settings.models[model][state]) {\r\n        return settings.models[model][state];\r\n    }\r\n    return {};\r\n}\r\n\r\nexport default {\r\n    regSettings,\r\n    getSettings,\r\n    getModelSettings\r\n}","import Settings from \"./settings.js\"\r\n\r\nlet custom_headers  = {};\r\nlet main_url;\r\n\r\nexport default {\r\n\r\n    initSettings() {\r\n        const settings = Settings.getSettings(\"client\");\r\n        if (!settings.url) {\r\n            throw(\"No URL defined for client\");\r\n        }\r\n        main_url = settings.url;\r\n\r\n        if (settings.custom_headers) {\r\n            for(let name in settings.custom_headers) {\r\n                custom_headers[name] = settings.custom_headers[name];\r\n            }\r\n        }\r\n    },\r\n\r\n    run(url, headers) {\r\n\r\n        if (!main_url) {\r\n            this.initSettings();\r\n        }\r\n        \r\n        headers.mode = 'cors';\r\n        headers.cache = 'no-cache';\r\n        headers.credentials = 'include';\r\n        headers['Content-Type'] = 'application/json';\r\n        headers.headers = custom_headers;\r\n\r\n        const _self = this;\r\n\r\n        return fetch(main_url + url, headers)\r\n        .then(response => {\r\n            if (response.ok) {\r\n                return response.json();\r\n            } else {\r\n                throw response;\r\n            }\r\n        });\r\n    }, \r\n    get(url, data) {\r\n        if (data) {\r\n            const params = new URLSearchParams();\r\n            for(let i in data) {\r\n                if (Array.isArray(data[i]) || (typeof data[i] == 'object' && data[i] !== null)) {\r\n                   params.append(i, JSON.stringify(data[i]));\r\n                } else params.append(i, data[i]);\r\n            }\r\n\r\n            if (url.indexOf(\"?\") == -1) url += \"?\";\r\n            else url += \"&\";\r\n            url += params.toString();\r\n        }\r\n        let headers = {};\r\n        headers.method = 'GET';\r\n        return  this.run(url, headers);\r\n    },\r\n\r\n    getprimary(url, data) {\r\n        return this.get(url, data);\r\n    },\r\n\r\n    post(url, data) {\r\n        //call our fetch response and return\r\n        let headers = {};\r\n        headers.method = 'POST';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    put(url, data) {\r\n        let headers = {};\r\n        headers.method = 'PUT';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    patch(url, data) {\r\n        let headers = {};\r\n        headers.method = 'PATCH';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    delete(url, data) {\r\n        let headers = {};\r\n        headers.method = 'DELETE';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    }\r\n}\r\n","import { reactive, defineAsyncComponent } from \"vue\"\r\nimport client from \"./client.js\"\r\nimport Settings from \"./settings.js\"\r\nimport { MapModel } from \"./map.js\"\r\nimport ModuleLoader from \"./moduleloader.js\"\r\nimport { setDictionary } from \"./dictionary.js\"\r\n\r\nwindow.onpopstate = function() {\r\n    Map.convertFromURL();\r\n    runRoute();\r\n}\r\n\r\nexport const RouteStore = reactive({ \r\n    cats : {}, \r\n    routes : [], \r\n    component : '', \r\n    title : '',\r\n    name : '',\r\n    route : { \"children\" : [], parent : null, \"perms\" : []}, \r\n});\r\n\r\nexport const Map = new MapModel();\r\n\r\nfunction setComponent() {\r\n    if (Map.state == \"get\" || Map.state == \"parent\") {\r\n        RouteStore.component = \"ptj-repo\";\r\n    } else if (Map.state == \"primary\") {\r\n        RouteStore.component = \"ptj-primary\";\r\n    } else if (Map.state == \"login\") {\r\n        RouteStore.component = \"ptj-account-handler\";\r\n    }\r\n}\r\n\r\n\r\nexport function init() {\r\n    let role = \"\";\r\n    const settings = Settings.getSettings(\"mapper\");\r\n    if (settings) {\r\n        Map.base = \"/\" + settings.base.replace(/^\\/+|\\/+$/g, '');\r\n        if (settings.role) {\r\n            role = settings.role;\r\n        }\r\n    }\r\n\r\n    Map.convertFromURL();\r\n    return Promise.resolve();\r\n}\r\n\r\nfunction getDefault() {\r\n    for(let cat in RouteStore.cats) {\r\n        for(let route of RouteStore.cats[cat]) {\r\n            if (route.default) {\r\n                return route;\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\nfunction load(response) {\r\n    RouteStore.cats = {};\r\n    RouteStore.routes = [];\r\n    RouteStore.route = { \"children\" : [], parent : null, \"perms\" : []};\r\n    RouteStore.model = null;\r\n    return client.get(\"/nav/site-map\")\r\n    .then(response => {\r\n        for(let cat in response) {\r\n            for(let route_name in response[cat]) {\r\n                const route = { model : route_name, state : response[cat][route_name].state };\r\n                if (response[cat][route_name].default) route.default = true;\r\n                route.route = route_name;\r\n                RouteStore.routes.push(route);\r\n\r\n                if (!RouteStore.cats[cat]) RouteStore.cats[cat] = [];\r\n                RouteStore.cats[cat].push(route);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction loadRoute() {\r\n    return client.get(\"/nav/route-points/\" + Map.route + \"/\" + Map.model)\r\n    .then(response => {   \r\n        RouteStore.route.children = response.children;\r\n        RouteStore.route.perms = response.perms;\r\n        RouteStore.route.parent = response.parent;\r\n        RouteStore.title = response.title;\r\n        RouteStore.name = response.name;\r\n        setDictionary(response.dictionary);\r\n    })\r\n    .catch(e => console.log(e));\r\n}\r\n\r\n\r\n\r\n\r\nexport function refresh() {\r\n    location.href = Map.base;\r\n}\r\n\r\nexport function redirect() {\r\n    addToHistory();\r\n    runRoute();\r\n}\r\n\r\nexport function addToHistory() {\r\n    const url_str = window.location.protocol + \"//\" + window.location.host +  Map.convertToURL();\r\n    const url = new URL(url_str);\r\n    window.history.pushState({'name' : url.pathname}, document.title, url);\r\n}\r\n\r\nexport function runRoute() {\r\n    let promises = [];\r\n    if (!Map.model) {\r\n        promises.push(\r\n            load()\r\n            .then(() => {\r\n                Map.apply(getDefault());\r\n                return loadRoute();\r\n            })\r\n        );\r\n    } else if (Map.hasChange(\"route\")) {\r\n      promises.push(load());\r\n      promises.push(loadRoute());\r\n    } else if (Map.hasChange(\"model\")) {\r\n        promises.push(loadRoute());\r\n    }\r\n\r\n    return Promise.all(promises)\r\n    .then(() => {\r\n        if (!Map.model) {\r\n            \r\n        }\r\n        setComponent();\r\n    })\r\n    .catch(e => console.log(e));\r\n}\r\n","import { computed, reactive } from \"vue\"\r\n\r\nexport class MapModel {\r\n\r\n    constructor() {\r\n        this._route = '';\r\n        this._model = '';\r\n        this._state = '';\r\n        this._key = 0;\r\n        this._to = '';\r\n        this._params = {};\r\n        this._settings = {};\r\n        this._base = \"/\";\r\n        this._default = false;\r\n        this._changes = {};\r\n\r\n        const keys = Object.keys(this);\r\n\r\n        keys.forEach(property => {\r\n          if (property[0] == \"_\") {\r\n            Object.defineProperty(this, property.substring(1), {\r\n                get: function() { \r\n                    return this[property];\r\n                },\r\n                set: function(newValue) {\r\n                    this._changes[property.substring(1)] = this[property];\r\n                    this[property] = newValue;\r\n                }\r\n            });\r\n          } \r\n        });\r\n\r\n\r\n        this.action_map = {\r\n            'post' : '-create',\r\n            'put' : '-update',\r\n            'delete' : '-delete',\r\n            'login' : '-login',\r\n            'logout' : '-logout',\r\n            'primary' : '-primary',\r\n            'parent' : '-parent',\r\n            'get' : ''\r\n        };\r\n    }\r\n\r\n    get id() {\r\n        return this.model + \"-\" + this.state + \"-\" + this.to;\r\n    }\r\n\r\n    hasChange(key) {\r\n        return this._changes.hasOwnProperty(key);\r\n    }\r\n\r\n    reset() {\r\n        this.route = '';\r\n        this.model = '';\r\n        this.state = '';\r\n        this.key = 0;\r\n        this.to = '';\r\n        this.params = {};\r\n        this.settings = {};\r\n        this._changes = {};\r\n    }\r\n\r\n    resetChanges() {\r\n        this._changes = {};\r\n    }\r\n\r\n\r\n    convertToURL() {\r\n        let url = this._base + this.route + \"/\" + this.model + this.action_map[this.state];\r\n        if (this.key) url += \"-\" + this.key;\r\n        if (this.to) url += \"-to-\" + this.to;\r\n\r\n        let param_str = [];\r\n        for(const i in this.params) {\r\n            if (typeof this.params[i] == 'Array' || typeof this.params[i] == 'Object') {\r\n                param_str.push(i + \"=\" + JSON.stringify(this.params[i]));\r\n            } else {\r\n                param_str.push(i + \"=\" + this.params[i]);\r\n            }\r\n        }\r\n\r\n        if (param_str.length > 0) url += \"?\" + param_str.join(\"&\");\r\n\r\n        return url;\r\n    }\r\n    \r\n    convertFromURL(url_obj) {\r\n        if (!url_obj) url_obj = new URL(window.location.href);\r\n        let url = url_obj.pathname.replace(this.base, \"\");\r\n        url = url.replace(/^\\/+|\\/+$/g, '');\r\n\r\n        if (!url) return;\r\n\r\n\r\n        let parts = url.split(\"/\");\r\n        this.route = parts[0];\r\n        url = parts[1];\r\n\r\n        const _self = this;\r\n        url_obj.searchParams.forEach(function(value, key) {\r\n            _self.params[key] = (value.indexOf(\",\") > -1) ? value.split(\",\") : value;\r\n        });\r\n\r\n        parts = url.split(\"-to-\");\r\n        if (parts.length > 1) {\r\n            this.to = parts[1];\r\n            url = parts[0];\r\n        }\r\n\r\n       \r\n        parts = url.split(\"-\");\r\n        let key = parts[parts.length - 1];\r\n        if (key == \"first\") {\r\n            this.key = key;\r\n            parts.pop();\r\n        } else if (!isNaN(key)) {\r\n            this.key = key;\r\n            parts.pop();\r\n        }\r\n            \r\n        if (parts.length == 0) {\r\n            throw new Error(\"Can't convert this url string: \" + url);\r\n        }\r\n    \r\n        this.state = \"get\";\r\n        for(let i in this.action_map) {\r\n            if (this.action_map[i] == \"-\" + parts[parts.length - 1]) {\r\n                this.state = i\r\n                parts.pop();\r\n                break;\r\n            }\r\n        }\r\n        this.model = parts.join(\"-\");\r\n    }\r\n\r\n    getAll() {\r\n        return {\r\n            route : this.route,\r\n            model : this.model,\r\n            state : this.state,\r\n            key : this.key,\r\n            to : this.to,\r\n            params : this.params,\r\n            base : this.base,\r\n            default : this.default\r\n        };\r\n    }\r\n\r\n    apply(route) {\r\n        for(let i in route) {\r\n            this[i] = route[i];\r\n        }\r\n    }\r\n}\r\n\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { reactive } from \"vue\"\r\nimport { refresh } from \"./route.js\"\r\nimport Client from \"./client.js\"\r\n\r\nexport const User = reactive({init : false, login : false, user : \"public\" });\r\n\r\nexport function logout() {\r\n    Client.post(\"/core/logout\")\r\n    .then(() => {\r\n        refresh();\r\n    });\r\n}\r\n\r\n\r\nconst user_check = 600000;\r\n\r\nexport function checkLoginStatus() {\r\n    Client.get(\"/core/check-user\")\r\n    .then(response => {\r\n        if (response.is_expired) {\r\n            return Client.put(\"/core/switch-tokens\")\r\n            .then(() => {\r\n                checkLoginStatus();\r\n            });\r\n        }\r\n        if (!User.init) {\r\n            User.user = response.user;\r\n            User.role = response.role;\r\n            User.init = true;\r\n            /*if (user.user != \"public\") {\r\n                return Client.post(\"/route/\" + user.user + \"/\" + user.user + \"/login\")\r\n                .then(response => {\r\n                    let meta = new MetaRow();\r\n                    meta.map(response.fields);\r\n                    register_data.applyMetaRow(meta);\r\n                });\r\n            }*/\r\n        }\r\n    }).then(response => {\r\n        if (User.user != \"public\") setTimeout(checkLoginStatus, user_check);\r\n    }).catch(e => {\r\n        User.login = true;\r\n    });\r\n}\r\n\r\n","import PTJUser from \"./presstojam/src/components/ptj-user.vue\"\r\nimport Settings from \"./presstojam/src/js/settings.js\"\r\nimport Client from \"./presstojam/src/js/client.js\"\r\nimport { createApp } from \"vue\"\r\n\r\nfunction runApp(mount, user_settings) {\r\n    Settings.regSettings(user_settings);\r\n    const app = createApp(PTJRoot);\r\n    app.mount(mount);\r\n    return app;\r\n}\r\n\r\nfunction getClient(user_settings) {\r\n    Settings.regSettings(user_settings);\r\n    return Client;\r\n}\r\n\r\n\r\n\r\nexport default { \r\n    runApp,\r\n    getClient\r\n}\r\n\r\n\r\n"],"names":["settings","regSettings","isettings","type","getSettings","getModelSettings","model","state","models","main_url","custom_headers","initSettings","Settings","url","name","run","headers","mode","cache","credentials","fetch","then","response","ok","json","get","data","params","URLSearchParams","i","Array","isArray","append","JSON","stringify","indexOf","toString","this","getprimary","post","body","put","patch","delete","window","onpopstate","Map","convertFromURL","promises","hasChange","push","load","loadRoute","apply","cat","RouteStore","cats","route","default","getDefault","Promise","all","component","catch","e","console","log","runRoute","reactive","routes","title","parent","constructor","_route","_model","_state","_key","_to","_params","_settings","_base","_default","_changes","Object","keys","forEach","property","defineProperty","substring","set","newValue","action_map","id","to","key","hasOwnProperty","reset","resetChanges","convertToURL","param_str","length","join","url_obj","URL","location","href","pathname","replace","base","parts","split","_self","searchParams","value","pop","isNaN","Error","getAll","client","route_name","children","perms","dictionary","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","init","login","user","runApp","mount","user_settings","app","createApp","PTJRoot","getClient","Client"],"mappings":"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"}