"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");let t,s,r,o={},l={},a=!0;var i={regCustomHeader(e,t){o[e]=t},regStatusHandler(e,t){l[e]=t},setURL(e){t=e},regDebug(e){a=e},run:(e,i)=>(i.mode="cors",i.cache="no-cache",i.credentials="include",i["Content-Type"]="application/json",i.headers=o,fetch(t+e,i).then((e=>{if(s=e.status,r=e.ok,!l[e.status])return 401==e.status?e.status:e.json();l[e.status](e)})).then((o=>{if(!r)throw o;if(401==s){let s=i.method;return i.method="PUT",fetch(t+"/core-switch-tokens",i).then((r=>{if(r.ok)return i.method=s,fetch(t+e,i).then((e=>{if(401==e.status)throw new Error("Issue with refresh token");if(e.ok)return e.json()}))}))}return o})).catch((e=>{throw a&&console.log(e),e}))),setDebug:e=>(e?e.__debug=!0:e={__debug:!0},e),get(e,t){if(a&&(t=this.setDebug(t)),t){const s=new URLSearchParams;let r={};for(let e in t)Array.isArray(t[e])||"object"==typeof t[e]&&null!==t[e]?r[e]=t[e]:s.append(e,t[e]);r&&s.append("graph",JSON.stringify(r)),-1==e.indexOf("?")?e+="?":e+="&",e+=s.toString()}let s={method:"GET"};return this.run(e,s)},getprimary(e,t){return this.get(e,t)},post(e,t){a&&(t=this.setDebug(t));let s={method:"POST"};return s.body=JSON.stringify(t),this.run(e,s)},put(e,t){a&&(t=this.setDebug(t));let s={method:"PUT"};return s.body=JSON.stringify(t),this.run(e,s)},patch(e,t){a&&(t=this.setDebug(t));let s={method:"PATCH"};return s.body=JSON.stringify(t),this.run(e,s)},delete(e,t){a&&(t=this.setDebug(t));let s={method:"DELETE"};return s.body=JSON.stringify(t),this.run(e,s)}};class n{constructor(){this._min,this._max,this._has=[],this._has_not=[],this._errors={OK:0,MIN_VALUE:1,MAX_VALUE:2,HAS:3,HAS_NOT:4}}set min(e){this._min=e}set max(e){this._max=e}set has(e){this._has.push(e)}set nothas(e){this._has_not.push(e)}validateSize(e){return e<this._min?this._errors.MIN_VALUE:e>this._max?this._errors.MAX_VALUE:this._errors.OK}validate(e){let t;if(isNaN(e)){const s=e?e.length:0;t=this.validateSize(s)}else t=this.validateSize(e);if(t!=this._errors.OK)return t;for(let t of this._has_not)if(e.match(t))return this._errors.HAS_NOT;if(0==this._has.length)return this._errors.OK;for(let t of this._has)if(e.match(this._has))return this._errors.OK;return this._errors.HAS}}const c={1:"too small",2:"too large",3:"contains incorrect characters",4:"doesn't contain required characters",5:"not unique"};var p={getError:function(e){return c[e]}};class d{constructor(t,s=null){if(this._name=t,this._type,this._is_primary=!1,this._is_parent=!1,this._valid=1,this._atts={},this._confirm=!1,this._readonly=!1,this._placeholder="",this._conditions,this._link,this._reference,this._error=0,this._label="",this._on=e.ref(!0),this._summary=!1,this._default=null,this._validator=new n,this._value=e.ref(null),this._multiple,this._is_validate_on=!1,this._options=e.reactive([]),this._asset=null,this._display_value,this.val=e.computed({get:()=>this._value.value,set:e=>{this._value.value="checkbox"==this._type?e?1:0:e,this._error=this.validate(e)}}),this.on=e.computed({get:()=>this._on.value,set:e=>{this._on.value=e}}),s){for(let e in s)"field"!=e&&"validator"!=e&&(this[e]=s[e]);if(s.field)for(let e in s.field)this[e]=s.field[e];if(s.validation)for(let e in s.validation)this._validator[e]=s.validation[e]}}set confirm(e){this._confirm=e}set readonly(e){this._readonly=e}set placeholder(e){this._placeholder=e}set atts(e){this._atts=e}set default(e){this._default=e}set asset(e){this._asset=e}set conditions(e){this._conditions=e}set display_value(e){this._display_value=e}set link(e){this._link=e}set name(e){this._name=e}set type(e){this._type=e}set multiple(e){this._multiple=e}set is_primary(e){this._is_primary=e}set is_parent(e){this._is_parent=e}set reference(e){this._reference=e}set error(e){this._error=e}set label(e){this._label=e}set summary(e){this._summary=e}set validateon(e){this._is_validate_on=e}get name(){return this._name}get type(){return this._type}get options(){return this._options}get isprimary(){return this._is_primary}get required(){return this._min>0}get summary(){return this._summary}get display_value(){return this._display_value?this._display_value:this.val}get readonly(){return this._readonly}get placeholder(){return this._placeholder}get default(){return this._default}get atts(){return this._atts}get conditions(){return this._conditions}get link(){return this._link}get isparent(){return this._is_parent}get multiple(){return this._multiple}get confirm(){return this._confirm}get reference(){return this._reference}get error(){return this._error?isNaN(this._error)?this._error:p.getError(this._error):""}get showError(){return!(!this._is_validate_on||!this._error)}get label(){return this._label}saveAsset(e){if(this._asset){if(this.val)return this._asset.saveFile(this.val,e)}return Promise.resolve()}setOptions(e){if(this._options.length=0,this._reference)i.get(this._reference,e).then((e=>{for(let t in e.__data)0!==t.indexOf("__")&&this._options.push({key:e.__data[t].id,value:e.__data[t].value})})).catch((e=>{console.log(e)}));else try{for(let e of this._atts.options)this._options.push({key:e,value:e})}catch(e){console.log("options not set for ",this._name)}}clean(e){return"checkbox"==this._type?Boolean(e):e}validate(e){return this._validator.validate(e)}exp(){return{name:this._name,type:this._type,atts:this._atts}}calcValue(e){return e||""}}class h{constructor(){this._size=0,this._blob=null,this._uploaded=!1,this._chunk_size=0,this._url,this._key=0,this._key_field}set chunk_size(e){this._chunk_size=e}set blob(e){this._blob=e}set url(e){this._url=e}set key(e){this._key=e}set keyfield(e){this._key_field=e}get blob(){return this._blob}get size(){return this._size}get uploaded(){return this._uploaded}get chunk_size(){return this._chunk_size}get url(){return this._url}getChunk(e){const t=0==this._chunk_size?0:e*this._chunk_size;let s=0==this._chunk_size?this._size:(e+1)*this._chunk_size;s>this._size&&(s=this._size);const r=new DataView(this._blob,t,s-t);let o=[];for(let e=0,t=r.byteLength;e<t;++e)o.push(r.getInt8(e));return o.join("")}loadFile(e){let t={};return t[this._key_field]=e,i.get(this._url,t).catch((e=>{alert(e)}))}delFile(e){let t={};return t[this._key_field]=e,i.delete(this._url,t).catch((e=>{alert(e)}))}saveFile(e,t){return this._size=e.size,new Promise(((t,s)=>{const r=new FileReader;let o=this;r.onload=function(e){o.blob=e.target.result,t(r.result)},r.onerror=s,r.readAsArrayBuffer(e)})).then((()=>{let e=[],s=0==this.chunk_size?1:Math.ceil(this.size/this.chunk_size);for(let r=0;r<s;++r){const s={};s.__chunk=r,s.__blob=this.getChunk(r),s.id=t,e.push(i.put(this._url,s))}return Promise.all(e)}))}}class m{constructor(){this._active_children=[],this._active_state,this._change_intention,this._children=[],this._circular,this._default_state,this._key_states={parent_key:null,primary_key:null},this._name,this._parent_key,this._primary_key,this._settings={},this._states={},this._main_model,this._to,this.store=e.reactive({fields:{},parent_models:[],label:"",title:"",data:[],component:"",rawcomponent:"",actions:[],next:null,index:"",primarykeyname:"",parentkeyname:"",circular:"",model:this._name,siblings:[],children:[],stage:0,groups:[],classes:""})}get name(){return this._name}get currentstate(){return this._active_state?this._active_state:this._default_state}get children(){return this._children}get siblings(){return this._siblings.length>1?this._siblings:[]}set state(e){this._active_state=e||this._default_state,this._change_intention=null,this._settings[this._active_state]&&(this.store.settings=this._settings[this._active_state]),this.applySettings(),this.loadState()}set groups(e){this.store.groups=e}get main_model(){return this._main_model}set main_model(e){this._main_model=e}get key(){return"post"==this._active_state||"get"==this._active_state?this._key_states.parent_key:this._key_states.primary_key}set to(e){this._to=e}set key(e){if("get"==this._active_state||"post"==this._active_state?this._key_states.parent_key=e:this._key_states.primary_key=e,"post"==this._active_state||"put"==this._active_state)for(let e in this.store.fields)this.store.fields[e].on&&"select"==this.store.fields[e].type&&this.store.fields[e].setOptions(this.params)}set stage(e){this.store.stage=e}set name(e){this._name=e}set change_intention(e){this._change_intention=e}injectCustomSettings(e){this._settings=e}snakeCase(e){return e.replace("-","_")}get loadurl(){let e="/"+this._name;return"getprimary"!=this._active_state&&"put"!=this._active_state||(e+="-primary"),e}get saveurl(){return"/"+this._name}get params(){let e={};return"get"==this._active_state||"post"==this._active_state?this._key_states.parent_key&&(e[this._parent_key]=this._key_states.parent_key):"put"!=this._active_state&&"getprimary"!=this._active_state&&"delete"!=this._active_state||(e[this._primary_key]=this._key_states.primary_key),this.to&&(e.__to=this.to),e}get classes(){return this._name.replace("_","-")+" "+this._state}get to(){return this._to}get state(){return this._active_state}get parentkey(){return this._parent_key}get primarykey(){return this._primary_key}get index(){return this._name+"-"+this._active_state}get stage(){return this.store.stage}get change_intention(){return this._change_intention}get map(){return{model:this._name,key:this.key,state:this._active_state,to:this.to,stage:this.stage}}getSummary(e=null,t=null){if(e){if(e==this.snakeCase(this._parent_key))return this.store.parent_models[0].getSummary();{let s=[];for(let r of t[e.reference])s.push(r);return s.join(" ")}}{let e=[];for(let t in this.store.fields)this.store.fields[t].summary&&e.push(t.val);return e.join(" ")}}applySettings(){if(this.store.settings){if(this.store.settings.fields){for(let e of this.store.settings.fields)this.store.fields[e].on=!1;for(let e of this.store.settings.fields)this.store.fields[e].on=!0}this.store.settings.groups&&(this.store.groups=this.store.settings.groups),this.store.settings.disable_filter&&(this.store.disable_filter=!0),this.store.settings.disable_selectfields&&(this.store.disable_selectfields=!0)}}buildIntention(e,t=null){if(t||(t=this._key),this._change_intention={state:e,key:t,target:0},this.store.settings&&this.store.settings.change_intention)for(let e in this.store.settings.change_intention)this._change_intention[e]=this.store.settings.change_intention[e]}mapResponse(e){this._name=e.model,this.store.model=this._name,this._primary_key=e.primarykey,this._parent_key=e.parentkey,this._children=e.children,this.store.children=[];for(let t of e.children)this.store.children.push({r:()=>{this.buildIntention("get",this._key_states.primary_key),this._change_intention.model=t.name},n:t.label});this.store.siblings=[];for(let t of e.siblings)this.store.siblings.push({r:()=>{this.buildIntention("get",this._key_states.parent_key),this._change_intention.model=t.name},n:t.label});this._circular=e.circular,this.store.primarykeyname=e.primarykey,this.store.parentkeyname=e.parentkey,this.store.circular=e.circular,this.store.fields={};for(let t in e.fields)if(this.store.fields[t]=new d(t,e.fields[t]),"asset"==this.store.fields[t].type){let e=new h;e.url=this._name+"-"+t,e.keyfield=this.store.primarykeyname,this.store.fields[t].asset=e}this._states=e.states,this._default_state=e.default_state;let t=e.to;for(;t;){let e=new m({model:t.model,key:0});e.mapResponse(t),e.main_model=this,e.state="getprimary",this.store.parent_models.push(e),t=t.to}}load(){this.store.data=[];for(let e in this.store.fields)this.store.fields[e].val=null;if("get"==this._active_state)return i.get(this.loadurl,this.params).then((e=>{if("SUCCESS"!=e.__status)throw new Error(e);this.mapRepoData(e)})).then((()=>{if(this.store.parent_models.length>0){let e=this.store.parent_models[0];return e.key=this.key,e.to=this.to,i.get(e.loadurl,e.params).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);e.mapData(t);for(let e=1,s=this.store.parent_models.length;e<s;++e){let s=this.store.parent_models[e];s.mapData(t[s.name])}}))}}));if("getprimary"==this._active_state||"put"==this._active_state)return i.get(this.loadurl,this.params).then((e=>{if("SUCCESS"!=e.__status)throw new Error(e);this.mapData(e);for(let t of this.store.parent_models)e[t.name]&&t.mapData(e[t.name])}));if("post"==this._active_state&&this.store.parent_models.length>0){let e=this.store.parent_models[0];return e.keymanager=this._key_states.parent_key,e.to=this.to,i.get(e.loadurl,e.params).then((e=>{if("SUCCESS"!=e.__status)throw new Error(e);this.store.parent_models[this.store.parent_models.length-1].mapData(e);for(let t of this.store.parent_models)t.mapData(e[t.name])})).catch((e=>{console.log(e)}))}return Promise.resolve()}rLoadObj(e){let t={};for(const s in this.store.fields)t[s]=e[s];if(this._circular&&e[this._name]&&e[this._name]){t[this._name]=[];for(const s in e[this._name])t[this._name].push(this.rLoadObj(e[this._name][s]))}for(const s in this._active_children){const r=this._active_children[s];if(e[r]){t[r]=[];for(const s in e[r])t[r].push(this.rLoadObj(e[r][s]))}}return t}indexData(e){let t={};for(const s in e){const r=e[s];for(let e of this.store.groups){e=this.snakeCase(e),t[e]||(t[e]={});let o=r[e];t[e][o]||(t[e][o]={display:"",contains:[]},t[e][o].display=this.getSummary(e,r)),t[e][o].contains.push(s)}}return t}mapRepoData(e){this.store.data=[];for(const t in e.__data){const s=this.rLoadObj(e.__data[t]);this.store.data.push(s)}this.store.indexes=this.indexData(this.store.data)}mapData(e){for(const t in this.store.fields)this.store.fields[t].val=e[t]?e[t]:null}buildlink=e=>()=>{this.buildIntention(e)};loadState(){this.store.actions=[],this.store.component="",this.store.rawcomponent="",this.store.data=[],this.store.title=this._states[this._active_state].title,this.store.label=this._states[this._active_state].label,this.store.action=this._active_state,this.store.method=this.store.action,this.store.submiturl=this.saveurl,this.store.classes=this._name+" "+this._active_state,this.store.settings||(this.store.settings={}),this.store.primarykey=()=>this._key_states.primary_key,this.store.addKeys=()=>{},this.store.resolveKeys=()=>{},{get:()=>{if(this.store.actions=[],this._states.post&&this.store.actions.push({r:this.buildlink("post"),n:this._states.get.actions.post}),this.store.rawcomponent=this.store.groups.length>0?"ptj-list":this._circular||this._active_children.length>0?"ptj-tree":"ptj-table",this.store.component="ptj-repo",this.store.index=this._name+"-get",this.store.reload=()=>{this.load()},this.store.next=e=>{this._states.getprimary?this.buildIntention("getprimary",e):this._states.put&&this.buildIntention("put",e),this.store.active_repo=[]},this.store.addKeys=e=>{},!this.store.settings.fields){this.store.settings.fields=[];for(let e in this.store.fields)(e==this.primarykey||this.store.fields[e].summary)&&this.store.settings.fields.push(e)}this.store.submiturl=this.loadurl},getprimary:()=>{if(this.store.actions=[],this.store.index=this._name+"-getprimary",this._states.put&&this.store.actions.push({r:this.buildlink("put"),n:this._states.getprimary.actions.put}),this._states.delete&&this.store.actions.push({r:async()=>{if(confirm("Are you sure you want to delete this record and all associated children?")){let e={};e[this._primary_key]=this._key_states.primary_key,await i.delete("/"+this._name,e),this.buildIntention("get",this._key_states.parent_key)}},n:this._states.getprimary.actions.delete}),this.store.component="ptj-single-item",!this.store.settings.fields){this.store.settings.fields=[];for(let e in this.store.fields)this.store.settings.fields.push(e)}this._main_model&&(this.store.next=()=>{this._main_model.change_intention={state:"getprimary",key:this.key,target:0,model:this._name}})},post:()=>{if(this.store.component=this._states.login?"ptj-account-handler":"ptj-form",this.store.index=this._name+"-post",this.store.actions=[],this._states.login&&this.store.actions.push({r:this.buildlink("login"),n:this._states.post.actions.login}),this.store.next=()=>{this.buildIntention("get")},!this.store.settings.fields){this.store.settings.fields=[];for(let e of this._states.post.fields)this.store.settings.fields.push(e)}this.store.addKeys=e=>{e[this._parent_key]=this._key_states.parent_key},this.store.resolveKeys=e=>{this._key_states.primary_key=e[this._primary_key]}},put:()=>{if(this.store.component="ptj-form",this.store.index=this._name+"-put",this.store.actions=[],this.store.next=()=>{this._states.getprimary?this.buildIntention("getprimary"):this.buildIntention("get")},!this.store.settings.fields){this.store.settings.fields=[];for(let e of this._states.put.fields)this.store.settings.fields.push(e)}this.store.addKeys=e=>{e[this._primary_key]=this._key_states.primary_key}},login:()=>{if(this.store.component="ptj-account-handler",this.store.index=this._name+"-login",this.store.actions=[],this._states.post&&this.store.actions.push({r:this.buildlink("post"),n:this._states.login.actions.post}),!this.store.settings.fields){this.store.settings.fields=[];for(let e of this._states.login.fields)this.store.settings.fields.push(e)}this.store.method="post",this.store.submiturl+="-login",this.store.next=null}}[this._active_state]();for(let e in this.store.fields)this.store.fields[e].on=!1;for(let e of this.store.settings.fields)this.store.fields[e].on=!0}}var u={encodeParams:function(e){let t={},s=[];for(let r in e)"object"==typeof e[r]&&e[r]||Array.isArray(e[r])?t[r]=e[r]:s.push(r+"="+encodeURIComponent(e[r]));return Object.keys(t).length>0&&s.push("graph="+encodeURIComponent(JSON.stringify(t))),s.join("&")},decodeParams:function(){const e=new URLSearchParams(window.location.search);let t={};return e.forEach((function(e,s){if("graph"==s){let s=JSON.parse(decodeURIComponent(e));t={...t,...s}}else t[s]=e})),t},mapParams:function(e,t){for(let s in t){const r=new RegExp("${"+s+"}","g");e=e.replace(r,t[s])}return e}};const f={post:"-create",put:"-update",delete:"-delete",login:"-login",logout:"-logout",getprimary:"-primary",get:""};class _{constructor(){this._model,this._state="",this._key=0,this._to}set model(e){this._model=e}set state(e){this._state=e}set key(e){this._key=e}set to(e){this._to=e}get model(){return this._model}get state(){return this._state}get key(){return this._key}get to(){return this._to}swap(e){this._model=e.model,this._state=e.state,this._key=e.key,this._to=e.to}convertToURL(){let e=this._model,t=this._state,s=this._key,r=this._to,o=e+f[t];return s&&(o+="-"+s),r&&(o+="-to-"+r),o}convertFromURL(e){if(!e)return;let t=e.split("-to-");t.length>1&&(this._to=t[1],e=t[0]),t=e.split("-");let s=parseInt(t[t.length-1]);if(isNaN(s)?this._key=0:(t.pop(),this._key=s),0==t.length)throw new Error("Can't convert this url string: "+e);for(let e in f)if(f[e]=="-"+t[t.length-1]){this._state=e,t.pop();break}this._model=t.join("-")}}let g=[],j=null,k="",v={};function C(){let e=new _;return g.push(e),e}var y={trigger:function(e){j=e},resetMaps:function(){g=[]},createMap:C,convertToURL:function(){let e=[];for(let t of g)e.push(t.convertToURL());let t=k+"/"+e.join("/");const s=u.encodeParams(v);return s&&(t+="?"+s),t},convertFromURL:function(e){let t=(e=(e=e.replace(k,"")).replace(/^\/+|\/+$/g,"")).split("/");g=[];for(let e in t){C().convertFromURL(t[e])}j&&j()},setBase:function(e){e=e.replace(/^\/+|\/+$/g,""),k="/"+e},getMaps:function(){return g}};let b;function w(e){e||(e=window.location.pathname),b&&b(e)}window.onpopstate=function(){w(document.location.pathname)};var B={setRoute:function(e,t=""){window.history.pushState({name:e},document.title,e),w(e)},hardSetRoute:function(e){window.location=e},runRoute:w,regCallback:function(e){b=e}};let E=e.reactive({models:[],profile:null}),x={},S=[],N=-1;function V(e,t){let s=e.model?"/route-"+e.model:"/route-core-default",r={};return e.to&&(r.__to=e.to),i.get(s,r).then((s=>{if("SUCCESS"!=s.__status)throw new Error(s);let r=s.model,o=new m;return o.to=e.to,x[r]&&o.injectCustomSettings(x[r]),o.mapResponse(s),o.state=e.state,o.key=e.key,o.stage=t,S[t]=o,o})).then((e=>e.load()))}function D(){N=-1;let e=y.getMaps();if(0==e.length)throw new Error("Error with controller run, no maps created");E.models=[];let t=[];S.length>e.length&&S.splice(e.length,S.length-e.length);for(let s in e){const r=e[s];let o,l;s>=S.length||S[s].name!=r.model?l=V(r,s):(o=S[s],o.state==r.state&&o.key==r.key||(o.state=r.state,o.key=r.key),l=S[s].load().catch((e=>console.log(e)))),t.push(l)}Promise.all(t).then((()=>{for(let e of S)E.models.push(e)})).catch((e=>{console.log(e)}))}y.trigger((()=>{D()})),B.regCallback(y.convertFromURL);var z={store:E,models:S,setSettings:function(e){if(e.client){if(i.setURL(e.client.url),e.client.custom_headers)for(let t in e.client.custom_headers)i.regCustomHeader(t,e.client.custom_headers[t]);e.client.debug&&i.regDebug(!0),i.regStatusHandler(403,(function(){alert("Page not found")}))}e.mapper&&e.mapper.base&&y.setBase(e.mapper.base),e.models&&(x=e.models)},initProfile:function(){return i.get("/core-check-user").then((e=>(E.profile=e.__profile,E.profile)))},assumeRole:function(e){return i.post("/core-assume-role",{role:e}).then((e=>(E.profile=e.__profile,E.profile)))},removeRole:function(){return i.post("/core-remove-role").then((e=>(E.profile=e.__profile,E.profile)))},run:D,buildModel:V,buildLink:function(){y.resetMaps();let e=[],t=[];for(let s in S){let r=S[s];e.push(r.map),t.push(r.change_intention)}for(let s=0,r=t.length;s<r;++s){let r=t[s];if(!r)continue;let o=s+r.target;if(o<0?e.unshift({...e[s]}):o>=e.length&&e.push({...e[e.length-1]}),r.model&&(e[o].model=r.model),r.state&&(e[o].state=r.state),r.to&&(e[o].to=r.to),r.key&&(e[o].key=r.key),r.end){e.splice(o+1,e.length);break}}for(const t of e){let e=y.createMap();for(let s in t)e[s]=t[s]}let s=y.convertToURL();B.setRoute(s)},runLink:function(){y.runRoute()},runData:function(e=null){e||(e=window.location.pathname),y.convertFromURL(e)},reloadFromBase:function(){y.resetMaps();let e=y.convertToURL();B.setRoute(e)},getStore:function(){return E.models[N].store},next:function(){++N}};let L={"ptj-account-details-logout":"ptj-account-details-logout","ptj-account-handler":"ptj-account-handler","ptj-breadcrumbs":"ptj-breadcrumbs","ptj-card":"ptj-card","ptj-card-row":"ptj-card-row","ptj-card-label":"ptj-card-label","ptj-card-value":"ptj-card-value","ptj-form":"ptj-form","ptj-form-title":"ptj-form-title","ptj-form-error":"ptj-form-error","ptj-form-group":"ptj-form-group","ptj-form-submit":"ptj-form-submit","ptj-root":"ptj-root","ptj-tabs":"ptj-tabs","ptj-tabs-card":"ptj-tabs-card","ptj-tabs-tab":"ptj-tabs-tab","ptj-repo":"ptj-repo","ptj-nav":"ptj-nav","ptj-nav-link":"ptj-nav-link","ptj-single-item":"ptj-single-item","ptj-single-item-row":"ptj-single-item-row","ptj-single-item-label":"ptj-single-item-label","ptj-single-item-value":"ptj-single-item-value","ptj-single-item-actions":"ptj-single-item-actions","ptj-single-item-children":"ptj-single-item-children","ptj-widget-window":"ptj-widget-window","ptj-widget-window-header":"ptj-widget-window-header","ptj-widget-window-title":"ptj-widget-window-title","ptj-widget-window-toggle":"ptj-widget-window-toggle","ptj-widget-window-body":"ptj-widget-window-body","ptj-repo-header-title":"ptj-repo-header-title","ptj-repo-header-actions":"ptj-repo-header-actions","ptj-tree":"ptj-tree","ptj-form-row":"ptj-form-row","ptj-form-input-row":"ptj-form-input-row","ptj-form-input-label":"ptj-form-input-label","ptj-form-input":"ptj-form-input","ptj-table":"ptj-table","ptj-table-header":"ptj-table-header","ptj-table-header-cell":"ptj-table-header-cell","ptj-table-row":"ptj-table-row","ptj-table-cell":"ptj-table-cell","ptj-table-cell-sortable":"ptj-table-cell-sortable","ptj-form-confirm-row":"ptj-form-confirm-row","ptj-form-confirm-label":"ptj-form-confirm-label","ptj-form-confirm":"ptj-form-confirm","ptj-pagination":"ptj-pagination","ptj-filter-form":"ptj-filter-form","ptj-filter-form-group":"ptj-filter-form-group","ptj-filter-form-submit":"ptj-filter-form-submit","ptj-form-select-row":"ptj-form-select-row","ptj-form-select-label":"ptj-form-select-label","ptj-form-select":"ptj-form-select","ptj-tree-node":"ptj-tree-node","ptj-tree-node-row":"ptj-tree-node-row","ptj-selectfields":"ptj-selectfields","ptj-selectfields-checkbox":"ptj-selectfields-checkbox","ptj-selectfields-label":"ptj-selectfields-label","ptj-form-radio-row":"ptj-form-radio-row","ptj-form-radio-label":"ptj-form-radio-label","ptj-form-radio-option-label":"ptj-form-radio-option-label","ptj-checkbox-row":"ptj-checkbox-row","ptj-checkbox-label":"ptj-checkbox-label","ptj-checkbox":"ptj-checkbox","ptj-form-textarea-row":"ptj-form-textarea-row","ptj-form-textarea-label":"ptj-form-textarea-label","ptj-form-textarea":"ptj-form-textarea","ptj-form-asset-row":"ptj-form-asset-row","ptj-form-asset-label":"ptj-form-asset-label","ptj-form-asset":"ptj-form-asset","ptj-progress-bar-wrapper":"ptj-progress-bar-wrapper","ptj-progress-bar-holder":"ptj-progress-bar-holder","ptj-progress-bar":"ptj-progress-bar","ptj-error":"ptj-error","ptj-filter-form-time-row":"ptj-filter-form-time-row","ptj-filter-form-time-label":"ptj-filter-form-time-label","ptj-filter-form-time-1":"ptj-filter-form-time-1","ptj-filter-form-time-2":"ptj-filter-form-time-2","ptj-filter-form-checkbox-row":"ptj-filter-form-checkbox-row","ptj-filter-form-checkbox-label":"ptj-filter-form-checkbox-label","ptj-filter-form-checkbox":"ptj-filter-form-checkbox","ptj-account-details-logout":"ptj-account-details-logout","ptj-accounthandler":"ptj-accounthandler","ptj-list":"ptj-list"};var O={regClass:function(e,t){L[e]=t},getClass:function(e){return L[e]}},R=e.defineComponent({name:"ptj-error",props:{error:String},setup:()=>({Class:O})});function F(e,t){void 0===t&&(t={});var s=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===s&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}F("\n.error {\r\n  color : red;\n}\r\n"),R.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("p",{class:e.normalizeClass(t.Class.getClass("ptj-error"))},e.toDisplayString(t.error),3)},R.__file="presstojam/src/components/ptj-error.vue";var A=e.defineComponent({name:"ptj-input",props:{field:Object},setup:()=>({Class:O}),components:{"ptj-error":R}});const U=["name","type","readonly"];A.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-input-row")+" "+t.field.name)},["hidden"!=t.field.atts.type?(e.openBlock(),e.createElementBlock("label",{key:0,class:e.normalizeClass(t.Class.getClass("ptj-form-input-label"))},e.toDisplayString(t.field.label),3)):e.createCommentVNode("v-if",!0),e.withDirectives(e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-form-input")),name:t.field.name,type:t.field.atts.type,"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e),onBlur:s[1]||(s[1]=e=>t.field.validateon=!0),readonly:t.field.readonly},null,42,U),[[e.vModelDynamic,t.field.val]]),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.showError]])],2)},A.__file="presstojam/src/components/ptj-form-input.vue";var M=e.defineComponent({name:"ptj-confirm",props:{field:Object},data:()=>({cval:""}),setup:()=>({Class:O}),computed:{name(){return this.field.name+"_confirm"},error(){if(this.isvalidateon)return this.field.val==this.cval?"":"Doesn't match "+this.field.name}},components:{"ptj-error":R}});const I=["name","type"];M.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-confirm-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-confirm-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-form-confirm")),name:t.name,type:t.field.atts.type,"onUpdate:modelValue":s[0]||(s[0]=e=>t.cval=e),onBlur:s[1]||(s[1]=e=>t.field.setValidateOn())},null,42,I),[[e.vModelDynamic,t.cval]]),e.withDirectives(e.createVNode(i,{error:t.error},null,8,["error"]),[[e.vShow,t.error]])],2)},M.__file="presstojam/src/components/ptj-form-confirm.vue";var T=e.defineComponent({props:{field:Object},setup:e=>({Class:O}),components:{"ptj-error":R}});const P=["readonly","name","multiple"],K=e.createElementVNode("option",{value:"0"},"Select Option",-1),q=["value"];T.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-select-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-select-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("select",{class:e.normalizeClass(t.Class.getClass("ptj-form-select")),"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e),readonly:t.field.readonly,name:t.field.name,multiple:t.field.multiple},[K,(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.options,(t=>(e.openBlock(),e.createElementBlock("option",{key:t.key,value:t.key},e.toDisplayString(t.value),9,q)))),128))],10,P),[[e.vModelSelect,t.field.val]]),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.showError]])],2)},T.__file="presstojam/src/components/ptj-form-select.vue";var H=e.defineComponent({name:"ptj-radio",props:{field:Object},setup:()=>({Class:O}),data:()=>({isvalidateon:!1}),methods:{setValidateOn(){this.isvalidateon=!0}},components:{"ptj-error":R}});const J=["name","value"];H.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-radio-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-radio-label"))},e.toDisplayString(t.field.label),3),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.options,(r=>(e.openBlock(),e.createElementBlock("div",{key:r},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-radio-option-label"))},e.toDisplayString(r.option),3),e.withDirectives(e.createElementVNode("input",{name:t.cfield.name,type:"radio",value:r.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e)},null,8,J),[[e.vModelRadio,t.field.val]])])))),128)),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.error]])],2)},H.__file="presstojam/src/components/ptj-form-radio.vue";var X=e.defineComponent({name:"ptj-checkbox",props:{field:Object},setup:()=>({Class:O}),components:{"ptj-error":R}});const Y=["name"];X.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-checkbox-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-checkbox-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-checkbox")),type:"checkbox","true-value":1,"false-value":0,name:t.field.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e)},null,10,Y),[[e.vModelCheckbox,t.field.val]]),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.showError]])],2)},X.__file="presstojam/src/components/ptj-form-checkbox.vue";var $=e.defineComponent({name:"ptj-textarea",props:{field:Object},setup:()=>({Class:O}),components:{"ptj-error":R}});const W=["name","readonly","data-html"];$.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-textarea-row")+" "+t.field.name.replace("_","-"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-textarea-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("textarea",{class:e.normalizeClass(t.Class.getClass("ptj-form-textarea")),name:t.field.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e),readonly:t.field.readonly,"data-html":t.field.atts.html},null,10,W),[[e.vModelText,t.field.val]]),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.error]])],2)},$.__file="presstojam/src/components/ptj-form-textarea.vue";var G=e.defineComponent({name:"ptj-asset-field",props:{field:{type:Object,required:!0}},setup:()=>({Class:O}),methods:{setFile(e){e.target.files.length>0?this.field.val=e.target.files[0]:this.field.val=null,this.field.validateon=!0}},components:{"ptj-error":R}});const Q=["name"];G.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-asset-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-form-asset-label"))},e.toDisplayString(t.field.label),3),e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-form-asset")),ref:"input",onChange:s[0]||(s[0]=(...e)=>t.setFile&&t.setFile(...e)),name:t.field.name,type:"file"},null,42,Q),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.showError]])],2)},G.__file="presstojam/src/components/ptj-form-asset.vue";var Z=e.defineComponent({name:"ptj-progress-bar",props:{total:Number,progress:Number},setup:()=>({Class:O}),computed:{num(){let e=Math.floor(this.progress/this.total*100);return isNaN(e)?0:e},style(){return"width:"+this.num+"%;"}}});F("\n.ptj-progress-holder[data-v-460b10ff] {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\n}\n.ptj-bar[data-v-460b10ff] {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\n}\r\n\r\n\r\n"),Z.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-progress-bar-wrapper"))},[e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-progress-bar-holder")+" ptj-progress-holder")},[e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-progress-bar")+" ptj-bar"),style:e.normalizeStyle(t.style)}," ",6)],2),e.createElementVNode("span",null,e.toDisplayString(t.num)+"%",1)],2)},Z.__scopeId="data-v-460b10ff",Z.__file="presstojam/src/components/ptj-progress-bar.vue";var ee=e.defineComponent({name:"ptj-form",data:()=>({fstate:0,progress:0,globalerror:""}),setup:()=>({store:z.getStore(),Class:O}),methods:{clearErrors(){this.globalerror="";for(let e in this.store.fields)this.store.fields[e].error=0},saveAsset(e){const t=this.store.data[e.name];if(!t)return Promise.resolve();asset.saveFile(t,this._key,(()=>++this.progress)),this.total+=asset.num_chunks},submit(e){this.fstate=this.total>0?1:2,this.clearErrors();let t={};for(let e in this.store.fields)this.store.fields[e].on&&(t[e]=this.store.fields[e].val);return this.store.addKeys(t),i[this.store.method](this.store.submiturl,t).then((e=>{if("SUCCESS"!=e.__status)throw{message:e.statusText};this.store.resolveKeys(e)})).then((()=>{let e=[];for(let t in this.store.fields)if("asset"==this.store.fields[t].type){let s=this.store.fields[t].saveAsset(this.store.primarykey()).then((()=>{++this.progress})).catch((e=>{this.fstate=0,this.progress=0,this.store.fields[t].error=e}));e.push(s)}return Promise.all(e)})).then((()=>{this.store.next(),z.buildLink()})).catch((e=>{if(this.fstate=0,console.log(e),"string"==typeof e)this.globalerror=e;else for(let t in e)0!==t.indexOf("__")&&this.store.fields[t]&&(this.store.fields[t].error=p.getError(e[t]))}))}},computed:{total(){let e=0;for(let t in this.store.fields)"asset"==this.store.fields[t].type&&++e;return e}},components:{"ptj-input":A,"ptj-confirm":M,"ptj-select":T,"ptj-radio":H,"ptj-checkbox":X,"ptj-textarea":$,"ptj-asset-field":G,"ptj-progress-bar":Z}});const te={key:6};ee.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-select"),n=e.resolveComponent("ptj-radio"),c=e.resolveComponent("ptj-checkbox"),p=e.resolveComponent("ptj-textarea"),d=e.resolveComponent("ptj-asset-field"),h=e.resolveComponent("ptj-input"),m=e.resolveComponent("ptj-confirm"),u=e.resolveComponent("ptj-progress-bar");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("form",{onSubmit:s[0]||(s[0]=e.withModifiers(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:e.normalizeClass(t.Class.getClass("ptj-form")+" "+t.store.classes)},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-error"))},e.toDisplayString(t.globalerror),3),[[e.vShow,t.globalerror]]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,(s=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:s.name,class:e.normalizeClass(t.Class.getClass("ptj-form-group"))},["select"==s.type?(e.openBlock(),e.createBlock(i,{key:0,field:s,stores:t.store},null,8,["field","stores"])):"radio"==s.type?(e.openBlock(),e.createBlock(n,{key:1,field:s,stores:t.store},null,8,["field","stores"])):"checkbox"==s.type?(e.openBlock(),e.createBlock(c,{key:2,field:s,stores:t.store},null,8,["field","stores"])):"textarea"==s.type?(e.openBlock(),e.createBlock(p,{key:3,field:s,stores:t.store},null,8,["field","stores"])):"asset"==s.type?(e.openBlock(),e.createBlock(d,{key:4,field:s,stores:t.store},null,8,["field","stores"])):(e.openBlock(),e.createBlock(h,{key:5,field:s,stores:t.store},null,8,["field","stores"])),s.confirm?(e.openBlock(),e.createElementBlock("div",te,[e.createVNode(m,{field:s,stores:t.store},null,8,["field","stores"])])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" REMOVED: ")],2)),[[e.vShow,s.on]]))),128)),e.createElementVNode("input",{type:"submit",value:"Submit",class:e.normalizeClass(t.Class.getClass("ptj-form-submit"))},null,2)],34),[[e.vShow,0==t.fstate]]),e.withDirectives(e.createVNode(u,{total:t.total,progress:t.progress},null,8,["total","progress"]),[[e.vShow,1==t.fstate]])],64)},ee.__file="presstojam/src/components/ptj-form.vue";var se=e.defineComponent({name:"ptj-nav",props:{actions:Array,classes:{type:String,default:""}},setup:()=>({Class:O}),methods:{setRoute(e){e.r(),z.buildLink()}}});const re=["onClick"];se.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("span",{class:e.normalizeClass(t.Class.getClass("ptj-nav")+" "+t.classes)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.actions,(s=>(e.openBlock(),e.createElementBlock("a",{key:s,onClick:e=>{t.setRoute(s)},class:e.normalizeClass(t.Class.getClass("ptj-nav-link"))},e.toDisplayString(s.n),11,re)))),128))],2)},se.__file="presstojam/src/components/ptj-nav.vue";var oe=e.defineComponent({name:"ptj-time-range",props:{field:Object},setup:()=>({Class:O}),components:{"ptj-error":R}});oe.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-error");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-filter-form-time-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-filter-form-time-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-filter-form-time-1")),type:"date","onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val1=e)},null,2),[[e.vModelText,t.field.val1]]),e.withDirectives(e.createElementVNode("input",{class:e.normalizeClass(t.Class.getClass("ptj-filter-form-time-2")),type:"date","onUpdate:modelValue":s[1]||(s[1]=e=>t.field.val2=e)},null,2),[[e.vModelText,t.field.val2]]),e.withDirectives(e.createVNode(i,{error:t.field.error},null,8,["error"]),[[e.vShow,t.field.error]])],2)},oe.__file="presstojam/src/components/ptj-filter-form-time.vue";var le=e.defineComponent({name:"ptj-checkbox",props:{field:Object},setup:()=>({Class:O})});const ae=["name"],ie=[e.createElementVNode("option",{value:""},e.toDisplayString("All"),-1),e.createElementVNode("option",{value:"1"},e.toDisplayString("Checked"),-1),e.createElementVNode("option",{value:"0"},e.toDisplayString("Unchecked"),-1)];le.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-filter-form-checkbox-row"))},[e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-filter-form-checkbox-label"))},e.toDisplayString(t.field.label),3),e.withDirectives(e.createElementVNode("select",{name:t.field.name,"onUpdate:modelValue":s[0]||(s[0]=e=>t.field.val=e),class:e.normalizeClass(t.Class.getClass("ptj-filter-form-checkbox"))},ie,10,ae),[[e.vModelSelect,t.field.val]])],2)},le.__file="presstojam/src/components/ptj-filter-form-checkbox.vue";var ne=e.defineComponent({props:{title:String,active:{type:Boolean,default:!1},classes:{type:String,default:""}},setup:()=>({Class:O}),data(){return{show:this.active}},methods:{toggleWidget(){this.show=!this.show}}});const ce=[e.createElementVNode("span",{class:"material-icons"},"more_horiz",-1)],pe={class:"Class.getClass('ptj-widget-window-body')"};ne.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-widget-window")+" "+t.classes)},[e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-widget-window-header"))},[e.createElementVNode("h1",{class:e.normalizeClass(t.Class.getClass("ptj-widget-window-title"))},[e.createTextVNode(e.toDisplayString(t.title)+" ",1),e.createElementVNode("a",{class:e.normalizeClass(t.Class.getClass("ptj-widget-window-toggle")),onClick:s[0]||(s[0]=(...e)=>t.toggleWidget&&t.toggleWidget(...e))},ce,2)],2)],2),e.withDirectives(e.createElementVNode("div",pe,[e.renderSlot(t.$slots,"default")],512),[[e.vShow,t.show]])],2)},ne.__file="presstojam/src/components/ptj-widget-window.vue";var de=e.defineComponent({name:"ptj-filter-form",setup:()=>({store:z.getStore(),Class:O}),methods:{submit(){this.store.reload()}},components:{"ptj-input":A,"ptj-select":T,"ptj-checkbox":X,"ptj-time-range":oe,"ptj-filter-checkbox":le,"ptj-widget":ne}});F("\n.error[data-v-71ada21d] {\r\n  color : red;\n}\r\n\r\n"),de.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-select"),n=e.resolveComponent("ptj-filter-checkbox"),c=e.resolveComponent("ptj-time-range"),p=e.resolveComponent("ptj-input"),d=e.resolveComponent("ptj-widget");return e.openBlock(),e.createBlock(d,{title:"search"},{default:e.withCtx((()=>[e.createElementVNode("form",{onSubmit:s[0]||(s[0]=e.withModifiers(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:e.normalizeClass(t.Class.getClass("ptj-filter-form"))},[e.createElementVNode("h1",null,"Search "+e.toDisplayString(t.store.title),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,(s=>(e.openBlock(),e.createElementBlock("div",{key:s.name,class:e.normalizeClass(t.Class.getClass("ptj-filter-form-group"))},["select"==s.type?(e.openBlock(),e.createBlock(i,{key:0,field:s,multiple:!0,stores:t.store},null,8,["field","stores"])):"checkbox"==s.type?(e.openBlock(),e.createBlock(n,{key:1,field:s,stores:t.store},null,8,["field","stores"])):"datetime"==s.atts.type?(e.openBlock(),e.createBlock(c,{key:2,field:s,stores:t.store},null,8,["field","stores"])):(e.openBlock(),e.createBlock(p,{key:3,field:s,stores:t.store},null,8,["field","stores"])),e.createCommentVNode(" REMOVED: ")],2)))),128)),e.createElementVNode("input",{type:"submit",value:"Submit",class:e.normalizeClass(t.Class.getClass("ptj-filter-form-submit"))},null,2)],34)])),_:1})},de.__scopeId="data-v-71ada21d",de.__file="presstojam/src/components/ptj-filter-form.vue";var he=e.defineComponent({props:{max_page_limit:Number},setup:e=>({groups:Math.ceil(e.pages/e.max_page_limit),current_group:0,Class:O}),computed:{firstindex(){return this.current_group*this.max_options},maxoptions:()=>[]},methods:{showPages(e){let t=Controller.current_route.value,s=t+"#";t.query&&(s+=t.query+"&"),s+="__page="+(this.firstindex+e),Router.setRoute(s)}}});const me=["onClick"];he.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-pagination"))},[e.withDirectives(e.createElementVNode("a",{onClick:s[0]||(s[0]=e=>{t.showPages(-1)})},"<<",512),[[e.vShow,t.optiongroup>0]]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.maxoptions,(s=>(e.openBlock(),e.createElementBlock("a",{key:s,onClick:e=>t.page(s)},e.toDisplayString(t.firstindex+s),9,me)))),128)),e.withDirectives(e.createElementVNode("a",{onClick:s[1]||(s[1]=e=>t.showPages(1))},">>",512),[[e.vShow,t.current_group<t.groups-1]])],2)},he.__file="presstojam/src/components/ptj-pagination.vue";var ue=e.defineComponent({setup:()=>({store:z.getStore(),Class:O}),components:{"ptj-widget":ne}});const fe=["onUpdate:modelValue"];ue.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-widget");return e.openBlock(),e.createBlock(i,{title:"select fields",classes:t.Class.getClass("ptj-selectfields")},{default:e.withCtx((()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,r)=>(e.openBlock(),e.createElementBlock("div",{key:r},[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":e=>s.on=e,class:e.normalizeClass(t.Class.getClass("ptj-selectfields-checkbox"))},null,10,fe),[[e.vModelCheckbox,s.on]]),e.createElementVNode("label",{class:e.normalizeClass(t.Class.getClass("ptj-selectfields-label"))},e.toDisplayString(s.name),3)])))),128))])),_:1},8,["classes"])},ue.__file="presstojam/src/components/ptj-selectfields.vue";var _e=e.defineComponent({name:"ptj-header",setup:()=>({store:z.getStore(),Class:O}),components:{"ptj-nav":se,"ptj-filter-form":de,"ptj-pagination":he,"ptj-selectfields":ue}});_e.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-nav"),n=e.resolveComponent("ptj-filter-form"),c=e.resolveComponent("ptj-selectfields");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("h1",{class:e.normalizeClass(t.Class.getClass("ptj-repo-header-title"))},e.toDisplayString(t.store.title),3),e.createVNode(i,{actions:t.store.actions,class:e.normalizeClass(t.Class.getClass("ptj-repo-header-actions"))},null,8,["actions","class"]),1!=t.store.disable_filter?(e.openBlock(),e.createBlock(n,{key:0})):e.createCommentVNode("v-if",!0),1!=t.store.disable_selectfields?(e.openBlock(),e.createBlock(c,{key:1})):e.createCommentVNode("v-if",!0)],64)},_e.__file="presstojam/src/components/ptj-repo-header.vue";var ge=e.defineComponent({name:"ptj-tree-node",props:{branch:{type:Object,required:!0},draggable:Boolean,ischild:{type:Boolean,default:!1}},data:()=>({toggle_state:{}}),setup:()=>({store:z.getStore(),Class:O}),methods:{toggle(e){this.toggle_state[e]=!this.toggle_state[e]},setDraggable(e){e.target.closest(".ptj-draggable").setAttribute("draggable",!0)},endDraggable(e){e.target.closest(".ptj-draggable").setAttribute("draggable",!1)},selectRow(e){this.store.next(e),z.buildLink()},getRowClass(){let e=[];for(let t of this.store.groups)e.push(this.store.model+"-"+t.replace("_","-")+"-"+this.branch[t]);return e.join(" ")}},computed:{sortable:()=>!0,children(){let e=[];this.store.circular&&this.branch[this.store.model]&&(e=this.branch[this.store.model]);for(let t in this.store.activechildren)this.branch[this.store.activechildren[t]]&&(e=e.concat(this.branch[this.store.activechildren[t]]));return e}},components:{}});const je=t=>(e.pushScopeId("data-v-1dcaa9f5"),t=t(),e.popScopeId(),t),ke=["id"],ve=[je((()=>e.createElementVNode("span",{class:"material-icons"},"subdirectory_arrow_right",-1)))],Ce=[je((()=>e.createElementVNode("span",{class:"material-icons"},"keyboard_arrow_right",-1)))],ye={key:0},be=[je((()=>e.createElementVNode("span",{class:"material-icons"},"drag_handle",-1)))];F("\n.model-tree.branch[data-v-1dcaa9f5] {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\n}\n.tree .ide-block[data-v-1dcaa9f5] {\r\n\tdisplay : none;\n}\n.dragArea[data-v-1dcaa9f5] {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\n}\r\n\r\n\r\n"),ge.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-tree-node",!0);return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-tree-node")+" ptj-draggable"+this.getRowClass()),id:t.branch[t.store.primarykeyname],draggable:"false"},[e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-tree-node-row")),onClick:s[5]||(s[5]=e=>{t.selectRow(t.branch[t.store.primarykeyname])})},[e.createElementVNode("div",null,[t.ischild?(e.openBlock(),e.createElementBlock("a",{key:0,"data-action":"more",class:"button",onClick:s[0]||(s[0]=e.withModifiers((e=>t.toggle(t.branch[t.store.primarykeyname],!1)),["prevent","stop"]))},ve)):(e.openBlock(),e.createElementBlock("a",{key:1,"data-action":"more",class:"button",onClick:s[1]||(s[1]=e.withModifiers((e=>t.toggle(t.branch[t.store.primarykeyname],!0)),["prevent","stop"]))},Ce))]),t.sortable?(e.openBlock(),e.createElementBlock("div",ye,[e.createElementVNode("a",{"data-action":"more",class:"button",onClick:s[2]||(s[2]=(...e)=>t.prevent.stop&&t.prevent.stop(...e)),onMousedown:s[3]||(s[3]=(...e)=>t.setDraggable&&t.setDraggable(...e)),onMouseup:s[4]||(s[4]=(...e)=>t.endDraggable&&t.endDraggable(...e))},be,32)])):e.createCommentVNode("v-if",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,r)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{key:r},[e.createElementVNode("span",null,e.toDisplayString(s.label)+": "+e.toDisplayString(t.branch[s.name]),1)])),[[e.vShow,s.on]]))),128))],2),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.children,((s,r)=>e.withDirectives((e.openBlock(),e.createBlock(i,{branch:s,ischild:!0,key:r,store:t.store},null,8,["branch","store"])),[[e.vShow,t.toggle_state[t.branch[t.store.primarykeyname]]]]))),128))],10,ke)},ge.__scopeId="data-v-1dcaa9f5",ge.__file="presstojam/src/components/ptj-tree-node.vue";class we{constructor(e={}){this._handle=e.handle,this._drop_target=e.drop_target,this._drag_target=e.drag_target,this._call_back=e.callback,this._x=0,this._y=0,this._offset_x=0,this._offset_y=0,this._judder=e.judder?e.judder:5,this._drag_node,this._drop_node,this._tree=e.tree}isJudder(e,t){const s=e-this._x,r=t-this._y;return!(s<-5||s>5)&&!(r<-5||r>5)}getDirection(e,t){return{x:e==this._x?0:e>this._x?1:-1,y:t==this._y?0:t>this._y?1:-1}}offset(e){var t=e.getBoundingClientRect(),s=e.ownerDocument.defaultView;return{top:t.top+s.pageYOffset,left:t.left+s.pageXOffset}}insertAfter(){let e=this._drag_node.getAttribute("id"),t=this._drop_node.getAttribute("id"),s=0,r=0;if(this._drop_node.nextElementSibling){for(let e in this._tree){let o=this._tree[e];if(o.id==t){s=o.circular,r=o.sort;break}}for(let t in this._tree){let o=this._tree[t];o.id==e?(o.circular=s,o.sort=r+1):o.circular==s&&o.sort>r&&++o.sort}}else for(let t in this._tree){let r=this._tree[t];r.id==e&&(r.circular=s,r.sort=0)}}insertBefore(){let e=this._drag_node.getAttribute("id"),t=this._drop_node.getAttribute("id"),s=0,r=0;for(let e in this._tree){let o=this._tree[e];if(o.id==t){s=o.circular,r=o.sort,++o.sort;break}}for(let t in this._tree){let o=this._tree[t];o.id==e?(o.circular=s,o.sort=r):o.circular==s&&o.sort>r&&++o.sort}}dragStart(e){const t=e.target.closest("[id]");this._drag_node=t;const{top:s,left:r}=this.offset(t);e.dataTransfer.dropEffect="move",this._x=e.clientX,this._y=e.clientY,this._offset_x=e.clientX-r,this._offset_y=e.clientY-s}isDroppable(e){return!!e.target.closest(this._drop_target)}dragEnter(e){if(!this.isDroppable(e))return!0;if(e.preventDefault(),e.dataTransfer.dropEffect="move",this._drop_node=e.target.closest(this._drag_target),!this._drop_node||this._drop_node.getAttribute("id")==this._drag_node.getAttribute("id"))return;const t=this.getDirection(e.clientX,e.clientY);1==t.y?this.insertAfter():-1==t.y&&this.insertBefore(),this._x=e.clientX,this._y=e.clientY}dragOver(e){if(!this.isDroppable(e))return!0;e.preventDefault(),e.dataTransfer.dropEffect="move"}dragEnd(){this._drag_node&&this._drag_node.setAttribute("draggable",!1),this._drag_node=null}drop(e){if(!this._drop_node)return!0;e.preventDefault(),this._call_back&&this._call_back(this._tree)}}var Be={initDD:function(e){let t=new we(e);if(document.querySelectorAll(e.handle).forEach((e=>e.addAttribute("draggable",!0))),e.handle){document.querySelectorAll(e.handle).forEach((t=>{t.addEventListener("mousedown",(t=>{t.target.closest(e.drag_target).addAttribute("draggable",!0)}))}))}e.main.addEventListener("dragstart",(e=>t.dragStart(e))),e.main.addEventListener("dragenter",(e=>t.dragEnter(e))),e.main.addEventListener("dragover",(e=>t.dragOver(e))),e.main.addEventListener("drop",(e=>t.drop(e))),e.main.addEventListener("dragend",(e=>t.dragEnd(e)))}},Ee=e.defineComponent({name:"ptj-tree",setup(t){let s={store:z.getStore(),treeroot:e.ref(null),Class:O};return e.onMounted((()=>{Be.initDD({handle:".ptj-drag-handle",drag_target:".ptj-draggable",drop_target:".ptj-drop-target",main:s.treeroot.value,tree:s.store.data,callback:s.store.saveSort})})),s},components:{"ptj-nav":se,"ptj-tree-node":ge,"ptj-filter-form":de,"ptj-selectfields":ue}});Ee.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-tree-node");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-tree")+" "+t.store.classes+" ptj-drop-target"),ref:"treeroot"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.data,((t,s)=>(e.openBlock(),e.createBlock(i,{key:s,branch:t},null,8,["branch"])))),128))],2)},Ee.__file="presstojam/src/components/ptj-tree.vue";var xe=e.defineComponent({name:"ptj-table",setup:()=>({store:z.getStore(),Class:O}),methods:{next(e){this.store.next(e),z.buildLink()},orderBy(e,t){let s={};s[e.name]=t,this.store.orderby=s,this.store.pages>0?this.store.load():t?this.store.data.sort((function(t,s){let r=t[e.name],o=s[e.name];return r<o?-1:r>o?1:0})):this.store.data.sort((function(t,s){let r=t[e.name],o=s[e.name];return r<o?1:r>o?-1:0}))},getRowClass(e){let t=[];for(let s of this.store.groups)t.push(this.store.model+"-"+s.replace("_","-")+"-"+e[s]);return t.join(" ")}},computed:{sortable(){return!!this.store.sort},overlimit:()=>!1,rowclass(){}},components:{"ptj-pagination":he}});const Se=["onClick"],Ne=["onClick"],Ve={key:0},De=["onClick"],ze=[(t=>(e.pushScopeId("data-v-15ab9672"),t=t(),e.popScopeId(),t))((()=>e.createElementVNode("span",{class:"material-icons"},"drag",-1)))];F("\n.table[data-v-15ab9672], .thead[data-v-15ab9672], .tbody[data-v-15ab9672], .tr[data-v-15ab9672] {\r\n    width : 100%;\n}\r\n\r\n\r\n"),xe.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-pagination");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("table",{class:e.normalizeClass(t.Class.getClass("ptj-table")+" "+t.store.classes)},[e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:e.normalizeClass(t.Class.getClass("ptj-table-header"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,r)=>e.withDirectives((e.openBlock(),e.createElementBlock("th",{key:s.name,class:e.normalizeClass(t.Class.getClass("ptj-table-header-cell")+" "+s.name.replace("_","-"))},[e.createTextVNode(e.toDisplayString(s.label)+" ",1),0==t.sortable?(e.openBlock(),e.createElementBlock("span",{key:0,class:"material-icons",onClick:e=>{t.orderBy(s,!1)}},"keyboard_arrow_up",8,Se)):e.createCommentVNode("v-if",!0),0==t.sortable?(e.openBlock(),e.createElementBlock("span",{key:1,class:"material-icons",onClick:e=>{t.orderBy(s,!0)}},"keyboard_arrow_down",8,Ne)):e.createCommentVNode("v-if",!0)],2)),[[e.vShow,t.store.fields[r].on]]))),128)),t.sortable?(e.openBlock(),e.createElementBlock("th",Ve," ")):e.createCommentVNode("v-if",!0)],2)]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.data,((r,o)=>(e.openBlock(),e.createElementBlock("tr",{key:o,class:e.normalizeClass(t.Class.getClass("ptj-table-row")+" "+this.getRowClass(r)),onClick:e=>{t.next(r[t.store.primarykeyname])}},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("td",{key:o,class:e.normalizeClass(t.Class.getClass("ptj-table-cell")+" "+s.name.replace("_","-"))},e.toDisplayString(r[s.name]),3)),[[e.vShow,t.store.fields[o].on]]))),128)),t.sortable?(e.openBlock(),e.createElementBlock("td",{key:0,class:e.normalizeClass(t.Class.getClass("ptj-table-cell-sortable"))},[e.createElementVNode("a",{"data-action":"more",class:"button",onClick:s[0]||(s[0]=e.withModifiers(((...e)=>t.toggle&&t.toggle(...e)),["prevent"])),draggable:"true"},ze)],2)):e.createCommentVNode("v-if",!0)],10,De)))),128))])],2),t.overlimit?(e.openBlock(),e.createBlock(i,{key:0})):e.createCommentVNode("v-if",!0)],64)},xe.__scopeId="data-v-15ab9672",xe.__file="presstojam/src/components/ptj-table.vue";var Le=e.defineComponent({name:"ptj-list",setup:()=>({store:z.getStore(),Class:O}),methods:{next(e){this.store.next(e),z.buildLink()},getCombinations(e,t,s){const r=[];if(0==s.length)for(let e in t)r.push({tags:{tag:t[e].display},data:t[e].contains});else for(let o of s)for(let s in t){let l=o.tags;l[e]=s.display,r.push({tags:l,data:o.data.filter((e=>t[s].contains.includes(e)))})}return r}},computed:{getIndexCombinations(){let e=[];for(let t in this.store.indexes)e=this.getCombinations(t,this.store.indexes[t],e);return e}}});const Oe=["onClick"];Le.render=function(t,s,r,o,l,a){return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-list")+" "+t.store.classes)},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.getIndexCombinations,((s,r)=>(e.openBlock(),e.createElementBlock("div",{key:r},[e.createElementVNode("h3",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.tags,((t,s)=>(e.openBlock(),e.createElementBlock("span",{key:s},e.toDisplayString(t)+" ",1)))),128))]),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.data,(s=>(e.openBlock(),e.createElementBlock("li",{key:s},[e.createElementVNode("a",{onClick:e=>t.next(t.store.data[s][t.store.primarykeyname])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,(r=>e.withDirectives((e.openBlock(),e.createElementBlock("span",{key:r.name},e.toDisplayString(t.store.data[s][r.name])+" ",1)),[[e.vShow,r.on]]))),128))],8,Oe)])))),128))])])))),128))],2)},Le.__file="presstojam/src/components/ptj-list.vue";var Re=e.defineComponent({name:"ptj-repo",setup:()=>({store:z.getStore(),Class:O}),components:{"ptj-repo-header":_e,"ptj-tree":Ee,"ptj-table":xe,"ptj-list":Le}});F("\n.table[data-v-1c7fb47e], .thead[data-v-1c7fb47e], .tbody[data-v-1c7fb47e], .tr[data-v-1c7fb47e] {\r\n    width : 100%;\n}\n.ptj-data-row[data-v-1c7fb47e]:nth-child(odd) {background : #CCC}\r\n\r\n"),Re.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-repo-header");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-repo")+" "+t.store.classes)},[e.createVNode(i),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.store.rawcomponent),{key:t.store.key}))],2)},Re.__scopeId="data-v-1c7fb47e",Re.__file="presstojam/src/components/ptj-repo.vue";var Fe=e.defineComponent({name:"ptj-single-item",props:{active:{type:Boolean,default:!1}},setup:()=>({store:z.getStore(),Class:O}),computed:{editnav(){return this.store.actions.put},delnav(){return this.store.actions.delete},title(){return this.store.title+" "+this.store.summary()}},methods:{runDel(){this.store.runDelete()}},components:{"ptj-nav":se,"ptj-widget":ne}});const Ae=e.createTextVNode(" ");Fe.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-nav");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-single-item")+" "+t.store.classes)},[e.createElementVNode("h1",null,e.toDisplayString(t.store.title),1),e.createVNode(i,{actions:t.store.actions,class:e.normalizeClass(t.Class.getClass("ptj-single-item-actions"))},null,8,["actions","class"]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:e.normalizeClass(t.Class.getClass("ptj-single-item-row")+" "+s.name)},[e.createElementVNode("span",{class:e.normalizeClass(t.Class.getClass("ptj-single-item-label"))},e.toDisplayString(s.label),3),Ae,e.createElementVNode("span",{class:e.normalizeClass(t.Class.getClass("ptj-single-item-value"))},e.toDisplayString(s.val),3)],2)))),128))],2),e.createVNode(i,{actions:t.store.children,class:e.normalizeClass(t.Class.getClass("ptj-single-item-children"))},null,8,["actions","class"])],64)},Fe.__file="presstojam/src/components/ptj-single-item.vue";var Ue=e.defineComponent({name:"ptj-login",setup(){let e=z.getStore();return e.next=()=>{z.reloadFromBase()},{store:e,Class:O}},components:{"ptj-form":ee,"ptj-nav":se}});Ue.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-form"),n=e.resolveComponent("ptj-nav");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-accounthandler"))},[e.createElementVNode("h1",null,e.toDisplayString(t.store.title),1),e.createVNode(i),e.createVNode(n,{action:t.store.actions},null,8,["action"])],2)},Ue.__file="presstojam/src/components/ptj-accounthandler.vue";var Me=e.defineComponent({name:"ptj-card",props:{store:Object,active:{type:Boolean,default:!1}},methods:{next(){this.store.next(),z.buildLink()}},computed:{title(){return this.store.title},classes(){return O.getClass("ptj-card")+" "+this.store.classes},rowclass:()=>O.getClass("ptj-card-row"),labelclass:()=>O.getClass("ptj-card-label"),valueclass:()=>O.getClass("ptj-card-value")},components:{"ptj-widget":ne}});const Ie=[e.createElementVNode("span",{class:"material-icons"},"view_carousel",-1)],Te=e.createTextVNode(" ");Me.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-widget");return e.openBlock(),e.createBlock(i,{title:t.title,active:t.active},{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass(t.classes)},[e.createElementVNode("a",{onClick:s[0]||(s[0]=(...e)=>t.next&&t.next(...e))},Ie),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.store.fields,((s,r)=>(e.openBlock(),e.createElementBlock("div",{key:r,class:e.normalizeClass(t.rowclass+" "+s.name)},[e.createElementVNode("span",{class:e.normalizeClass(t.labelclass)},e.toDisplayString(s.label),3),Te,e.createElementVNode("span",{class:e.normalizeClass(t.rowclass)},e.toDisplayString(s.val),3)],2)))),128))],2)])),_:1},8,["title","active"])},Me.__file="presstojam/src/components/ptj-card.vue";var Pe=e.defineComponent({props:{index:{type:Boolean}},setup:e=>(e.index&&z.next(),{store:z.getStore(),Class:O}),computed:{parents(){return this.store.parent_models.slice().reverse()}},components:{"ptj-form":ee,"ptj-nav":se,"ptj-single-item":Fe,"ptj-account-handler":Ue,"ptj-repo":Re,"ptj-card":Me}});Pe.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-card");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-tabs"))},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.parents,(s=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-tabs-card")),key:s.name+"-parent"},[e.createVNode(i,{store:s.store},null,8,["store"])],2)))),128)),e.createElementVNode("div",{class:e.normalizeClass(t.Class.getClass("ptj-tabs-tab"))},[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.store.component),{key:t.store.index}))],2)],2)},Pe.__file="presstojam/src/components/ptj-tabs.vue";var Ke=e.defineComponent({setup:()=>({Class:O}),methods:{logout(){i.post("/core-logout").then((()=>{z.reloadFromBase()}))}}});Ke.render=function(t,s,r,o,l,a){return e.openBlock(),e.createBlock(e.Teleport,{to:"#ptj-accountdetails"},[e.createElementVNode("a",{class:e.normalizeClass(t.Class.getClass("ptj-account-details-logout")),onClick:s[0]||(s[0]=(...e)=>t.logout&&t.logout(...e))},"Logout",2)])},Ke.__file="presstojam/src/components/ptj-account-details.vue";var qe=e.defineComponent({name:"ptj-root",setup:()=>({Class:O}),computed:{groups:()=>z.store.models,isaccount:()=>"public"!=z.store.profile},components:{"ptj-tabs":Pe,"ptj-account-details":Ke}});qe.render=function(t,s,r,o,l,a){const i=e.resolveComponent("ptj-account-details"),n=e.resolveComponent("ptj-tabs");return e.openBlock(),e.createElementBlock(e.Fragment,null,[t.isaccount?(e.openBlock(),e.createBlock(i,{key:0})):e.createCommentVNode("v-if",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.groups,(s=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(t.Class.getClass("ptj-root")),key:s.index},[e.createVNode(n,{index:!0})],2)))),128))],64)},qe.__file="presstojam/src/components/ptj-root.vue";var He={Ctrl:z,runApp:function(t){const s=e.createApp(qe);return s.mount(t),s}};exports.default=He;
//# sourceMappingURL=ptj.cjs.js.map
