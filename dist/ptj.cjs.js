"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue"),t={props:{location:{default:"body"},relative:{default:!1},cls:String},setup(t){const l=t;let o=e.ref(!1);function r(){o.value=!o.value}let n=e.computed((()=>{if(l.relative){let e=function(e){let t={left:0,top:0,width:e.offsetWidth,height:e.offsetHeight,wrapper:0};for(;!e.classList.contains("ptj-table-wrapper");)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.parentNode;return t.wrapper=e.offsetWidth,t}(l.relative);return e.wrapper,e.left,e.width,"position:absolute;top:"+(e.top+e.height)+"px;right:0px;"}return""})),a=e.computed((()=>!l.location)),s=e.computed((()=>"body"==l.location?"ptj-modal-backdrop-full":""));return(l,i)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("a",{onClick:r,class:"ptj-modal-button"},[e.renderSlot(l.$slots,"button")]),(e.openBlock(),e.createBlock(e.Teleport,{disabled:e.unref(a),to:t.location},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["ptj-modal-backdrop",e.unref(s)]),style:e.normalizeStyle(e.unref(n))},[e.createElementVNode("div",{class:e.normalizeClass(["ptj-modal",t.cls])},[e.createElementVNode("header",null,[e.createElementVNode("button",{type:"button",class:"btn-close",onClick:r}," x ")]),e.renderSlot(l.$slots,"default",{toggleShow:r})],2)],6),[[e.vShow,e.unref(o)]])],8,["disabled","to"]))],64))}};function l(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===l&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}l("\n.ptj-modal-backdrop-full {\r\n    position : absolute;\r\n    top : 0;\r\n    left : 0;\r\n    height : 100vh;\r\n    width : 100vw;\n}\r\n"),t.__file="presstojam/src/components/ptj-modal.vue";let o,r={};var n={initSettings(e){if(o=e.url,e.custom_headers)for(let t in e.custom_headers)r[t]=e.custom_headers[t]},run(e,t,l,n){const a=new Headers;l&&(a.set("Content-Type","application/json"),n=l);for(let e in r)a.set(e,r[e]);return fetch(o+t,{method:e,mode:"cors",cache:"no-cache",credentials:"include",headers:a,body:n}).then((e=>{if(e.ok)return e.json();throw e}))},get(e,t){if(t){const l=new URLSearchParams;for(let e in t)Array.isArray(t[e])||"object"==typeof t[e]&&null!==t[e]?l.append(e,JSON.stringify(t[e])):l.append(e,t[e]);-1==e.indexOf("?")?e+="?":e+="&",e+=l.toString()}return this.run("GET",e)},getprimary(e,t){return this.get(e,t)},post(e,t){return this.run("POST",e,JSON.stringify(t))},put(e,t){return this.run("PUT",e,JSON.stringify(t))},patch(e,t){return this.run("PATCH",e,null,t)},getAsset(e){const t=new Headers;for(let e in r)t.set(e,r[e]);return fetch(o+e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:t}).then((e=>{if(e.ok)return e.blob();throw e}))},delete(e,t){return this.run("DELETE",e,JSON.stringify(t))}};const a=new class{constructor(){this._route="",this._model="",this._state="",this._key=0,this._to="",this._params={},this._base="/",this._default=!1;Object.keys(this).forEach((e=>{"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){t!=this[e]&&(this[e]=t)}})})),this.action_map={post:"-create",put:"-update",delete:"-delete",login:"-login",logout:"-logout",primary:"-primary",parent:"-parent",get:""}}get id(){return this.model+"-"+this.state+"-"+this.to}reset(){this.route="",this.model="",this.state="",this.key=0,this.to="",this.params={}}convertToURL(){let e=this._base+this.route+"/"+this.model+this.action_map[this.state];this.key&&(e+="-"+this.key),this.to&&(e+="-to-"+this.to);let t=new URLSearchParams;for(const e in this.params)if(this.params[e])if("object"==typeof this.params[e]){let l=[];for(let t in this.params[e])l.push(this.params[e][t]);t.append(e,l.join(","))}else t.append(e,this.params[e]);let l=t.toString();return l&&(e+="?"+l),e}initSettings(e){e&&(this._base=e.base),this.convertFromURL()}convertFromURL(){let e=new URL(window.location.href),t=e.pathname.replace(this.base,"");if(t=t.replace(/^\/+|\/+$/g,""),!t)return;let l=t.split("/");l.length>=2&&(this.route=l[0],t=l[1]);const o=this;e.searchParams.forEach((function(e,t){o.params[t]=e.indexOf(",")>-1?e.split(","):e})),l=t.split("-to-"),l.length>1&&(this.to=l[1],t=l[0]),l=t.split("-");let r=l[l.length-1];if("first"==r?(this.key=r,l.pop()):isNaN(r)||(this.key=parseInt(r),l.pop()),0==l.length)throw new Error("Can't convert this url string: "+t);this.state="get";for(let e in this.action_map)if(this.action_map[e]=="-"+l[l.length-1]){this.state=e,l.pop();break}this.model=l.join("-"),this.route||(this.route=this.model)}getAll(){return{route:this.route,model:this.model,state:this.state,key:this.key,to:this.to,params:this.params,base:this.base,default:this.default}}apply(e){for(let t in e)this[t]=e[t]}};let s={};window.onpopstate=function(){a.reset(),a.convertFromURL(),f()};const i=e.reactive({component:"",title:"",name:"",route:{children:[],parent:null,perms:[]},slug:[],sort:!1});function c(){return s[a.model]&&s[a.model][a.state]?s[a.model][a.state]:{}}function d(){return i.component="",i.route.children=[],i.route.parent=null,i.route.perms=[],i.route.title="",i.route.name="",i.sort=!1,n.get("/nav/route-points/"+a.route+"/"+a.model).then((e=>{i.route.children=e.children,i.route.perms=e.perms,i.route.parent=e.parent,i.title=e.title,i.name=e.name,e.sort&&(i.sort=!0),"get"==a.state||"parent"==a.state?i.component="ptj-repo":"primary"==a.state?i.component="ptj-primary":"login"==a.state&&(i.component="ptj-account-handler")})).then((e=>{})).catch((e=>console.log(e)))}function p(){i.slug=[];let e={};if(a.key)return"parent"==a.state?e["--parentid"]=a.key:"primary"==a.state&&(e["--id"]=a.key),n.get("/slug/"+a.route+"/"+a.model,e).then((e=>{i.slug=e;for(let e in i.slug)e=parseInt(e),i.slug[e].route=e>0?{model:i.slug[e].model,state:"parent",key:i.slug[e].id}:{model:i.slug[e].model,state:"get",key:0}}))}function u(){location.href=a.base}function m(){h(),f()}function h(){const e=window.location.protocol+"//"+window.location.host+a.convertToURL(),t=new URL(e);window.history.pushState({name:t.pathname},document.title,t)}function f(){d(),p()}var g={props:{route:Object},setup(t){const l=t;function o(){for(let e in l.route)a[e]=l.route[e];a.params={},m()}return(l,r)=>(e.openBlock(),e.createElementBlock("a",{class:"ptj-button",key:t.route,onClick:o},[e.renderSlot(l.$slots,"default")]))},__file:"presstojam/src/components/ptj-button.vue"};const k={class:"ptj-multiple-select"},v={class:"ptj-multiple-select-display"},y={class:"ptj-multiple-select-values"},_=["onClick"],B=[(t=>(e.pushScopeId("data-v-51b18f4e"),t=t(),e.popScopeId(),t))((()=>e.createElementVNode("span",{class:"material-icons"},"close",-1)))];var b={props:{field:Object},setup(t){const l=t,o=e.ref("");function r(){l.field.change1=o.value,o.value=""}return(n,a)=>(e.openBlock(),e.createElementBlock("div",k,[e.createElementVNode("div",v,[e.createElementVNode("div",y,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.change1,(t=>(e.openBlock(),e.createElementBlock("div",{class:"ptj-multiple-select-val",key:t},[e.createTextVNode(e.toDisplayString(t)+" ",1),e.createElementVNode("a",{class:"ptj-multiple-select-val-remove",onClick:e=>{return o=t,void(l.field.change=l.field.change.filter((function(e){return e!==o})));var o}},B,8,_)])))),128))]),e.withDirectives(e.createElementVNode("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=e=>o.value=e)},null,512),[[e.vModelText,o.value]]),e.createElementVNode("a",{onClick:r,class:"ptj-multiple-select-add"},"add")])]))}};l("\n.ptj-multiple-select-val[data-v-51b18f4e] {\r\n    display : inline-block;\r\n    border : 1px solid green;\r\n    margin-left : 2px;\r\n    margin-right : 2px;\r\n    padding : 2px;\r\n    background-color : green;\n}\n.ptj-multiple-select-val-remove[data-v-51b18f4e] {\r\n    color : red;\n}\n.ptj-multiple-select-display[data-v-51b18f4e] {\r\n    position :relative;\r\n    background-color : #fff;\r\n    border : 1px solid #cdcdcd;\r\n    min-height : 35px;\n}\r\n\r\n"),b.__scopeId="data-v-51b18f4e",b.__file="presstojam/src/components/ptj-multiple-input.vue";const w={class:"ptj-multiple-select"},j={class:"ptj-multiple-select-display"},E={class:"ptj-multiple-select-values"},V=["onClick"],N=[(t=>(e.pushScopeId("data-v-5b05457d"),t=t(),e.popScopeId(),t))((()=>e.createElementVNode("span",{class:"material-icons"},"close",-1)))],x={class:"material-icons"},C=["data-key"];var S={props:{field:Object},setup(t){const l=t;e.onMounted((()=>{if(l.field.reference){let e="/reference/"+a.model+"/"+l.field.name;l.field.setReferenceOptions(e,{"--parentid":a.key})}}));const o=e.reactive({display:!1,symbol:"keyboard_arrow_down"});function r(){o.display?(o.display=!1,o.symbol="keyboard_arrow_down"):(o.display=!0,o.symbol="keyboard_arrow_up")}function n(e){l.field.change1=e.target.getAttribute("data-key"),r()}return(a,s)=>(e.openBlock(),e.createElementBlock("div",w,[e.createElementVNode("div",j,[e.createElementVNode("div",E,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.change,(o=>(e.openBlock(),e.createElementBlock("div",{class:"ptj-multiple-select-val",key:o},[e.createTextVNode(e.toDisplayString(t.field.getOption(o))+" ",1),e.createElementVNode("a",{class:"ptj-multiple-select-val-remove",onClick:e=>{return t=o,void(l.field.change=l.field.change.filter((function(e){return e!==t})));var t}},N,8,V)])))),128))]),e.createElementVNode("a",{class:"ptj-multiple-select-arrow",onClick:r},[e.createElementVNode("span",x,e.toDisplayString(e.unref(o).symbol),1)])]),e.withDirectives(e.createElementVNode("ul",{class:"ptj-multiple-select-options",onClick:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.options,(t=>(e.openBlock(),e.createElementBlock("li",{key:t.key,"data-key":t.key},e.toDisplayString(t.value),9,C)))),128))],512),[[e.vShow,e.unref(o).display]])]))}};l("\n.ptj-multiple-select-val[data-v-5b05457d] {\r\n    display : inline-block;\r\n    border : 1px solid green;\r\n    margin-left : 2px;\r\n    margin-right : 2px;\r\n    padding : 2px;\r\n    background-color : green;\n}\n.ptj-multiple-select-val-remove[data-v-5b05457d] {\r\n    color : red;\n}\n.ptj-multiple-select-arrow[data-v-5b05457d] {\r\n    position :absolute;\r\n    right : 2px;\r\n    top : 3px;\n}\n.ptj-multiple-select-display[data-v-5b05457d] {\r\n    position :relative;\r\n    background-color : #fff;\r\n    border : 1px solid #cdcdcd;\r\n    min-height : 35px;\n}\n.ptj-multiple-select-options li[data-v-5b05457d] {\r\n    list-style: none;\r\n    cursor: pointer;\r\n    margin-top : 2px;\r\n    border : 1px solid #cdcdcd;\r\n    background-color : #fff;\n}\n.ptj-multiple-select-options li[data-v-5b05457d]:hover {\r\n    background-color : #f9f9fb;\r\n    transition : background-color .2s ease-out,border .2s ease-out;\n}\r\n"),S.__scopeId="data-v-5b05457d",S.__file="presstojam/src/components/ptj-multiple-select.vue";let D={};function O(e,t){let l="";if(!t)return D[e]&&(l=D[e]),l;if(t.model)if(t.field){if(t.field.indexOf("/")>-1){let e=t.field.split("/");t.field=e.pop()}D.models[t.model]&&D.models[t.model].fields[t.field]&&(l=D.models[t.model].fields[t.field][e])}else D.models[t.model]&&(l=D.models[t.model][e]);else l=t.type?D[e][t.type]?D[e][t.type]:D[e].def:D[e];return t.val&&(l=l.replace(/\{\{(.*?)\}\}/g,t.val)),!l&&t.default&&(l=t.default),l}const T=0,M=1,P=2,L=3,F=4,U={key:0,class:"ptj-error"};var R={props:{error:Number,type:String},setup:t=>(l,o)=>t.error?(e.openBlock(),e.createElementBlock("p",U,e.toDisplayString(e.unref(O)("ptj-error-"+t.error,{type:t.type})),1)):e.createCommentVNode("v-if",!0)};l("\n.ptj-error {\r\n  color : red;\n}\r\n"),R.__file="presstojam/src/components/ptj-error.vue";const A={class:"ptj-form-label"};var I={props:{field:[Object,Function]},setup:t=>(l,o)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["ptj-form-row",t.field.name])},[e.createElementVNode("label",A,e.toDisplayString(e.unref(O)("label",{model:t.field.model,field:t.field.name,default:t.field.name})),1),e.renderSlot(l.$slots,"default"),e.withDirectives(e.createVNode(R,{error:t.field.error,type:t.field.type},null,8,["error","type"]),[[e.vShow,t.field.showError]])],2)),__file:"presstojam/src/components/ptj-form-row.vue"};const z=["name"];var $={props:{field:{type:Object,required:!0}},setup(t){const l=e.reactive({validateon:!1,val:""}),o=e.computed({get:()=>l.val,set(e){field.val,l.val=e}});return(r,n)=>e.withDirectives((e.openBlock(),e.createElementBlock("input",{type:"text",name:t.field.name,"onUpdate:modelValue":n[0]||(n[0]=t=>e.isRef(o)?o.value=t:null),onBlur:n[1]||(n[1]=t=>e.unref(l).validateon=!0)},null,40,z)),[[e.vModelText,e.unref(o)]])},__file:"presstojam/src/components/ptj-form-confirm.vue"};const J=["onSubmit"],q=["name"],H=["value"];var G={props:{field:Object},emits:["close"],setup(t,{emit:l}){const o=e.ref(0);function r(){o.value=1;let e={};return e["--id"]=a.key,e[field.name]=field.change,client.put("/data/"+a.route+"/"+a.model,e).then((()=>{l("close")})).catch((e=>{o.value=0,"string"==typeof e?globalerror=e:cdata.setErrors(e)}))}return(l,n)=>e.withDirectives((e.openBlock(),e.createElementBlock("form",{onSubmit:e.withModifiers(r,["prevent"]),class:e.normalizeClass(["ptj-form",a.model+" "+a.state])},[e.createVNode(I,{field:t.field},{default:e.withCtx((()=>[e.withDirectives(e.createElementVNode("input",{type:"password",name:t.field.name,"onUpdate:modelValue":n[0]||(n[0]=e=>t.field.change=e),onBlur:n[1]||(n[1]=e=>t.field.validateon=!0)},null,40,q),[[e.vModelText,t.field.change]])])),_:1},8,["field"]),e.createVNode(I,{field:t.field},{default:e.withCtx((()=>[e.createVNode($,{field:t.field},null,8,["field"])])),_:1},8,["field"]),e.createElementVNode("input",{type:"submit",value:e.unref(O)("ptj-reset-form-btn"),class:"ptj-form-submit"},null,8,H)],42,J)),[[e.vShow,0==o.value]])},__file:"presstojam/src/components/ptj-update-encrypted.vue"};const W=["name"],Z={key:2},K=["name"],Q={value:"",selected:"",disabled:""},X=["value"],Y=["name"],ee={key:7},te={key:8};var le={props:{field:{type:Object,required:!0},type:{type:String,default:"view"}},setup(l){const o=l;let r=e.computed((()=>"edit"==o.type&&o.field.immutable?"view":o.type));const n=e.computed((()=>function(e){if(0==e.length)return null;let t=[];const l=new RegExp(/^[a-zA-Z]+[a-zA-Z0-9._]+$/);for(let o of e)if(o){if(!l.test(o))return null;t.push(o)}return t}(o.field.contains)?(o.field.setContainsAsOptions(),"select"):o.field.encrypted?"input":o.field.html||o.field.max>300?"textarea":"input")),a=e.computed((()=>{let e={};return o.field.encrypted&&(e.type="password"),o.field.atts.readonly&&(e.readonly=!0),o.field.atts.placeholder&&(e.placeholder=field.placeholder),o.field.atts.html&&(e["data-html"]=1),e}));return(o,s)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[l.field.encrypted&&"edit"==l.type?(e.openBlock(),e.createBlock(t,{key:0},{button:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(O)("ptj-repo-post")),1)])),default:e.withCtx((t=>[e.createVNode(G,{onClose:t.toggleShow,field:l.field},null,8,["onClose","field"])])),_:1})):e.createCommentVNode("v-if",!0),"textarea"!=e.unref(n)||"edit"!=e.unref(r)&&"post"!=e.unref(r)?"textarea"==e.unref(n)&&"view"==e.unref(r)?(e.openBlock(),e.createElementBlock("div",Z,e.toDisplayString(l.field.val),1)):"select"==e.unref(n)&&"filter"==e.unref(r)?(e.openBlock(),e.createBlock(S,{key:3,field:l.field},null,8,["field"])):"select"!=e.unref(n)||"edit"!=e.unref(r)&&"post"!=e.unref(r)?"edit"==e.unref(r)||"post"==e.unref(r)?e.withDirectives((e.openBlock(),e.createElementBlock("input",e.mergeProps({key:5},e.unref(a),{name:l.field.name,"onUpdate:modelValue":s[3]||(s[3]=e=>l.field.change=e),onBlur:s[4]||(s[4]=e=>l.field.validateon=!0)}),null,16,Y)),[[e.vModelDynamic,l.field.change]]):"filter"==e.unref(r)?(e.openBlock(),e.createBlock(b,{key:6,field:l.field},null,8,["field"])):"view"==e.unref(r)&&l.field.reference?(e.openBlock(),e.createElementBlock("span",ee,[e.createVNode(g,{route:{model:l.field.reference,key:l.field.val,state:"primary"}},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(l.field.val),1)])),_:1},8,["route"])])):(e.openBlock(),e.createElementBlock("span",te,e.toDisplayString(l.field.val),1)):e.withDirectives((e.openBlock(),e.createElementBlock("select",e.mergeProps({key:4,"onUpdate:modelValue":s[1]||(s[1]=e=>l.field.change=e),name:l.field.name},e.unref(a),{onBlur:s[2]||(s[2]=e=>l.field.validateon=!0)}),[e.createElementVNode("option",Q,e.toDisplayString(e.unref(O)("ptj-string-default")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.field.options,(t=>(e.openBlock(),e.createElementBlock("option",{key:t.key,value:t.key},e.toDisplayString(t.value),9,X)))),128))],16,K)),[[e.vModelSelect,l.field.change]]):e.withDirectives((e.openBlock(),e.createElementBlock("textarea",e.mergeProps({key:1},e.unref(a),{name:l.field.name,"onUpdate:modelValue":s[0]||(s[0]=e=>l.field.change=e)}),null,16,W)),[[e.vModelText,l.field.change]])],64))},__file:"presstojam/src/components/ptj-string.vue"};const oe=e.reactive({init:!1,login:!1,user:"public"}),re=e.reactive({cats:{},routes:[]});function ne(){n.post("/core/logout").then((()=>{u()}))}function ae(){n.get("/core/check-user").then((e=>{if(e.is_expired)return n.put("/core/switch-tokens").then((()=>{ae()}))})).then((e=>{"public"!=oe.user&&setTimeout(ae,6e5)})).catch((e=>{oe.login=!0}))}function se(e=""){return n.get("/core/check-user").then((e=>e.is_expired?n.put("/core/switch-tokens").then((()=>n.get("/core/check-user"))):e)).then((t=>{if(oe.user=t.user,oe.role=t.role,oe.init=!0,oe.role!=e){let t="/core/change-role";return e&&(t+="/"+e),n.post(t).then((t=>{oe.role=e}))}})).then((()=>{ae()})).then((()=>n.get("/dictionary").then((e=>(D=e,!0))))).catch((e=>console.log(e)))}function ie(){return re.cats={},re.routes=[],n.get("/nav/site-map").then((e=>{for(let t in e)for(let l in e[t]){const o={model:l,state:e[t][l].state};e[t][l].default&&(o.default=!0),o.route=l,re.routes.push(o),re.cats[t]||(re.cats[t]=[]),re.cats[t].push(o)}})).then((()=>(a.model||a.apply(function(){for(let e in re.cats)for(let t of re.cats[e])if(t.default)return t}()),!0))).catch((e=>{console.log(e)}))}const ce={class:"ptj-slug-trail"};var de={setup:t=>(t,l)=>(e.openBlock(),e.createElementBlock("div",ce,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).slug,(t=>(e.openBlock(),e.createBlock(g,{key:t.id,route:t.route},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.model),1)])),_:2},1032,["route"])))),128))])),__file:"presstojam/src/components/ptj-slug-trail.vue"};class pe{constructor(t,l=null){this._name=t,this._type="",this._atts={},this._confirm=!1,this._reference="",this._label="",this._store=e.reactive({summary:0,options:[]}),this._default_val=null,this._immutable=!1,this._encrypted=!1,this._min=null,this._max=null,this._contains=[],this._notcontains=[],this._recursive=!1,this._listeners=[];if(Object.keys(this).forEach((e=>{"_store"!=e&&"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){"_type"==e?this._type=t.toLowerCase():this[e]=t}})})),this.summary=e.computed({get:()=>this._store.summary,set:e=>{this._store.summary=e?1:0}}),this.options=e.computed({get:()=>this._store.options,set:e=>{this._store.options=e}}),l){for(let e in l)if("summary"==e)this.summary=l[e]?1:0;else{if("validation"==e)continue;"type"==e?this.type=l[e].toLowerCase():this[e]=l[e]}this._min=l.validation.min,this._max=l.validation.max,l.validation.contains&&(this._contains=l.validation.contains.split("|")),l.validation.notcontains&&(this._notcontains=l.validation.notcontains.split("|"))}}getOption(e){for(let t of this._store.options)if(t.key==e)return t.value}setReferenceOptions(e,t){return this._store.options=[],n.get(e,t).then((e=>{for(let t in e){let l=e[t]["--id"],o=[];for(let l in e[t])"--id"!=l&&o.push(e[t][l]);this._store.options.push({key:l,value:o.join(" ",o)})}})).catch((e=>{console.log(e)}))}setContainsAsOptions(){let e=[];for(let t of this._contains)if(t.indexOf(":")>-1){const l=t.split(":");e.push({key:l[0],value:l[1]})}else e.push({key:t,value:t});this._store.options=e}clean(e){return"checkbox"==this._type?e?1:0:e}calcValue(e){return e||""}validateSize(e){return e<this._min?M:e>this._max?P:T}validate(e){if(null===e)return;let t;if(isNaN(e)){const l=e?e.length:0;t=this.validateSize(l)}else t=this.validateSize(e);if(t!=T)return t;for(let t of this._notcontains)if(e.match(t))return F;if(0==this._contains.length)return T;for(let t of this._contains)if(e.match(t))return T;return L}trigger(e){for(let t of this._listeners)t(e)}}class ue{constructor(){this._cells={},this._children=[],this._active=0,this._init=!1,this._store=e.reactive({index:null}),this._state_groups={};Object.keys(this).forEach((e=>{"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){this[e]=t}})}))}addChild(e,t){this._children[e]=t}addState(e,t){this._actions[e]=t}resetSummary(e){for(let e in this._cells)this._cells[e].summary=!1;for(let t in e)this._cells[e[t]]&&(this._cells[e[t]].summary=!0)}setStates(e){for(let t in e){let l={};if(e[t].states)for(const o of e[t].states)l[o.depends_on]||(l[o.depends_on]=[]),l[o.depends_on].push(o);this._state_groups[t]=l}}mapField(e,t){this._cells[e]=new pe(e,t),this._cells[e].recursive&&(this._store.index=e)}map(e,t=[]){if(t.length>0)for(let l of t)this.mapField(l,e[l]);else for(let t in e)this.mapField(t,e[t]);this.setStates(e)}getCellByType(e){let t={};for(let l in this._cells)this._cells[l].type==e&&(t[l]=this._cells[l]);return t}showAll(){for(let e in this._cells)this._cells[e].summary=!0}}class me{constructor(t){this._store=e.reactive({meta:t,value:null,change:null,display:null,error:0,is_validate_on:!1});const l=Object.getOwnPropertyNames(t),o=Object.keys(this),r=this;l.forEach((t=>{"_"==t[0]||o.includes(t)||(this[t]=e.computed({get:function(){return r.store.meta[t]},set:function(e){r.store.meta[t]=e}}))})),this.error=e.computed({get:()=>{this._store.error},set:e=>{this._store.error=parseInt(e),this._store.is_validate_on=!0}}),this.showError=e.computed((()=>(!(!this._store.is_validate_on||!this._store.error)&&console.log("Error details",this._store),!(!this._store.is_validate_on||!this._store.error)))),this._store.meta.default_val?this._store.value=this._store.meta.default_val:"select"==this._store.meta.type&&(this._store.value=0),this.val=e.computed({get:()=>this._store.value,set:e=>{this._store.value=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.change=e.computed({get:()=>null==this._store.change?this._store.value:this._store.change,set:e=>{this._store.change=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e),this._store.meta.trigger(e)}}),this.addParam=e=>{this._store.value&&(this.name,console.log("Param is ",this.name.value),e[this.name.value]=this._store.value)},"time"==t.type?(this.change1=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),this._store.change?this._store.change.min:""),set:e=>{this._store.change||(this._store.change={min:null,max:null}),this._store.change.min=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.change2=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),this._store.change?this._store.change.max:""),set:e=>{this._store.change||(this._store.change={min:null,max:null}),this._store.change.max=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.filter=e.computed({get:()=>this._store.value,set:e=>{e&&(this._store.value=e)}}),this.addAPIParam=e=>{let t={};this._store.value&&(this._store.value.min&&(t.min=this._store.value.min),this._store.value.max&&(t.max=this._store.value.max),Object.keys(t).length>0&&(e[this.name.value]=t))}):"flag"==t.type?(this.change1=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),null==this._store.change?0:this._store.change?this._store.change:2),set:e=>{0!=e?(2==e&&(e=0),this._store.change=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)):this._store.change=null}}),this.filter=e.computed({get:()=>this._store.value,set:e=>{this._store.value=e}}),this.addAPIParam=e=>{this._store.value&&(e[this.name.value]=this._store.value)}):"id"==t.type?(this.change1=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),null==this._store.change?[]:this._store.change),set:e=>{null==this._store.change&&(this._store.change=[]),this._store.change.includes(e)||(this._store.change.push(this._store.meta.clean(e)),this._store.error=this._store.meta.validate(e))}}),this.filter=e.computed({get:()=>this._store.value,set:e=>{this._store.value=e}}),this.addAPIParam=e=>{null!=this._store.value&&(e[this.name.value]=this._store.value)}):"number"==t.type?(this.change1=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),this._store.change?this._store.change.min:""),set:e=>{this._store.change||(this._store.change={min:null,max:null}),this._store.change.min=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.filter=e.computed({get:()=>this._store.value,set:e=>{this._store.value=e}}),this.change2=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),this._store.change?this._store.change.max:""),set:e=>{this._store.change||(this._store.change={min:null,max:null}),this._store.change.max=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.addAPIParam=e=>{null!=this._store.value&&(e[this.name.value]=this._store.value)}):"string"==t.type&&(this.change=e.computed({get:()=>null==this._store.change?"":this._store.change,set:e=>{this._store.change=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e),this._store.meta.trigger(e)}}),this.change1=e.computed({get:()=>(null==this._store.change&&(this._store.change=this._store.value),null==this._store.change?[]:this._store.change),set:e=>{null==this._store.change&&(this._store.change=[]),this._store.change.push(this._store.meta.clean(e)),this._store.error=this._store.meta.validate(e)}}),this.filter=e.computed({get:()=>this._store.value,set:e=>{Array.isArray(e)?this._store.value=e:e&&(this._store.value=[e])}}),this.addAPIParam=e=>{if(this._store.value){let t=[];for(let e in this._store.value)this._store.value[e]&&t.push("%"+this._store.value[e]+"%");t.length>0&&(e[this.name.value]=t)}})}get meta(){return this._store.meta}set validateon(e){this._store.is_validate_on=e}set display(e){this._store.display=e}get display(){return this._store.display?this._store.display:this._store.value}get store(){return this._store}resetMeta(e){if(this._store.meta=e,e.reference){let e="/reference/"+a.model+"/"+this.name,t={};"primary"==a.state?t["--id"]=a.key:t["--parentid"]=a.key,this._store.meta.setReferenceOptions(e,t)}}toString(){return this._store.display}isSummary(){return this._store.meta.summary}setReferenceOptions(e,t){this._store.meta.setReferenceOptions(e,t)}setContainsAsOptions(){this._store.meta.setContainsAsOptions()}reset(){this._store.change=null,this._store.value=null}getOption(e){return"string"==this._store.meta.type?e:this._store.meta.getOption(e)}}function he(e,t,l){let o=[];for(let l in t){let r=new pe(e,t[l]);o.push({depends_val:t[l].depends_val,field:r})}return e=>{for(const t of o)if(t.depends_val==e)return l(t.field);for(const e of o)if(!e.depends_val)return l(e.field)}}class fe{constructor(t){this._metarow=t,this._cells=e.reactive({}),this._children={},this._ids=e.reactive({}),t&&this.applyMetaRow(t),this.cells=e.computed((()=>this._cells))}set children(e){this._children=e}get children(){return this._children}get primary(){return this._ids["--id"]}get parent(){return this._ids["--parentid"]}clone(){const e=new fe(this._metarow);let t={};for(let e in this._cells)t[e].val=this._cells[e].val;let l={};for(let t in e.children)l[t]=e.children[t].clone();return e.children=l,e}applyMetaRow(e){for(const t in e.cells){const l=e.cells[t];this._cells[l.name]=new me(l)}for(const t in e.children)this._children[t]=e.children[t];let t=e.state_groups;for(let e in t)for(let l in t[e]){const o=this;let r=he(e,t[e][l],(t=>{o._cells[e].resetMeta(t)}));this._cells[l].listeners.push(r)}}addChild(e,t){this._children[e]||(this._children[e]=[]),this._children[e].push(t)}set row(e){if(e){e["--id"]&&(this._ids["--id"]=e["--id"]),e["--parentid"]&&(this._ids["--parentid"]=e["--parentid"]);for(let t in this._cells)e.hasOwnProperty(t)&&(this._cells[t].val=e[t]);for(let t in this._children)this._children[t].row=e[t]}}set filter(e){if(e)for(let t in this._cells)e.hasOwnProperty(t)&&(this._cells[t].filter=e[t])}getSummary(){let e=[];for(let t in this._cells){const l=this._cells[t];if(l.isSummary()){const t=l.display;e.push(t)}}return e.join(" ")}toString(){let e=[];for(let t in this._cells)e.push(this._cells[t].display);return e.join(" ")}serialize(e=!1){let t={};for(let l in this._cells)e?this._cells[l].change!=this._cells[l].val&&(t[l]=this._cells[l].change):null!=this._cells[l].change&&(t[l]=this._cells[l].change);return t}getCellByType(e){let t={};for(let l in this._cells)this._cells[l].type==e&&(t[l]=this._cells[l]);return t}clearErrors(){for(let e in this._cells)this._cells[e].error=0}reset(){for(let e in this._cells)this._cells[e].error=0,this._cells[e].change=null}setErrors(e){for(let t in e)0!==t.indexOf("__")&&this._cells[t]&&(this._cells[t].error=e[t])}convertToParams(){let e={};for(let t in this._cells)this._cells[t].addParam(e);return e}convertToAPIParams(){let e={};for(let t in this._cells)"asset"!=this._cells[t].type&&this._cells[t].addAPIParam(e);return e}applyChangeData(){for(let e in this._cells)this._cells[e].val=this._cells[e].change}}const ge=e.reactive({meta:new ue,data:[],indexes:{},search:new fe});function ke(){ge.indexes={};for(const e in ge.data){let t=ge.data[e].cells[ge.meta.store.index].val;ge.indexes[t]||(ge.indexes[t]=[]),ge.indexes[t].push(e)}}function ve(e){ge.data=[];for(const t in e){let l=new fe(ge.meta);l.row=e[t],ge.data.push(l)}}function ye(){ge.meta=new ue,ge.data=[],ge.indexes={},ge.search=new fe,ge.max_pages=0}const _e=async()=>{let e=c();ye();let t=function(e){let t={};return t||(t={}),a.to&&(t.__to=a.to),e.to&&(t.__to=e.to),a.key&&(t["--parentid"]=a.key),e.limit&&(t.__limit=e.limit),e.fields&&(t.__fields=e.fields),e.group&&(t.group=e.group),a.params._page&&(t.__limit=(a.params._page-1)*t.__limit+","+t.__limit),t}(e),l="/"+a.route+"/"+a.model;return"parent"==a.state&&(l+="/parent"),n.get("/route"+l,t).then((t=>{ge.meta.map(t.fields,e.fields),"all"==e.show&&ge.meta.showAll(),ge.search.applyMetaRow(ge.meta),ge.search.filter=a.params,ge.meta.init=!0,e.component?ge.component=e.component:ge.meta.cells?ge.component=ge.meta.store.index||ge.meta.children.length>0?"tree":"table":ge.component=""})).then((()=>(t={...t,...ge.search.convertToAPIParams()},e.limit>0?n.get("/count/"+a.route+"/"+a.model,t).then((t=>{ge.max_pages=Math.ceil(t.count/e.limit)})).then((()=>n.get("/data"+l,t))).then((e=>(ve(e),ge.meta.store.index&&ke(),e))):n.get("/data"+l,t).then((e=>(ve(e),ge.meta.store.index&&ke(),e)))))).catch((e=>console.log(e)))},Be=t=>(e.pushScopeId("data-v-1dcaa9f5"),t=t(),e.popScopeId(),t),be=["id"],we={class:"ptj-tree-node-row"},je=[Be((()=>e.createElementVNode("span",{class:"material-icons"},"subdirectory_arrow_right",-1)))],Ee=[Be((()=>e.createElementVNode("span",{class:"material-icons"},"keyboard_arrow_right",-1)))],Ve={key:0},Ne=[Be((()=>e.createElementVNode("span",{class:"material-icons"},"drag_handle",-1)))],xe=Be((()=>e.createElementVNode("span",{class:"material-icons"},"arrow_forward_ios",-1)));var Ce={props:{row:{type:[String,Number],required:!0},draggable:Boolean,ischild:{type:Boolean,default:!1}},setup(t){const l=t,o=e.reactive({toggle_state:{},branch:null});function r(){const e=o.branch.primary;o.toggle_state[e]=!o.toggle_state[e]}const n=e.computed((()=>{if(!o.branch)return[];const e=o.branch.primary;return ge.indexes[e]?ge.indexes[e]:[]})),a=e.computed((()=>o.branch?o.branch.primary:0)),s=e.computed((()=>o.branch?o.branch.getSummary():""));return e.onMounted((()=>{o.branch=ge.data[l.row]})),(l,i)=>{const c=e.resolveComponent("ptj-tree-node",!0);return e.openBlock(),e.createElementBlock("div",{class:"ptj-tree-node ptj-draggable",id:e.unref(a),draggable:"false"},[e.createElementVNode("div",we,[e.createElementVNode("div",null,[t.ischild?(e.openBlock(),e.createElementBlock("a",{key:0,"data-action":"more",class:"button",onClick:i[0]||(i[0]=e.withModifiers((e=>r()),["prevent","stop"]))},je)):(e.openBlock(),e.createElementBlock("a",{key:1,"data-action":"more",class:"button",onClick:i[1]||(i[1]=e.withModifiers((e=>r()),["prevent","stop"]))},Ee))]),e.unref(ge).meta.sortable?(e.openBlock(),e.createElementBlock("div",Ve,[e.createElementVNode("a",{"data-action":"more",class:"button",onClick:i[2]||(i[2]=(...e)=>l.prevent.stop&&l.prevent.stop(...e)),onMousedown:i[3]||(i[3]=(...e)=>l.setDraggable&&l.setDraggable(...e)),onMouseup:i[4]||(i[4]=(...e)=>l.endDraggable&&l.endDraggable(...e))},Ne,32)])):e.createCommentVNode("v-if",!0),e.createElementVNode("div",null,e.toDisplayString(e.unref(s)),1),e.createVNode(g,{route:{state:"primary",key:e.unref(a)}},{default:e.withCtx((()=>[xe])),_:1},8,["route"])]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),((t,l)=>e.withDirectives((e.openBlock(),e.createBlock(c,{row:t,ischild:!0,key:l},null,8,["row"])),[[e.vShow,e.unref(o).toggle_state[e.unref(a)]]]))),128))],8,be)}}};l("\n.model-tree.branch[data-v-1dcaa9f5] {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\n}\n.tree .ide-block[data-v-1dcaa9f5] {\r\n\tdisplay : none;\n}\n.dragArea[data-v-1dcaa9f5] {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\n}\r\n\r\n\r\n"),Ce.__scopeId="data-v-1dcaa9f5",Ce.__file="presstojam/src/components/ptj-tree-node.vue";const Se={class:"ptj-tree ptj-drop-target'",ref:"treeroot"};var De={setup:t=>(t,l)=>(e.openBlock(),e.createElementBlock("div",Se,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).indexes[0],((t,l)=>(e.openBlock(),e.createBlock(Ce,{key:l,row:t},null,8,["row"])))),128))],512)),__file:"presstojam/src/components/ptj-tree.vue"};const Oe=["name"],Te={key:1},Me=["name"],Pe=e.createTextVNode(" - "),Le=["name"],Fe={key:2};var Ue={props:{field:Object,type:{type:String,default:"view"}},setup:t=>(l,o)=>"edit"==t.type||"post"==t.type?e.withDirectives((e.openBlock(),e.createElementBlock("input",e.mergeProps({key:0,class:"ptj-form-number",name:t.field.name,type:"number","onUpdate:modelValue":o[0]||(o[0]=e=>t.field.change=e)},t.field.atts,{onBlur:o[1]||(o[1]=e=>t.field.validateon=!0)}),null,16,Oe)),[[e.vModelText,t.field.change]]):"filter"==t.type?(e.openBlock(),e.createElementBlock("div",Te,[e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"ptj-form-filter-number ptj-min",name:t.field.name,type:"number","onUpdate:modelValue":o[2]||(o[2]=e=>t.field.change1=e)},t.field.atts,{onBlur:o[3]||(o[3]=e=>t.field.validateon=!0)}),null,16,Me),[[e.vModelText,t.field.change1]]),Pe,e.withDirectives(e.createElementVNode("input",e.mergeProps({class:"ptj-form-filter-number ptj-max",name:t.field.name,type:"number","onUpdate:modelValue":o[4]||(o[4]=e=>t.field.change2=e)},t.field.atts,{onBlur:o[5]||(o[5]=e=>t.field.validateon=!0)}),null,16,Le),[[e.vModelText,t.field.change2]])])):(e.openBlock(),e.createElementBlock("span",Fe,e.toDisplayString(t.field.val),1)),__file:"presstojam/src/components/ptj-number.vue"};const Re=["name"],Ae=["name"],Ie=[e.createElementVNode("option",{value:0},e.toDisplayString("All"),-1),e.createElementVNode("option",{value:1},e.toDisplayString("Checked"),-1),e.createElementVNode("option",{value:2},e.toDisplayString("Unchecked"),-1)],ze={class:"material-icons"};var $e={props:{field:Object,type:{type:String,default:"view"},id:Number},setup(t){const l=t;let o=e.computed((()=>"edit"==l.type&&l.field.immutable?"view":l.type));let r=e.computed((()=>1==l.field.val?"check_circle_outline":"highlight_off"));return(s,i)=>"edit"==e.unref(o)||"post"==t.type?e.withDirectives((e.openBlock(),e.createElementBlock("input",{key:0,class:"ptj-checkbox",type:"checkbox","true-value":1,"false-value":0,name:t.field.name,"onUpdate:modelValue":i[0]||(i[0]=e=>t.field.change=e)},null,8,Re)),[[e.vModelCheckbox,t.field.change]]):"filter"==e.unref(o)?e.withDirectives((e.openBlock(),e.createElementBlock("select",{key:1,name:t.field.name,"onUpdate:modelValue":i[1]||(i[1]=e=>t.field.change1=e),class:"ptj-filter-form-checkbox"},Ie,8,Ae)),[[e.vModelSelect,t.field.change1]]):(e.openBlock(),e.createElementBlock("a",{key:2,onClick:i[2]||(i[2]=e=>function(){let e={};return e["--id"]=l.id,e[l.field.name]=1==l.field.val?0:1,n.put("/data/"+a.route+"/"+a.model,e).then((()=>{l.field.val=1==l.field.val?0:1})).catch((e=>{console.log(e)}))}())},[e.createElementVNode("span",ze,e.toDisplayString(e.unref(r)),1)]))},__file:"presstojam/src/components/ptj-flag.vue"};const Je=["name"],qe={value:"0",selected:""},He=["value"],Ge={key:2};var We={props:{field:Object,type:{default:"view",type:String}},setup(t){const l=t;let o=e.computed((()=>"edit"==l.type&&l.field.immutable?"view":l.type));return e.computed((()=>l.field.options)),(l,r)=>"edit"==e.unref(o)||"post"==t.type?e.withDirectives((e.openBlock(),e.createElementBlock("select",e.mergeProps({key:0,"onUpdate:modelValue":r[0]||(r[0]=e=>t.field.change=e)},t.field.atts,{name:t.field.name,onBlur:r[1]||(r[1]=e=>t.field.validateon=!0)}),[e.createElementVNode("option",qe,e.toDisplayString(e.unref(O)("ptj-id-default")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.field.options,(t=>(e.openBlock(),e.createElementBlock("option",{key:t.key,value:t.key},e.toDisplayString(t.value),9,He)))),128))],16,Je)),[[e.vModelSelect,t.field.change]]):"filter"==e.unref(o)?(e.openBlock(),e.createBlock(S,{key:1,field:t.field},null,8,["field"])):(e.openBlock(),e.createElementBlock("span",Ge,e.toDisplayString(t.field.val),1))},__file:"presstojam/src/components/ptj-id.vue"};const Ze=["name"],Ke={key:1},Qe=["name"],Xe=e.createTextVNode(" - "),Ye=["name"],et={key:2};var tt={props:{field:Object,type:{default:"view",type:String}},setup(t){const l=t;let o=e.computed((()=>"edit"==l.type&&l.field.immutable?"view":l.type));return(l,r)=>"edit"==e.unref(o)||"post"==e.unref(o)?e.withDirectives((e.openBlock(),e.createElementBlock("input",e.mergeProps({key:0,name:t.field.name,type:"datetime-local","onUpdate:modelValue":r[0]||(r[0]=e=>t.field.change=e)},t.field.atts,{onBlur:r[1]||(r[1]=e=>t.field.validateon=!0)}),null,16,Ze)),[[e.vModelText,t.field.change]]):"filter"==e.unref(o)?(e.openBlock(),e.createElementBlock("div",Ke,[e.withDirectives(e.createElementVNode("input",e.mergeProps({type:"datetime-local",name:t.field.name+"min"},t.field.atts,{"onUpdate:modelValue":r[2]||(r[2]=e=>t.field.change1=e)}),null,16,Qe),[[e.vModelText,t.field.change1]]),Xe,e.withDirectives(e.createElementVNode("input",e.mergeProps({type:"datetime-local",name:t.field.name+"max"},t.field.atts,{"onUpdate:modelValue":r[3]||(r[3]=e=>t.field.change2=e)}),null,16,Ye),[[e.vModelText,t.field.change2]])])):(e.openBlock(),e.createElementBlock("span",et,e.toDisplayString(t.field.val),1))},__file:"presstojam/src/components/ptj-time.vue"};const lt=["name"],ot={key:1},rt=[e.createElementVNode("span",{class:"material-icons"},"download",-1)];var nt={props:{field:Object,type:{type:String,default:"view"},id:Number},setup(t){const l=t;return(o,r)=>"edit"==t.type||"post"==t.type?(e.openBlock(),e.createElementBlock("input",{key:0,class:"ptj-form-asset",ref:"input",onChange:r[0]||(r[0]=(...e)=>o.setFile&&o.setFile(...e)),name:t.field.meta.name,type:"file"},null,40,lt)):(e.openBlock(),e.createElementBlock("span",ot,[e.createTextVNode(e.toDisplayString(t.field.val)+" ",1),e.createElementVNode("a",{onClick:r[1]||(r[1]=e=>{n.getAsset("/asset/"+l.field.model+"/"+l.field.name+"/"+l.id).then((e=>{const t=document.createElement("a"),o=URL.createObjectURL(e);t.href=o,t.download=l.field.val,document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(o)})).catch((e=>{console.log(e)}))})},rt)]))},__file:"presstojam/src/components/ptj-asset.vue"};const at=["onUpdate:modelValue"],st={class:"ptj-selectfields-label"};var it={setup:t=>(t,l)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).meta.cells,((t,l)=>(e.openBlock(),e.createElementBlock("div",{key:l},[e.withDirectives(e.createElementVNode("input",{type:"checkbox","onUpdate:modelValue":e=>t.summary=e,"true-value":1,"false-value":0,class:"ptj-selectfields-checkbox"},null,8,at),[[e.vModelCheckbox,t.summary]]),e.createElementVNode("label",st,e.toDisplayString(e.unref(O)("label",{field:t.name,model:t.model})),1)])))),128)),__file:"presstojam/src/components/ptj-selectfields.vue"};const ct=t=>(e.pushScopeId("data-v-15ab9672"),t=t(),e.popScopeId(),t),dt={class:"ptj-table-wrapper"},pt=["onClick"],ut={key:0,class:"material-icons"},mt={key:1,class:"material-icons"},ht={class:"ptj-actions"},ft=ct((()=>e.createElementVNode("span",{class:"material-icons"},"add",-1))),gt={class:"ptj-actions"},kt=ct((()=>e.createElementVNode("span",{class:"material-icons"},"arrow_forward_ios",-1)));var vt={setup(l){let o=c(),r=e.reactive({name:"",dir:""});const n=e.ref(null);return(l,s)=>(e.openBlock(),e.createElementBlock("div",dt,[e.createElementVNode("table",{class:e.normalizeClass(["ptj-table",a.model])},[e.createElementVNode("thead",null,[e.createElementVNode("tr",{class:"ptj-table-header",ref_key:"tableheader",ref:n},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).meta.cells,(t=>e.withDirectives((e.openBlock(),e.createElementBlock("th",{key:t.name,class:e.normalizeClass(["ptj-table-header-cell",t.name]),onClick:e=>{!function(e){if(ge.meta.pages>0){r.dir=!r.name!=e||"desc"==r.dir?"asc":"desc",r.name=e;let t=[];t[r.name]=r.dir,ge.meta.sort=t,load()}else r.name!=e||"desc"==r.dir?(ge.data.sort((function(t,l){let o=t.getCell(e).toVal(),r=l.getCell(e).toVal();return o<r?-1:o>r?1:0})),r.name=e,r.dir="asc"):(ge.data.sort((function(t,l){let o=t.getCell(e).toVal(),r=l.getCell(e).toVal();return o<r?1:o>r?-1:0})),r.name=e,r.dir="desc")}(t.name)}},[e.createTextVNode(e.toDisplayString(e.unref(O)("label",{model:t.model,field:t.name,def:t.name}))+" ",1),e.unref(r).name==t.name&&"asc"==e.unref(r).dir?(e.openBlock(),e.createElementBlock("span",ut,"keyboard_arrow_up")):e.createCommentVNode("v-if",!0),e.unref(r).name==t.name&&"desc"==e.unref(r).dir?(e.openBlock(),e.createElementBlock("span",mt,"keyboard_arrow_down")):e.createCommentVNode("v-if",!0)],10,pt)),[[e.vShow,t.summary]]))),128)),e.createElementVNode("th",ht,[1!=e.unref(o).disable_selectfields?(e.openBlock(),e.createBlock(t,{key:0,location:!1,relative:n.value},{button:e.withCtx((()=>[ft])),default:e.withCtx((()=>[e.createVNode(it)])),_:1},8,["relative"])):e.createCommentVNode("v-if",!0)])],512)]),e.createElementVNode("tbody",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).data,((t,l)=>(e.openBlock(),e.createElementBlock("tr",{key:l,class:"ptj-table-row"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.cells,((l,o)=>e.withDirectives((e.openBlock(),e.createElementBlock("td",{key:o,class:e.normalizeClass(["ptj-table-cell",l.name])},["asset"==l.type?(e.openBlock(),e.createBlock(nt,{key:0,field:l,id:t.primary},null,8,["field","id"])):"number"==l.type?(e.openBlock(),e.createBlock(Ue,{key:1,field:l},null,8,["field"])):"flag"==l.type?(e.openBlock(),e.createBlock($e,{key:2,field:l,id:t.primary},null,8,["field","id"])):"id"==l.type?(e.openBlock(),e.createBlock(We,{key:3,field:l},null,8,["field"])):"time"==l.type?(e.openBlock(),e.createBlock(tt,{key:4,field:l},null,8,["field"])):"string"==l.type?(e.openBlock(),e.createBlock(le,{key:5,field:l},null,8,["field"])):e.createCommentVNode("v-if",!0)],2)),[[e.vShow,l.summary]]))),128)),e.createElementVNode("td",gt,[e.createVNode(g,{route:{state:"primary",key:t.primary}},{default:e.withCtx((()=>[kt])),_:2},1032,["route"])])])))),128))])],2)]))}};l("\ntable[data-v-15ab9672], thead[data-v-15ab9672], tbody[data-v-15ab9672], tr[data-v-15ab9672] {\r\n    width : 100%;\n}\n.ptj-table-wrapper[data-v-15ab9672] {\r\n    position : relative;\n}\r\n\r\n"),vt.__scopeId="data-v-15ab9672",vt.__file="presstojam/src/components/ptj-table.vue";var yt={setup(t){e.inject("data"),e.inject("indexes");const l=e.computed((()=>{let e=[];for(let t in indexes)e=this.getCombinations(t,indexes[t],e);return e}));return(t,o)=>(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l),((l,o)=>(e.openBlock(),e.createElementBlock("div",{key:o},[e.createElementVNode("h3",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.tags,((t,l)=>(e.openBlock(),e.createElementBlock("span",{key:l},e.toDisplayString(t)+" ",1)))),128))]),e.createElementVNode("ul",null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(l.data,(l=>(e.openBlock(),e.createElementBlock("li",{key:l},[e.createVNode(g,{route:t.route},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.data[l].getSummary()),1)])),_:2},1032,["route"])])))),128))])])))),128))},__file:"presstojam/src/components/ptj-list.vue"};const _t=["onSubmit"],Bt=["onClick"],bt=["value"];var wt={setup(t){function l(){ge.search.applyChangeData(),a.params=ge.search.convertToParams(),h(),_e()}return(t,o)=>(e.openBlock(),e.createElementBlock("form",{onSubmit:e.withModifiers(l,["prevent"]),class:"ptj-filter-form"},[e.createElementVNode("h3",null,e.toDisplayString(e.unref(O)("ptj-filter-form-title")),1),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).search.cells,(t=>e.withDirectives((e.openBlock(),e.createBlock(I,{key:t.name,field:t},{default:e.withCtx((()=>["id"==t.type?(e.openBlock(),e.createBlock(We,{key:0,type:"filter",field:t},null,8,["field"])):"flag"==t.type?(e.openBlock(),e.createBlock($e,{key:1,type:"filter",field:t},null,8,["field"])):"number"==t.type?(e.openBlock(),e.createBlock(Ue,{key:2,type:"filter",field:t},null,8,["field"])):"time"==t.type?(e.openBlock(),e.createBlock(tt,{key:3,type:"filter",field:t},null,8,["field"])):"string"==t.type?(e.openBlock(),e.createBlock(le,{key:4,type:"filter",field:t},null,8,["field"])):e.createCommentVNode("v-if",!0),e.createElementVNode("a",{class:"ptj-filter-form-reset",onClick:e=>t.reset()},"x",8,Bt)])),_:2},1032,["field"])),[[e.vShow,"id"!=t.type||Object.keys(t.options).length>0]]))),128)),e.createElementVNode("input",{type:"submit",value:e.unref(O)("ptj-filter-form-btn"),class:"ptj-filter-form-submit",onClick:o[0]||(o[0]=e=>{t.$emit("close")})},null,8,bt)],40,_t))}};l("\n.error[data-v-71ada21d] {\r\n  color : red;\n}\r\n\r\n"),wt.__scopeId="data-v-71ada21d",wt.__file="presstojam/src/components/ptj-filter-form.vue";const jt={class:"ptj-pagination"},Et=["onClick"];var Vt={setup(t){function l(e){return e==a.params._page??1?"ptj-pagination-active":""}return(t,o)=>(e.openBlock(),e.createElementBlock("div",jt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(ge).max_pages,(t=>(e.openBlock(),e.createElementBlock("a",{key:t,onClick:e=>{return l=t,a.params._page=l,h(),void _e();var l},class:e.normalizeClass(l(t))},e.toDisplayString(t),11,Et)))),128))]))},__file:"presstojam/src/components/ptj-pagination.vue"};const Nt={class:"ptj-progress-bar-wrapper"},xt={class:"ptj-progress-holder"};var Ct={props:{total:Number,progress:Number},setup(t){const l=t,o=e.computed((()=>{let e=Math.floor(l.progress/l.total*100);return isNaN(e)?0:e}));return(t,l)=>(e.openBlock(),e.createElementBlock("div",Nt,[e.createElementVNode("div",xt,[e.createElementVNode("div",{class:"ptj-progress-bar",style:e.normalizeStyle("width:"+e.unref(o)+"px")}," ",4)]),e.createElementVNode("span",null,e.toDisplayString(e.unref(o))+"%",1)]))}};l("\n.ptj-progress-holder[data-v-460b10ff] {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\n}\n.ptj-progress-bar[data-v-460b10ff] {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\n}\r\n\r\n\r\n"),Ct.__scopeId="data-v-460b10ff",Ct.__file="presstojam/src/components/ptj-progress-bar.vue";const St=["onSubmit"],Dt=["value"];var Ot={emits:["close"],setup(t,{emit:l}){let o=e.ref("");const r=e.reactive(new fe),s=e.reactive({total:0,progress:0});let i=0;function c(){i=s.total>0?1:2,r.clearErrors();let e=r.serialize();return a.key&&(e["--parentid"]=a.key),n.post("/data/"+a.route+"/"+a.model,e).then((e=>{let t=[],l=r.getCellByType("asset");s.total=0;for(let o in l){if(!l[o].val)continue;++s.total;const r=new Asset;r.url="/asset/"+a.model+"/"+o+"/"+e["--id"];let n=r.saveFile(l[o].val).then((()=>{++s.progress}));t.push(n)}return Promise.all(t)})).then((()=>{r.reset(),_e(),l("close")})).catch((e=>(i=0,e.json().then((e=>{const t=e.exception[0];"PressToJamCore\\Exceptions\\ValidationException"==t.type&&r.setErrors(JSON.parse(t.message)),console.log("Err response",e)})))))}return e.onMounted((async()=>{await(async()=>n.post("/route/"+a.route+"/"+a.model).then((e=>{const t=new ue;t.map(e.fields),r.applyMetaRow(t);let l=[];for(let e in t.cells)if("id"==t.cells[e].type&&t.cells[e].reference){let o="/reference/"+a.model+"/"+e;l.push(t.cells[e].setReferenceOptions(o,{"--parentid":a.key}))}return Promise.all(l)})).catch((e=>console.log(e))))()})),(t,l)=>e.withDirectives((e.openBlock(),e.createElementBlock("form",{onSubmit:e.withModifiers(c,["prevent"]),class:e.normalizeClass(["ptj-form",a.model+" "+a.state])},[e.withDirectives(e.createElementVNode("div",{class:"ptj-form-error"},e.toDisplayString(e.unref(o)),513),[[e.vShow,e.unref(o)]]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r).cells,(t=>(e.openBlock(),e.createBlock(I,{key:t.name,field:t},{default:e.withCtx((()=>["asset"==t.type?(e.openBlock(),e.createBlock(nt,{key:0,type:"post",field:t},null,8,["field"])):"number"==t.type?(e.openBlock(),e.createBlock(Ue,{key:1,type:"post",field:t},null,8,["field"])):"flag"==t.type?(e.openBlock(),e.createBlock($e,{key:2,type:"post",field:t},null,8,["field"])):"id"==t.type?(e.openBlock(),e.createBlock(We,{key:3,type:"post",field:t},null,8,["field"])):"time"==t.type?(e.openBlock(),e.createBlock(tt,{key:4,type:"post",field:t},null,8,["field"])):"string"==t.type?(e.openBlock(),e.createBlock(le,{key:5,type:"post",field:t},null,8,["field"])):e.createCommentVNode("v-if",!0),t.encrypted?(e.openBlock(),e.createBlock(I,{key:6,field:t},{default:e.withCtx((()=>[e.createVNode($,{field:t},null,8,["field"])])),_:2},1032,["field"])):e.createCommentVNode("v-if",!0)])),_:2},1032,["field"])))),128)),e.createElementVNode("input",{type:"submit",value:e.unref(O)("ptj-create-form-btn"),class:"ptj-form-submit"},null,8,Dt),e.withDirectives(e.createVNode(Ct,{total:e.unref(s).total,progress:e.unref(s).progress},null,8,["total","progress"]),[[e.vShow,1==e.unref(i)]])],42,St)),[[e.vShow,0==e.unref(i)]])},__file:"presstojam/src/components/ptj-create-form.vue"};const Tt=(t=>(e.pushScopeId("data-v-1c7fb47e"),t=t(),e.popScopeId(),t))((()=>e.createElementVNode("span",{class:"material-icons"},"search",-1)));var Mt={setup(l){let o=c();return e.onMounted((async()=>{await _e()})),e.onBeforeUnmount((()=>{ye()})),(l,r)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([Map.model,Map.state])},[e.createVNode(t,null,{button:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(O)("ptj-repo-post")),1)])),default:e.withCtx((t=>[e.createVNode(Ot,{onClose:t.toggleShow},null,8,["onClose"])])),_:1}),1!=e.unref(o).disable_filter?(e.openBlock(),e.createBlock(t,{key:0},{button:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(O)("ptj-repo-search"))+" ",1),Tt])),default:e.withCtx((t=>[e.createVNode(wt,{onClose:t.toggleShow},null,8,["onClose"])])),_:1})):e.createCommentVNode("v-if",!0),"tree"==e.unref(ge).component?(e.openBlock(),e.createBlock(De,{key:1})):"list"==e.unref(ge).component?(e.openBlock(),e.createBlock(yt,{key:2})):"table"==e.unref(ge).component?(e.openBlock(),e.createBlock(vt,{key:3})):e.createCommentVNode("v-if",!0),e.unref(ge).max_pages>0?(e.openBlock(),e.createBlock(Vt,{key:4})):e.createCommentVNode("v-if",!0)],2))}};l("\n.table[data-v-1c7fb47e], .thead[data-v-1c7fb47e], .tbody[data-v-1c7fb47e], .tr[data-v-1c7fb47e] {\r\n    width : 100%;\n}\r\n\r\n"),Mt.__scopeId="data-v-1c7fb47e",Mt.__file="presstojam/src/components/ptj-repo.vue";const Pt=["placeholder"],Lt=["disabled"];var Ft={props:{check_str:{type:String,default:"delete"},parentid:{default:0}},emits:["close"],setup(t,{emit:l}){const o=t;let r=e.ref(""),s=e.ref(!0),i=e.computed((()=>O("ptj-delete-title",{val:o.check_str}))),c=e.computed((()=>O("ptj-delete-btn")));function d(){s.value=r.value!=o.check_str}function p(){n.delete("/data/"+a.route+"/"+a.model,{"--id":a.key}).then((e=>{a.state="parent",a.key=o.parentid.val,m()})).catch((e=>console.log(e)))}return(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("p",null,e.toDisplayString(e.unref(i)),1),e.withDirectives(e.createElementVNode("input",{type:"text",placeholder:t.check_str,onKeyup:d,"onUpdate:modelValue":o[0]||(o[0]=t=>e.isRef(r)?r.value=t:r=t)},null,40,Pt),[[e.vModelText,e.unref(r)]]),e.createElementVNode("button",{disabled:e.unref(s),onClick:p},e.toDisplayString(e.unref(c)),9,Lt)],64))},__file:"presstojam/src/components/ptj-delete.vue"};const Ut=["value"],Rt={class:"ptj-children"};var At={setup(l){const o=e.reactive({data:new fe,fstate:0,type:"view",show_def:!1,progress:{total:0,progress:0}});function r(){o.type="view"==o.type?"edit":"view"}let s=e.computed((()=>"edit"==o.type?"view":"edit"));const d=async()=>{let e=c(),t=function(e){let t={};return a.to&&(t.__to=a.to),a.key&&("first"==a.key?t.__limit=1:t["--id"]=a.key),e.fields&&(t.__fields=e.fields),t}(e);return n.get("/route/"+a.route+"/"+a.model+"/primary",t).then((t=>{const l=new ue;l.map(t.fields,e.fields??[]),o.data.applyMetaRow(l)})).then((()=>n.get("/data/"+a.route+"/"+a.model+"/primary",t))).then((e=>{o.data.row=e;for(let e in o.data.cells)o.data.cells[e].change=o.data.cells[e].val})).then((e=>{for(let e in o.data.cells)if("id"==o.data.cells[e].type&&o.data.cells[e].reference){let t="/reference/"+a.model+"/"+e;o.data.cells[e].setReferenceOptions(t,{"--id":a.key})}})).catch((e=>console.log(e)))};function p(){o.fstate=o.progress.total>0?1:2,o.data.clearErrors();let e=o.data.serialize(!0);if(0!=Object.keys(e).length)return e["--id"]=a.key,n.put("/data/"+a.route+"/"+a.model,e).then((e=>{let t=[],l=o.data.getCellByType("asset");o.progress.total=0;for(let r in l){if(!l[r].val)continue;++o.progress.total;const n=new Asset;n.url="/asset/"+a.model+"/"+r+"/"+e["--id"];let s=n.saveFile(l[r].val).then((()=>{++o.progress.progress}));t.push(s)}return Promise.all(t)})).then((()=>{for(let e in o.data.cells)o.data.cells[e].val=o.data.cells[e].change})).then((()=>{r()})).catch((e=>{o.fstate=0,"string"==typeof e?globalerror=e:o.data.setErrors(e)}));r()}return e.onMounted((async()=>{await d()})),e.onBeforeUnmount((()=>{o.data=new fe,o.fstate=0,o.type="view",o.show_def=!1,o.progress={total:0,progress:0}})),(l,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(i).route.perms.includes("put")?(e.openBlock(),e.createElementBlock("a",{key:0,onClick:r,class:"ptj-edit-toggle"},e.toDisplayString(e.unref(s)),1)):e.createCommentVNode("v-if",!0),e.unref(i).route.perms.includes("delete")?(e.openBlock(),e.createBlock(t,{key:1,cls:"ptj-del-modal"},{button:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(e.unref(O)("ptj-primary-delete")),1)])),default:e.withCtx((t=>[e.createVNode(Ft,{parentid:e.unref(o).data.parent,onClose:t.toggleShow},null,8,["parentid","onClose"])])),_:1})):e.createCommentVNode("v-if",!0),e.createElementVNode("div",{class:e.normalizeClass(["ptj-primary",a.model])},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o).data.cells,(t=>(e.openBlock(),e.createBlock(I,{key:t.name,field:t},{default:e.withCtx((()=>["asset"==t.type?(e.openBlock(),e.createBlock(nt,{key:0,type:e.unref(o).type,field:t,id:e.unref(o).data.primary},null,8,["type","field","id"])):"number"==t.type?(e.openBlock(),e.createBlock(Ue,{key:1,type:e.unref(o).type,field:t},null,8,["type","field"])):"flag"==t.type?(e.openBlock(),e.createBlock($e,{key:2,type:e.unref(o).type,field:t,id:e.unref(o).data.primary},null,8,["type","field","id"])):"id"==t.type?(e.openBlock(),e.createBlock(We,{key:3,type:e.unref(o).type,field:t},null,8,["type","field"])):"time"==t.type?(e.openBlock(),e.createBlock(tt,{key:4,type:e.unref(o).type,field:t},null,8,["type","field"])):"string"==t.type?(e.openBlock(),e.createBlock(le,{key:5,type:e.unref(o).type,field:t},null,8,["type","field"])):e.createCommentVNode("v-if",!0)])),_:2},1032,["field"])))),128)),"edit"==e.unref(o).type?(e.openBlock(),e.createElementBlock("input",{key:0,type:"submit",value:e.unref(O)("ptj-primary-put-btn"),class:"ptj-form-submit",onClick:p},null,8,Ut)):e.createCommentVNode("v-if",!0)],2),e.createElementVNode("div",Rt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(i).route.children,(t=>(e.openBlock(),e.createBlock(g,{key:t,route:{model:t,state:"parent",key:a.key}},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t),1)])),_:2},1032,["route"])))),128))])],64))},__file:"presstojam/src/components/ptj-primary.vue"};const It={class:"ptj-account-handler"},zt=["onSubmit"],$t=["value"],Jt=["onSubmit"],qt=["value"];var Ht={props:{actions:[]},setup(t){const l=e.reactive({state:"login",active:!0,login_data:new fe,register_data:new fe,globalerror:""});function o(){l.state="login"==l.state?"create":"login"}function r(){return l.active=!1,l.globalerror="","login"==l.state?n.post("/data/"+a.route+"/"+a.model+"/login",l.login_data.serialize("login")).then((e=>{u()})).catch((e=>{l.globalerror="Incorrect username / password"})):n.post("/data/"+a.route+"/"+a.model,l.register_data.serialize("post")).then((e=>{u()})).catch((e=>{l.register_data.applyErrors(e)}))}return n.post("/route/"+a.route+"/"+a.model).then((e=>{let t=new ue;t.map(e.fields),l.register_data.applyMetaRow(t)})),n.post("/route/"+a.route+"/"+a.model+"/login").then((e=>{let t=new ue;t.map(e.fields),l.login_data.applyMetaRow(t)})),(t,n)=>(e.openBlock(),e.createElementBlock("div",It,[e.withDirectives(e.createElementVNode("form",{onSubmit:e.withModifiers(r,["prevent"]),class:"ptj-login"},[e.withDirectives(e.createElementVNode("div",{class:"ptj-form-error"},e.toDisplayString(e.unref(l).globalerror),513),[[e.vShow,e.unref(l).globalerror]]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).login_data.cells,(t=>(e.openBlock(),e.createBlock(I,{key:t.meta.name,field:t},{default:e.withCtx((()=>[e.createVNode(le,{type:"post",field:t},null,8,["field"])])),_:2},1032,["field"])))),128)),e.createElementVNode("input",{type:"submit",value:e.unref(O)("ptj-account-handler-btn-login"),class:"ptj-form-submit"},null,8,$t),e.unref(i).route.perms.includes("post")?(e.openBlock(),e.createElementBlock("a",{key:0,onClick:n[0]||(n[0]=e=>o())},"Register")):e.createCommentVNode("v-if",!0)],40,zt),[[e.vShow,"login"==e.unref(l).state]]),e.withDirectives(e.createElementVNode("form",{onSubmit:e.withModifiers(r,["prevent"]),class:"ptj-register"},[e.withDirectives(e.createElementVNode("div",{class:"ptj-form-error"},e.toDisplayString(e.unref(l).globalerror),513),[[e.vShow,e.unref(l).globalerror]]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(l).register_data.cells,(t=>(e.openBlock(),e.createBlock(I,{key:t.meta.name,field:t},{default:e.withCtx((()=>["number"==t.meta.type?(e.openBlock(),e.createBlock(Ue,{key:0,type:"post",field:t},null,8,["field"])):"flag"==t.meta.type?(e.openBlock(),e.createBlock($e,{key:1,type:"post",field:t},null,8,["field"])):"time"==t.meta.type?(e.openBlock(),e.createBlock(tt,{key:2,type:"post",field:t},null,8,["field"])):"string"==t.meta.type?(e.openBlock(),e.createBlock(le,{key:3,type:"post",field:t},null,8,["field"])):e.createCommentVNode("v-if",!0),t.encrypted?(e.openBlock(),e.createBlock(I,{key:4,field:t},{default:e.withCtx((()=>[e.createVNode($,{field:t},null,8,["field"])])),_:2},1032,["field"])):e.createCommentVNode("v-if",!0)])),_:2},1032,["field"])))),128)),e.createElementVNode("input",{type:"submit",value:e.unref(O)("ptj-account-handler-btn-create"),class:"ptj-form-submit"},null,8,qt),e.unref(i).route.perms.includes("login")?(e.openBlock(),e.createElementBlock("a",{key:0,onClick:n[1]||(n[1]=e=>o())},"Login")):e.createCommentVNode("v-if",!0)],40,Jt),[[e.vShow,"create"==e.unref(l).state]])]))},__file:"presstojam/src/components/ptj-account-handler.vue"};const Gt=e.createElementVNode("div",null,"Loading ...",-1);var Wt={setup(t){const l=e.computed((()=>i.component?"ptj-primary"==i.component?At:"ptj-repo"==i.component?Mt:"ptj-account-handler"==i.component?Ht:void 0:null));return e.onMounted((()=>(p(),d()))),(t,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(de),(e.openBlock(),e.createBlock(e.Suspense,null,{default:e.withCtx((()=>[e.createElementVNode("div",{class:e.normalizeClass([a.model,a.state])},[e.createElementVNode("h1",null,e.toDisplayString(e.unref(i).title),1),e.unref(l)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(e.unref(l)),{key:0})):e.createCommentVNode("v-if",!0)],2)])),fallback:e.withCtx((()=>[Gt])),_:1}))],64))},__file:"presstojam/src/components/ptj-router.vue"};const Zt={class:"ptj-account-details"},Kt={class:"ptj-nav"},Qt={key:0};var Xt={setup:l=>(l,o)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",Zt,["public"!=e.unref(oe).user?(e.openBlock(),e.createElementBlock("a",{key:0,class:"ptj-account-details-logout",onClick:o[0]||(o[0]=(...t)=>e.unref(ne)&&e.unref(ne)(...t))},e.toDisplayString(e.unref(O)("ptj-user-logout")),1)):e.createCommentVNode("v-if",!0)]),e.createElementVNode("div",Kt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(re).cats,((t,l)=>(e.openBlock(),e.createElementBlock("div",{key:l},[t.length>1?(e.openBlock(),e.createElementBlock("span",Qt,e.toDisplayString(l),1)):e.createCommentVNode("v-if",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,(t=>(e.openBlock(),e.createBlock(g,{route:{route:t.route,model:t.model,state:t.state,key:0},key:t.route},{default:e.withCtx((()=>[e.createTextVNode(e.toDisplayString(t.route),1)])),_:2},1032,["route"])))),128))])))),128))]),e.createVNode(Wt),e.unref(oe).login?(e.openBlock(),e.createBlock(t,{key:0})):e.createCommentVNode("v-if",!0)],64))};function Yt(e={}){if(e||(e={}),!e.client)throw"Must set client settings";if(!e.client.url)throw"No URL defined for client";return n.initSettings(e.client),e.map&&a.initSettings(e.map),function(e){e&&(s=e)}(e.models),se(e.user&&e.user.role?e.user.role:"")}Xt.__file="presstojam/src/components/ptj-user.vue",exports.getClient=function(e){if(!e.client)throw"Must set client settings";if(!e.client.url)throw"No URL defined for client";return n.initSettings(e.client),n},exports.runApp=function(t,l){Yt(l).then((()=>ie())).then((()=>{const l=e.createApp(Xt);return l.mount(t),l})).catch((e=>{console.log(e)}))},exports.runRoute=function(t,l){Yt(l).then((()=>{const l=e.createApp(Wt);return l.mount(t),l})).catch((e=>{console.log(e)}))};
//# sourceMappingURL=ptj.cjs.js.map
