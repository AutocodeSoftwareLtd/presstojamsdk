import{ref as e,computed as t,openBlock as l,createElementBlock as s,Fragment as n,createElementVNode as r,renderSlot as a,createBlock as i,Teleport as o,unref as d,withDirectives as c,normalizeClass as p,normalizeStyle as u,vShow as f,reactive as h,renderList as m,createTextVNode as g,toDisplayString as y,vModelText as _,pushScopeId as v,popScopeId as b,createCommentVNode as k,createVNode as j,isRef as w,withModifiers as x,withCtx as C,mergeProps as S,vModelSelect as O,vModelDynamic as P,onMounted as E,resolveComponent as A,vModelCheckbox as U,inject as V,onBeforeUnmount as F,Suspense as T,resolveDynamicComponent as z,createApp as R}from"vue";var N={props:{location:{default:"body"},relative:{default:!1},cls:String},setup(h){const m=h;let g=e(!1);function y(){g.value=!g.value}let _=t((()=>{if(m.relative){let e=function(e){let t={left:0,top:0,width:e.offsetWidth,height:e.offsetHeight,wrapper:0};for(;!e.classList.contains("ptj-table-wrapper");)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.parentNode;return t.wrapper=e.offsetWidth,t}(m.relative);return e.wrapper,e.left,e.width,"position:absolute;top:"+(e.top+e.height)+"px;right:0px;"}return""})),v=t((()=>!m.location)),b=t((()=>"body"==m.location?"ptj-modal-backdrop-full":""));return(e,t)=>(l(),s(n,null,[r("a",{onClick:y,class:"ptj-modal-button"},[a(e.$slots,"button")]),(l(),i(o,{disabled:d(v),to:h.location},[c(r("div",{class:p(["ptj-modal-backdrop",d(b)]),style:u(d(_))},[r("div",{class:p(["ptj-modal",h.cls])},[r("header",null,[r("button",{type:"button",class:"btn-close",onClick:y}," x ")]),a(e.$slots,"default",{toggleShow:y})],2)],6),[[f,d(g)]])],8,["disabled","to"]))],64))}};function L(e,t){void 0===t&&(t={});var l=t.insertAt;if(e&&"undefined"!=typeof document){var s=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===l&&s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}L("\n.ptj-modal-backdrop-full {\r\n    position : absolute;\r\n    top : 0;\r\n    left : 0;\r\n    height : 100vh;\r\n    width : 100vw;\n}\r\n"),N.__file="presstojam/src/components/ptj-modal.vue";let I,B={};var D={initSettings(e){if(I=e.url,e.custom_headers)for(let t in e.custom_headers)B[t]=e.custom_headers[t]},run(e,t,l,s){const n=new Headers;l&&(n.set("Content-Type","application/json"),s=l);for(let e in B)n.set(e,B[e]);return fetch(I+t,{method:e,mode:"cors",cache:"no-cache",credentials:"include",headers:n,body:s}).then((e=>{if(e.ok)return e.json();throw e}))},get(e,t){if(t){const l=new URLSearchParams;for(let e in t)Array.isArray(t[e])||"object"==typeof t[e]&&null!==t[e]?l.append(e,JSON.stringify(t[e])):l.append(e,t[e]);-1==e.indexOf("?")?e+="?":e+="&",e+=l.toString()}return this.run("GET",e)},getprimary(e,t){return this.get(e,t)},post(e,t){return this.run("POST",e,JSON.stringify(t))},put(e,t){return this.run("PUT",e,JSON.stringify(t))},patch(e,t){return this.run("PATCH",e,null,t)},getAsset(e){const t=new Headers;for(let e in B)t.set(e,B[e]);return fetch(I+e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"include",headers:t}).then((e=>{if(e.ok)return e.blob();throw e}))},delete(e,t){return this.run("DELETE",e,JSON.stringify(t))}};const M=new class{constructor(){this._route="",this._model="",this._state="",this._key=0,this._to="",this._params={},this._base="/",this._default=!1;Object.keys(this).forEach((e=>{"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){t!=this[e]&&(this[e]=t)}})})),this.action_map={post:"-create",put:"-update",delete:"-delete",login:"-login",logout:"-logout",primary:"-primary",parent:"-parent",get:""}}get id(){return this.model+"-"+this.state+"-"+this.to}reset(){this.route="",this.model="",this.state="",this.key=0,this.to="",this.params={}}convertToURL(){let e=this._base+this.route+"/"+this.model+this.action_map[this.state];this.key&&(e+="-"+this.key),this.to&&(e+="-to-"+this.to);let t=new URLSearchParams;for(const e in this.params)if(this.params[e])if("object"==typeof this.params[e]){let l=[];for(let t in this.params[e])l.push(this.params[e][t]);t.append(e,l.join(","))}else t.append(e,this.params[e]);let l=t.toString();return l&&(e+="?"+l),e}initSettings(e){e&&(this._base=e.base),this.convertFromURL()}convertFromURL(){let e=new URL(window.location.href),t=e.pathname.replace(this.base,"");if(t=t.replace(/^\/+|\/+$/g,""),!t)return;let l=t.split("/");l.length>=2&&(this.route=l[0],t=l[1]);const s=this;e.searchParams.forEach((function(e,t){s.params[t]=e.indexOf(",")>-1?e.split(","):e})),l=t.split("-to-"),l.length>1&&(this.to=l[1],t=l[0]),l=t.split("-");let n=l[l.length-1];if("first"==n?(this.key=n,l.pop()):isNaN(n)||(this.key=parseInt(n),l.pop()),0==l.length)throw new Error("Can't convert this url string: "+t);this.state="get";for(let e in this.action_map)if(this.action_map[e]=="-"+l[l.length-1]){this.state=e,l.pop();break}this.model=l.join("-"),this.route||(this.route=this.model)}getAll(){return{route:this.route,model:this.model,state:this.state,key:this.key,to:this.to,params:this.params,base:this.base,default:this.default}}apply(e){for(let t in e)this[t]=e[t]}};let J={};window.onpopstate=function(){M.reset(),M.convertFromURL(),Z()};const $=h({component:"",title:"",name:"",route:{children:[],parent:null,perms:[]},slug:[],sort:!1});function q(){return J[M.model]&&J[M.model][M.state]?J[M.model][M.state]:{}}function H(){return $.component="",$.route.children=[],$.route.parent=null,$.route.perms=[],$.route.title="",$.route.name="",$.sort=!1,D.get("/nav/route-points/"+M.route+"/"+M.model).then((e=>{$.route.children=e.children,$.route.perms=e.perms,$.route.parent=e.parent,$.title=e.title,$.name=e.name,e.sort&&($.sort=!0),"get"==M.state||"parent"==M.state?$.component="ptj-repo":"primary"==M.state?$.component="ptj-primary":"login"==M.state&&($.component="ptj-account-handler")})).then((e=>{})).catch((e=>console.log(e)))}function X(){$.slug=[];let e={};if(M.key)return"parent"==M.state?e["--parentid"]=M.key:"primary"==M.state&&(e["--id"]=M.key),D.get("/slug/"+M.route+"/"+M.model,e).then((e=>{$.slug=e;for(let e in $.slug)e=parseInt(e),$.slug[e].route=e>0?{model:$.slug[e].model,state:"parent",key:$.slug[e].id}:{model:$.slug[e].model,state:"get",key:0}}))}function Y(){location.href=M.base}function G(){W(),Z()}function W(){const e=window.location.protocol+"//"+window.location.host+M.convertToURL(),t=new URL(e);window.history.pushState({name:t.pathname},document.title,t)}function Z(){H(),X()}var K={props:{route:Object},setup(e){const t=e;function n(){for(let e in t.route)M[e]=t.route[e];M.params={},G()}return(t,r)=>(l(),s("a",{class:"ptj-button",key:e.route,onClick:n},[a(t.$slots,"default")]))},__file:"presstojam/src/components/ptj-button.vue"};const Q={class:"ptj-multiple-select"},ee={class:"ptj-multiple-select-display"},te={class:"ptj-multiple-select-values"},le=["onClick"],se=[(e=>(v("data-v-51b18f4e"),e=e(),b(),e))((()=>r("span",{class:"material-icons"},"close",-1)))];var ne={props:{field:Object},setup(t){const a=t,i=e("");function o(){a.field.change1=i.value,i.value=""}return(e,d)=>(l(),s("div",Q,[r("div",ee,[r("div",te,[(l(!0),s(n,null,m(t.field.change1,(e=>(l(),s("div",{class:"ptj-multiple-select-val",key:e},[g(y(e)+" ",1),r("a",{class:"ptj-multiple-select-val-remove",onClick:t=>{return l=e,void(a.field.change=a.field.change.filter((function(e){return e!==l})));var l}},se,8,le)])))),128))]),c(r("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=e=>i.value=e)},null,512),[[_,i.value]]),r("a",{onClick:o,class:"ptj-multiple-select-add"},"add")])]))}};L("\n.ptj-multiple-select-val[data-v-51b18f4e] {\r\n    display : inline-block;\r\n    border : 1px solid green;\r\n    margin-left : 2px;\r\n    margin-right : 2px;\r\n    padding : 2px;\r\n    background-color : green;\n}\n.ptj-multiple-select-val-remove[data-v-51b18f4e] {\r\n    color : red;\n}\n.ptj-multiple-select-display[data-v-51b18f4e] {\r\n    position :relative;\r\n    background-color : #fff;\r\n    border : 1px solid #cdcdcd;\r\n    min-height : 35px;\n}\r\n\r\n"),ne.__scopeId="data-v-51b18f4e",ne.__file="presstojam/src/components/ptj-multiple-input.vue";const re={class:"ptj-multiple-select"},ae={class:"ptj-multiple-select-display"},ie={class:"ptj-multiple-select-values"},oe=["onClick"],de=[(e=>(v("data-v-5b05457d"),e=e(),b(),e))((()=>r("span",{class:"material-icons"},"close",-1)))],ce={class:"material-icons"},pe=["data-key"];var ue={props:{field:Object,options:{type:Array,required:!0}},setup(e){const t=e;function a(e){for(let l of t.options)if(l.key==e)return l.value}const i=h({display:!1,symbol:"keyboard_arrow_down"});function o(){i.display?(i.display=!1,i.symbol="keyboard_arrow_down"):(i.display=!0,i.symbol="keyboard_arrow_up")}function p(e){t.field.change1=e.target.getAttribute("data-key"),o()}return(u,h)=>(l(),s("div",re,[r("div",ae,[r("div",ie,[(l(!0),s(n,null,m(e.field.change,(e=>(l(),s("div",{class:"ptj-multiple-select-val",key:e},[g(y(a(e))+" ",1),r("a",{class:"ptj-multiple-select-val-remove",onClick:l=>{return s=e,void(t.field.change=t.field.change.filter((function(e){return e!==s})));var s}},de,8,oe)])))),128))]),r("a",{class:"ptj-multiple-select-arrow",onClick:o},[r("span",ce,y(d(i).symbol),1)])]),c(r("ul",{class:"ptj-multiple-select-options",onClick:p},[(l(!0),s(n,null,m(e.options,(e=>(l(),s("li",{key:e.key,"data-key":e.key},y(e.value),9,pe)))),128))],512),[[f,d(i).display]])]))}};L("\n.ptj-multiple-select-val[data-v-5b05457d] {\r\n    display : inline-block;\r\n    border : 1px solid green;\r\n    margin-left : 2px;\r\n    margin-right : 2px;\r\n    padding : 2px;\r\n    background-color : green;\n}\n.ptj-multiple-select-val-remove[data-v-5b05457d] {\r\n    color : red;\n}\n.ptj-multiple-select-arrow[data-v-5b05457d] {\r\n    position :absolute;\r\n    right : 2px;\r\n    top : 3px;\n}\n.ptj-multiple-select-display[data-v-5b05457d] {\r\n    position :relative;\r\n    background-color : #fff;\r\n    border : 1px solid #cdcdcd;\r\n    min-height : 35px;\n}\n.ptj-multiple-select-options li[data-v-5b05457d] {\r\n    list-style: none;\r\n    cursor: pointer;\r\n    margin-top : 2px;\r\n    border : 1px solid #cdcdcd;\r\n    background-color : #fff;\n}\n.ptj-multiple-select-options li[data-v-5b05457d]:hover {\r\n    background-color : #f9f9fb;\r\n    transition : background-color .2s ease-out,border .2s ease-out;\n}\r\n"),ue.__scopeId="data-v-5b05457d",ue.__file="presstojam/src/components/ptj-multiple-select.vue";let fe={};function he(e,t){let l="";if(!t)return fe[e]&&(l=fe[e]),l;if(t.model)if(t.field){if(t.field.indexOf("/")>-1){let e=t.field.split("/");t.field=e.pop()}fe.models[t.model]&&fe.models[t.model].fields[t.field]&&(l=fe.models[t.model].fields[t.field][e])}else fe.models[t.model]&&(l=fe.models[t.model][e]);else l=t.type?fe[e][t.type]?fe[e][t.type]:fe[e].def:fe[e];return t.val&&(l=l.replace(/\{\{(.*?)\}\}/g,t.val)),!l&&t.default&&(l=t.default),l}const me=0,ge=1,ye=2,_e=3,ve=4,be={key:0,class:"ptj-error"};var ke={props:{field:[Object,Function]},setup:e=>(t,n)=>e.field.error?(l(),s("p",be,y(d(he)("ptj-error-"+e.field.error,{type:e.field.type,val:e.field.meta.getErrorVal(e.field.error)})),1)):k("v-if",!0)};L("\n.ptj-error {\r\n  color : red;\n}\r\n"),ke.__file="presstojam/src/components/ptj-error.vue";const je={class:"ptj-form-label"};var we={props:{field:[Object,Function]},setup:e=>(t,n)=>(l(),s("div",{class:p(["ptj-form-row",e.field.name])},[r("label",je,y(d(he)("label",{model:e.field.model,field:e.field.name,default:e.field.name})),1),a(t.$slots,"default"),c(j(ke,{field:e.field},null,8,["field"]),[[f,e.field.showError]])],2)),__file:"presstojam/src/components/ptj-form-row.vue"};const xe=["name"];var Ce={props:{field:{type:Object,required:!0}},setup(e){const n=h({validateon:!1,val:""}),r=t({get:()=>n.val,set(e){field.val,n.val=e}});return(t,a)=>c((l(),s("input",{type:"text",name:e.field.name,"onUpdate:modelValue":a[0]||(a[0]=e=>w(r)?r.value=e:null),onBlur:a[1]||(a[1]=e=>d(n).validateon=!0)},null,40,xe)),[[_,d(r)]])},__file:"presstojam/src/components/ptj-form-confirm.vue"};const Se=["onSubmit"],Oe=["name"],Pe=["value"];var Ee={props:{field:Object},emits:["close"],setup(t,{emit:n}){const a=e(0);function i(){a.value=1;let e={};return e["--id"]=M.key,e[field.name]=field.change,client.put("/data/"+M.route+"/"+M.model,e).then((()=>{n("close")})).catch((e=>{a.value=0,"string"==typeof e?globalerror=e:cdata.setErrors(e)}))}return(e,n)=>c((l(),s("form",{onSubmit:x(i,["prevent"]),class:p(["ptj-form",M.model+" "+M.state])},[j(we,{field:t.field},{default:C((()=>[c(r("input",{type:"password",name:t.field.name,"onUpdate:modelValue":n[0]||(n[0]=e=>t.field.change=e),onBlur:n[1]||(n[1]=e=>t.field.validateon=!0)},null,40,Oe),[[_,t.field.change]])])),_:1},8,["field"]),j(we,{field:t.field},{default:C((()=>[j(Ce,{field:t.field},null,8,["field"])])),_:1},8,["field"]),r("input",{type:"submit",value:d(he)("ptj-reset-form-btn"),class:"ptj-form-submit"},null,8,Pe)],42,Se)),[[f,0==a.value]])},__file:"presstojam/src/components/ptj-update-encrypted.vue"};const Ae=["name"],Ue={key:2},Ve=["name"],Fe={value:"",selected:"",disabled:""},Te=["value"],ze=["name"],Re={key:7},Ne={key:8};var Le={props:{field:{type:Object,required:!0},type:{type:String,default:"view"}},setup(a){const o=a;let p=t((()=>"edit"==o.type&&o.field.immutable?"view":o.type));const u=e([]);const f=t((()=>function(e){if(0==e.length)return null;let t=[];const l=new RegExp(/^[a-zA-Z]+[a-zA-Z0-9._]+$/);for(let s of e)if(s){if(!l.test(s))return null;t.push(s)}return t}(o.field.contains)?(o.field.setContainsAsOptions(u),"select"):o.field.encrypted?"input":o.field.html||o.field.max>300?"textarea":"input")),h=t((()=>{let e={};o.field.encrypted&&(e.type="password"),o.field.immutable&&(e.readonly=!0);let t=he("placeholder",{model:o.field.model,field:o.field.name});return t&&(e.placeholder=t),o.field.contains.includes("html")&&(e["data-html"]=1),e}));return(e,t)=>(l(),s(n,null,[a.field.encrypted&&"edit"==a.type?(l(),i(N,{key:0},{button:C((()=>[g(y(d(he)("ptj-repo-post")),1)])),default:C((e=>[j(Ee,{onClose:e.toggleShow,field:a.field},null,8,["onClose","field"])])),_:1})):k("v-if",!0),"textarea"!=d(f)||"edit"!=d(p)&&"post"!=d(p)?"textarea"==d(f)&&"view"==d(p)?(l(),s("div",Ue,y(a.field.val),1)):"select"==d(f)&&"filter"==d(p)?(l(),i(ue,{key:3,field:a.field,options:u.value},null,8,["field","options"])):"select"!=d(f)||"edit"!=d(p)&&"post"!=d(p)?"edit"==d(p)||"post"==d(p)?c((l(),s("input",S({key:5},d(h),{name:a.field.name,"onUpdate:modelValue":t[3]||(t[3]=e=>a.field.change=e),onBlur:t[4]||(t[4]=e=>a.field.validateon=!0)}),null,16,ze)),[[P,a.field.change]]):"filter"==d(p)?(l(),i(ne,{key:6,field:a.field},null,8,["field"])):"view"==d(p)&&a.field.reference?(l(),s("span",Re,[j(K,{route:{model:a.field.reference,key:a.field.val,state:"primary"}},{default:C((()=>[g(y(a.field.val),1)])),_:1},8,["route"])])):(l(),s("span",Ne,y(a.field.val),1)):c((l(),s("select",S({key:4,"onUpdate:modelValue":t[1]||(t[1]=e=>a.field.change=e),name:a.field.name},d(h),{onBlur:t[2]||(t[2]=e=>a.field.validateon=!0)}),[r("option",Fe,y(d(he)("ptj-string-default")),1),(l(!0),s(n,null,m(u.value,(e=>(l(),s("option",{key:e.key,value:e.key},y(e.value),9,Te)))),128))],16,Ve)),[[O,a.field.change]]):c((l(),s("textarea",S({key:1},d(h),{name:a.field.name,"onUpdate:modelValue":t[0]||(t[0]=e=>a.field.change=e)}),null,16,Ae)),[[_,a.field.change]])],64))},__file:"presstojam/src/components/ptj-string.vue"};const Ie=h({init:!1,login:!1,user:"public"}),Be=h({cats:{},routes:[]});function De(){D.post("/core/logout").then((()=>{Y()}))}function Me(){D.get("/core/check-user").then((e=>{if(e.is_expired)return D.put("/core/switch-tokens").then((()=>{Me()}))})).then((e=>{"public"!=Ie.user&&setTimeout(Me,6e5)})).catch((e=>{Ie.login=!0}))}function Je(e=""){return D.get("/core/check-user").then((e=>e.is_expired?D.put("/core/switch-tokens").then((()=>D.get("/core/check-user"))):e)).then((t=>{if(Ie.user=t.user,Ie.role=t.role,Ie.init=!0,Ie.role!=e){let t="/core/change-role";return e&&(t+="/"+e),D.post(t).then((t=>{Ie.role=e}))}})).then((()=>{Me()})).then((()=>D.get("/dictionary").then((e=>(fe=e,!0))))).catch((e=>console.log(e)))}function $e(){return Be.cats={},Be.routes=[],D.get("/nav/site-map").then((e=>{for(let t in e)for(let l in e[t]){const s={model:l,state:e[t][l].state};e[t][l].default&&(s.default=!0),s.route=l,Be.routes.push(s),Be.cats[t]||(Be.cats[t]=[]),Be.cats[t].push(s)}})).then((()=>(M.model||M.apply(function(){for(let e in Be.cats)for(let t of Be.cats[e])if(t.default)return t}()),!0))).catch((e=>{console.log(e)}))}const qe={class:"ptj-slug-trail"};var He={setup:e=>(e,t)=>(l(),s("div",qe,[(l(!0),s(n,null,m(d($).slug,(e=>(l(),i(K,{key:e.id,route:e.route},{default:C((()=>[g(y(e.model),1)])),_:2},1032,["route"])))),128))])),__file:"presstojam/src/components/ptj-slug-trail.vue"};class Xe{constructor(e){this._name=e,this._store=h({summary:0}),this._default_val=null,this._immutable=!1,this._encrypted=!1,this._min=null,this._max=null,this._contains=[],this._notcontains=[],this._listeners=[];Object.keys(this).forEach((e=>{"_store"!=e&&"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){"_type"==e?this._type=t.toLowerCase():this[e]=t}})})),this.summary=t({get:()=>this._store.summary,set:e=>{this._store.summary=e?1:0}})}apply(e){for(let t in e)if("summary"==t)this.summary=e[t]?1:0;else{if("validation"==t)continue;"type"==t?this.type=e[t].toLowerCase():this[t]=e[t]}this._min=e.validation.min,this._max=e.validation.max,e.validation.contains&&(this._contains=e.validation.contains.split("|")),e.validation.notcontains&&(this._notcontains=e.validation.notcontains.split("|"))}clean(e){return e}calcValue(e){return e||""}validateSize(e){return e<this._min?ge:e>this._max?ye:me}validate(e){if(null===e)return;let t;if(isNaN(e)){const l=e?e.length:0;t=this.validateSize(l)}else t=this.validateSize(e);if(t!=me)return t;for(let t of this._notcontains)if(e.match(t))return ve;if(0==this._contains.length)return me;for(let t of this._contains)if(e.match(t))return me;return _e}trigger(e){for(let t of this._listeners)t(e)}addParam(e,t){t&&(e[this._name]=t)}addAPIParam(e,t){t&&(e[this._name]=t)}getVal(e){return e.value}setVal(e,t){e.value=this.clean(t),e.error=this.validate(t)}getChange(e){return null==e.change?e.value:e.change}setChange(e,t){e.change=this.clean(t),e.error=this.validate(t),this.trigger(t)}getFilter(e){return e.value}setFilter(e,t){e.value=t}getErrorVal(e){return e==ge?this.min:e==ye?this._max:e==_e?this._contains.join(" | "):e==ve?this._notcontains:void 0}}class Ye extends Xe{constructor(e,t){super(e),this._reference=!1,this._include_fields=[],this._recursive=!1,this._reference_to,this._default_val=0,t&&this.apply(t),t.includes&&(this._include_fields=t.includes),t.reference_to&&(this.referenceTo=t.reference_to)}setReferenceOptions(e,t){return D.get(e,t).then((e=>{let t=[];for(let l in e){let s=e[l]["--id"],n=[];for(let t in e[l])"--id"!=t&&n.push(e[l][t]);t.push({key:s,value:n.join(" ",n)})}return t})).catch((e=>{console.log(e)}))}getChange1(e){return null==e.change&&(e.change=e.value),null==e.change?[]:e.change}setChange1(e,t){null==e.change&&(e.change=[]),e.change.includes(t)||(e.change.push(this.clean(t)),e.error=this.validate(t))}get reference(){return this._reference}set reference(e){this._reference=e}get include_fields(){return this._include_fields}set include_fields(e){this._include_fields=e}get recursive(){return this._recursive}set recursive(e){this._recursive=e}get referenceTo(){return this._reference_to}set referenceTo(e){this._reference_to=e}}class Ge extends Xe{constructor(e,t){super(e),t&&this.apply(t)}clean(e){return e?1:0}getChange1(e){return null==e.change&&(e.change=e.value),null==e.change?0:e.change?e.change:2}setChange1(e,t){0!=t?(2==t&&(t=0),e.change=this.clean(t),e.error=this.validate(t)):e.change=null}}class We extends Xe{constructor(e,t){super(e),this._size=0,this._blob=null,this._uploaded=!1,this._chunk_size=0,this._url,this._key=0,t&&this.apply(t)}set chunk_size(e){this._chunk_size=e}set blob(e){this._blob=e}set url(e){this._url=e}set key(e){this._key=e}get blob(){return this._blob}get size(){return this._size}get uploaded(){return this._uploaded}get chunk_size(){return this._chunk_size}get url(){return this._url}getChunk(e){const t=0==this._chunk_size?0:e*this._chunk_size;let l=0==this._chunk_size?this._size:(e+1)*this._chunk_size;l>this._size&&(l=this._size);const s=new DataView(this._blob,t,l-t);let n=[];for(let e=0,t=s.byteLength;e<t;++e)n.push(s.getInt8(e));return n.join("")}loadFile(e){let t={};return t.__key=e,D.get(this._url,t).catch((e=>{alert(e)}))}delFile(e){let t={};return t.__key=e,D.delete(this._url,t).catch((e=>{alert(e)}))}saveFile(e){return this._size=e.size,new Promise(((t,l)=>{const s=new FileReader;let n=this;s.onload=function(e){n.blob=e.target.result,t(s.result)},s.onerror=l,s.readAsArrayBuffer(e)})).then((()=>{let e=[],t=0==this.chunk_size?1:Math.ceil(this.size/this.chunk_size);for(let l=0;l<t;++l){const t={};t.__chunk=l,t.__blob=this.getChunk(l),e.push(D.put(this._url,t))}return Promise.all(e)}))}}class Ze extends Xe{constructor(e,t){super(e),t&&this.apply(t)}addAPIParam(e,t){let l={};t&&(t.min&&(l.min=t.min),t.max&&(l.max=t.max),Object.keys(l).length>0&&(e[this._name]=l))}getChange1(e){return null==e.change&&(e.change=e.value),e.change?e.change.min:""}setChange1(e,t){e.change||(e.change={min:null,max:null}),e.change.min=this.clean(t),e.error=this.validate(t)}getChange2(e){return null==e.change2&&(e.change2=e.value),e.change2?e.change2:""}setChange2(e,t){e.change2=this.clean(t),e.error=this.validate(t)}}class Ke extends Xe{constructor(e,t){super(e),this._round=0,t&&this.apply(t)}clean(e){return this._round?parseFloat(e):parseInt(e)}getVal(e){return(e.value?e.value:0).toFixed(this._round)}setVal(e,t){e.value=this.clean(t),e.error=this.validate(t)}getChange(e){return null==e.change&&(e.change=e.value),e.change?e.change.toFixed(this._round):""}setChange(e,t){e.change=this.clean(t),e.error=this.validate(t),this.trigger(t)}getFilter(e){return e.value&&e.value,e.value.toFixed(this._round)}setFilter(e,t){e.value=this.clean(t)}getChange1(e){return null==e.change&&(e.change=e.value),e.change?e.change.toFixed(this._round):""}setChange1(e,t){e.change||(e.change=e.value),e.change=this.clean(t),e.error=this.validate(t)}getChange2(e){return null==e.change2&&(e.change2=e.value),e.change2?e.change2.toFixed(this._round):""}setChange2(e,t){e.change2=this.clean(t),e.error=this.validate(t)}get round(){return this._round}set round(e){this._round=e}}class Qe extends Xe{constructor(e,t){super(e),t&&this.apply(t)}setContainsAsOptions(e){let t=[];for(let e of this._contains)if(e.indexOf(":")>-1){const l=e.split(":");t.push({key:l[0],value:l[1]})}else t.push({key:e,value:e});e.value=t}addAPIParam(e,t){if(t){let l=[];for(let e in t)t[e]&&l.push("%"+t[e]+"%");l.length>0&&(e[this._name]=l)}}getChange1(e){return null==e.change&&(e.change=e.value),null==e.change?[]:e.change}setChange1(e,t){null==e.change&&(e.change=[]),e.change.push(this.clean(t)),e.error=this.validate(t)}getFilter(e){return e.value}setFilter(e,t){Array.isArray(t)?e.value=t:t&&(e.value=[t])}}function et(e,t){return"ID"==t.type?new Ye(e,t):"Number"==t.type?new Ke(e,t):"Asset"==t.type?new We(e,t):"Flag"==t.type?new Ge(e,t):"Time"==t.type?new Ze(e,t):new Qe(e,t)}class tt{constructor(){this._cells={},this._children=[],this._active=0,this._init=!1,this._store=h({index:null}),this._state_groups={};Object.keys(this).forEach((e=>{"_"==e[0]&&Object.defineProperty(this,e.substring(1),{get:function(){return this[e]},set:function(t){this[e]=t}})}))}addChild(e,t){this._children[e]=t}addState(e,t){this._actions[e]=t}resetSummary(e){for(let e in this._cells)this._cells[e].summary=!1;for(let t in e)this._cells[e[t]]&&(this._cells[e[t]].summary=!0)}setStates(e){for(let t in e){let l={};if(e[t].states)for(const s of e[t].states)l[s.depends_on]||(l[s.depends_on]=[]),l[s.depends_on].push(s);this._state_groups[t]=l}}mapField(e,t){this._cells[e]=et(e,t),this._cells[e].recursive&&(this._store.index=e)}map(e,t=[]){if(t.length>0)for(let l of t)this.mapField(l,e[l]);else for(let t in e)this.mapField(t,e[t]);this.setStates(e)}getCellByType(e){let t={};for(let l in this._cells)this._cells[l].type==e&&(t[l]=this._cells[l]);return t}showAll(){for(let e in this._cells)this._cells[e].summary=!0}}class lt{constructor(e){this._store=h({meta:e,value:null,change:null,change2:null,display:null,error:0,is_validate_on:!1});const l=Object.getOwnPropertyNames(e),s=Object.keys(this),n=this;l.forEach((e=>{"_"==e[0]||s.includes(e)||(this[e]=t({get:function(){return n.store.meta[e]},set:function(t){n.store.meta[e]=t}}))})),this.error=t({get:()=>this._store.error,set:e=>{this._store.error=parseInt(e),this._store.is_validate_on=!0}}),this.display=t({get:()=>Array.isArray(this._store.display)?this._store.display.length>0?this._store.display.join(" "):this._store.value:this._store.display?this._store.display:this._store.value,set:e=>{this._store.display=[];const t=this._store.meta.include_fields;if(t)for(const l of t){const t=this._store.meta.name+"/"+l;this._store.display.push(e[t])}}}),this.showError=t((()=>(!this._store.is_validate_on||this._store.error,!(!this._store.is_validate_on||!this._store.error)))),this._store.meta.default_val?this._store.value=this._store.meta.default_val:"select"==this._store.meta.type&&(this._store.value=0),this.val=t({get:()=>this._store.meta.getVal(this._store),set:e=>{this._store.value=this._store.meta.clean(e),this._store.error=this._store.meta.validate(e)}}),this.change=t({get:()=>this._store.meta.getChange(this._store),set:e=>{this._store.meta.setChange(this._store,e)}}),this.change1=t({get:()=>this._store.meta.getChange1(this._store),set:e=>{this._store.meta.setChange1(this._store,e)}}),this.change2=t({get:()=>{if("function"==typeof this._store.meta.getChange2)return this._store.meta.getChange2(this._store)},set:e=>{this._store.meta.setChange2(this._store,e)}}),this.filter=t({get:()=>this._store.meta.getFilter(this._store),set:e=>{this._store.meta.setFilter(this._store,e)}})}get meta(){return this._store.meta}set validateon(e){this._store.is_validate_on=e}get store(){return this._store}resetMeta(e){this._store.meta=e}toString(){return this._store.display}isSummary(){return this._store.meta.summary}setContainsAsOptions(e){this._store.meta.setContainsAsOptions(e)}reset(){this._store.change=null,this._store.value=null}getOption(e){return"string"==this._store.meta.type?e:this._store.meta.getOption(e)}addParam(e){this._store.meta.addParam(e,this._store.value)}addAPIParam(e){this._store.meta.addParam(e,this._store.value)}}function st(e,t,l){let s=[];for(let l in t){let n=et(e,t[l]);s.push({depends_val:t[l].depends_val,field:n})}return e=>{for(const t of s)if(t.depends_val==e)return l(t.field);for(const e of s)if(!e.depends_val)return l(e.field)}}class nt{constructor(e){this._metarow=e,this._cells=h({}),this._children={},this._ids=h({}),e&&this.applyMetaRow(e),this.cells=t((()=>this._cells))}set children(e){this._children=e}get children(){return this._children}get primary(){return this._ids["--id"]}get parent(){return this._ids["--parentid"]}clone(){const e=new nt(this._metarow);let t={};for(let e in this._cells)t[e].val=this._cells[e].val;let l={};for(let t in e.children)l[t]=e.children[t].clone();return e.children=l,e}applyMetaRow(e){for(const t in e.cells){const l=e.cells[t];this._cells[l.name]=new lt(l)}for(const t in e.children)this._children[t]=e.children[t];let t=e.state_groups;for(let e in t)for(let l in t[e]){const s=this;let n=st(e,t[e][l],(t=>{s._cells[e].resetMeta(t)}));this._cells[l].listeners.push(n)}}addChild(e,t){this._children[e]||(this._children[e]=[]),this._children[e].push(t)}set row(e){if(e){e["--id"]&&(this._ids["--id"]=e["--id"]),e["--parentid"]&&(this._ids["--parentid"]=e["--parentid"]);for(let t in this._cells)e.hasOwnProperty(t)&&(this._cells[t].val=e[t],this._cells[t].display=e);for(let t in this._children)this._children[t].row=e[t]}}set filter(e){if(e)for(let t in this._cells)e.hasOwnProperty(t)&&(this._cells[t].filter=e[t])}getSummary(){let e=[];for(let t in this._cells){const l=this._cells[t];if(l.isSummary()){const t=l.display;e.push(t)}}return e.join(" ")}toString(){let e=[];for(let t in this._cells)e.push(this._cells[t].display);return e.join(" ")}serialize(e=!1){let t={};for(let l in this._cells)e?this._cells[l].change!=this._cells[l].val&&(t[l]=this._cells[l].change):null!=this._cells[l].change&&(t[l]=this._cells[l].change);return t}getCellByType(e){let t={};for(let l in this._cells)this._cells[l].type==e&&(t[l]=this._cells[l]);return t}clearErrors(){for(let e in this._cells)this._cells[e].error=0}reset(){for(let e in this._cells)this._cells[e].error=0,this._cells[e].change=null}setErrors(e){for(let t in e)0!==t.indexOf("__")&&this._cells[t]&&(this._cells[t].error=e[t])}convertToParams(){let e={};for(let t in this._cells)this._cells[t].addParam(e);return e}convertToAPIParams(){let e={};for(let t in this._cells)"asset"!=this._cells[t].type&&this._cells[t].addAPIParam(e);return e}applyChangeData(){for(let e in this._cells)this._cells[e].val=this._cells[e].change}}const rt=h({meta:new tt,data:[],indexes:{},search:new nt});function at(){rt.indexes={};for(const e in rt.data){let t=rt.data[e].cells[rt.meta.store.index].val;rt.indexes[t]||(rt.indexes[t]=[]),rt.indexes[t].push(e)}}function it(e){rt.data=[];for(const t in e){let l=new nt(rt.meta);l.row=e[t],rt.data.push(l)}}function ot(){rt.meta=new tt,rt.data=[],rt.indexes={},rt.search=new nt,rt.max_pages=0}const dt=async()=>{let e=q();ot();let t=function(e){let t={};return t||(t={}),M.to&&(t.__to=M.to),e.to&&(t.__to=e.to),M.key&&(t["--parentid"]=M.key),e.limit&&(t.__limit=e.limit),e.fields&&(t.__fields=e.fields),e.group&&(t.group=e.group),M.params._page&&(t.__limit=(M.params._page-1)*t.__limit+","+t.__limit),t}(e),l="/"+M.route+"/"+M.model;return"parent"==M.state&&(l+="/parent"),D.get("/route"+l,t).then((t=>{rt.meta.map(t.fields,e.fields),"all"==e.show&&rt.meta.showAll(),rt.search.applyMetaRow(rt.meta),rt.search.filter=M.params,rt.meta.init=!0,e.component?rt.component=e.component:rt.meta.cells?rt.component=rt.meta.store.index||rt.meta.children.length>0?"tree":"table":rt.component=""})).then((()=>(t={...t,...rt.search.convertToAPIParams()},e.limit>0?D.get("/count/"+M.route+"/"+M.model,t).then((t=>{rt.max_pages=Math.ceil(t.count/e.limit)})).then((()=>D.get("/data"+l,t))).then((e=>(it(e),rt.meta.store.index&&at(),e))):D.get("/data"+l,t).then((e=>(it(e),rt.meta.store.index&&at(),e)))))).catch((e=>console.log(e)))};const ct=e=>(v("data-v-1dcaa9f5"),e=e(),b(),e),pt=["id"],ut={class:"ptj-tree-node-row"},ft=[ct((()=>r("span",{class:"material-icons"},"subdirectory_arrow_right",-1)))],ht=[ct((()=>r("span",{class:"material-icons"},"keyboard_arrow_right",-1)))],mt={key:0},gt=[ct((()=>r("span",{class:"material-icons"},"drag_handle",-1)))],yt=ct((()=>r("span",{class:"material-icons"},"arrow_forward_ios",-1)));var _t={props:{row:{type:[String,Number],required:!0},draggable:Boolean,ischild:{type:Boolean,default:!1}},setup(e){const a=e,o=h({toggle_state:{},branch:null});function p(){const e=o.branch.primary;o.toggle_state[e]=!o.toggle_state[e]}const u=t((()=>{if(!o.branch)return[];const e=o.branch.primary;return rt.indexes[e]?rt.indexes[e]:[]})),g=t((()=>o.branch?o.branch.primary:0)),_=t((()=>o.branch?o.branch.getSummary():""));return E((()=>{o.branch=rt.data[a.row]})),(t,a)=>{const h=A("ptj-tree-node",!0);return l(),s("div",{class:"ptj-tree-node ptj-draggable",id:d(g),draggable:"false"},[r("div",ut,[r("div",null,[e.ischild?(l(),s("a",{key:0,"data-action":"more",class:"button",onClick:a[0]||(a[0]=x((e=>p()),["prevent","stop"]))},ft)):(l(),s("a",{key:1,"data-action":"more",class:"button",onClick:a[1]||(a[1]=x((e=>p()),["prevent","stop"]))},ht))]),d(rt).meta.sortable?(l(),s("div",mt,[r("a",{"data-action":"more",class:"button",onClick:a[2]||(a[2]=(...e)=>t.prevent.stop&&t.prevent.stop(...e)),onMousedown:a[3]||(a[3]=(...e)=>t.setDraggable&&t.setDraggable(...e)),onMouseup:a[4]||(a[4]=(...e)=>t.endDraggable&&t.endDraggable(...e))},gt,32)])):k("v-if",!0),r("div",null,y(d(_)),1),j(K,{route:{state:"primary",key:d(g)}},{default:C((()=>[yt])),_:1},8,["route"])]),(l(!0),s(n,null,m(d(u),((e,t)=>c((l(),i(h,{row:e,ischild:!0,key:t},null,8,["row"])),[[f,d(o).toggle_state[d(g)]]]))),128))],8,pt)}}};L("\n.model-tree.branch[data-v-1dcaa9f5] {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\n}\n.tree .ide-block[data-v-1dcaa9f5] {\r\n\tdisplay : none;\n}\n.dragArea[data-v-1dcaa9f5] {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\n}\r\n\r\n\r\n"),_t.__scopeId="data-v-1dcaa9f5",_t.__file="presstojam/src/components/ptj-tree-node.vue";const vt={class:"ptj-tree ptj-drop-target'",ref:"treeroot"};var bt={setup:e=>(e,t)=>(l(),s("div",vt,[(l(!0),s(n,null,m(d(rt).indexes[0],((e,t)=>(l(),i(_t,{key:t,row:e},null,8,["row"])))),128))],512)),__file:"presstojam/src/components/ptj-tree.vue"};const kt=["name"],jt={key:1},wt=["name"],xt=g(" - "),Ct=["name"],St={key:2};var Ot={props:{field:Object,type:{type:String,default:"view"}},setup(e){const n=e,a=t((()=>{let e={};if(n.field.meta.round){let t="0.";for(let e=0;e<n.field.meta.round-1;++e)t+="0";t+="1",e.step=t}return e}));return(t,n)=>"edit"==e.type||"post"==e.type?c((l(),s("input",S({key:0,class:"ptj-form-number",name:e.field.name,type:"number","onUpdate:modelValue":n[0]||(n[0]=t=>e.field.change=t)},d(a),{onBlur:n[1]||(n[1]=t=>e.field.validateon=!0)}),null,16,kt)),[[_,e.field.change]]):"filter"==e.type?(l(),s("div",jt,[c(r("input",S({class:"ptj-form-filter-number ptj-min",name:e.field.name,type:"number","onUpdate:modelValue":n[2]||(n[2]=t=>e.field.change1=t)},d(a),{onBlur:n[3]||(n[3]=t=>e.field.validateon=!0)}),null,16,wt),[[_,e.field.change1]]),xt,c(r("input",S({class:"ptj-form-filter-number ptj-max",name:e.field.name,type:"number","onUpdate:modelValue":n[4]||(n[4]=t=>e.field.change2=t)},d(a),{onBlur:n[5]||(n[5]=t=>e.field.validateon=!0)}),null,16,Ct),[[_,e.field.change2]])])):(l(),s("span",St,y(e.field.val),1))},__file:"presstojam/src/components/ptj-number.vue"};const Pt=["name"],Et=["name"],At=[r("option",{value:0},y("All"),-1),r("option",{value:1},y("Checked"),-1),r("option",{value:2},y("Unchecked"),-1)],Ut={class:"material-icons"};var Vt={props:{field:Object,type:{type:String,default:"view"},id:Number},setup(e){const n=e;let a=t((()=>"edit"==n.type&&n.field.immutable?"view":n.type));let i=t((()=>1==n.field.val?"check_circle_outline":"highlight_off"));return(t,o)=>"edit"==d(a)||"post"==e.type?c((l(),s("input",{key:0,class:"ptj-checkbox",type:"checkbox","true-value":1,"false-value":0,name:e.field.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.field.change=t)},null,8,Pt)),[[U,e.field.change]]):"filter"==d(a)?c((l(),s("select",{key:1,name:e.field.name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.field.change1=t),class:"ptj-filter-form-checkbox"},At,8,Et)),[[O,e.field.change1]]):(l(),s("a",{key:2,onClick:o[2]||(o[2]=e=>function(){let e={};return e["--id"]=n.id,e[n.field.name]=1==n.field.val?0:1,D.put("/data/"+M.route+"/"+M.model,e).then((()=>{n.field.val=1==n.field.val?0:1})).catch((e=>{console.log(e)}))}())},[r("span",Ut,y(d(i)),1)]))},__file:"presstojam/src/components/ptj-flag.vue"};const Ft=["name"],Tt={value:"0",selected:""},zt=["value"],Rt={key:2};var Nt={props:{field:Object,type:{default:"view",type:String},parent:Number},setup(a){const o=a,p=e([]);let u=t((()=>"edit"==o.type&&o.field.immutable?"view":o.type));return(o.field.meta.reference||o.field.meta.recursive)&&E((()=>{!async function(){let e="/reference/"+M.model+"/";e+=o.field.meta.reference?o.field.name:"id",p.value=await o.field.meta.setReferenceOptions(e,{"--parentid":o.parent})}()})),(e,t)=>"edit"==d(u)||"post"==a.type?c((l(),s("select",S({key:0,"onUpdate:modelValue":t[0]||(t[0]=e=>a.field.change=e)},a.field.atts,{name:a.field.name,onBlur:t[1]||(t[1]=e=>a.field.validateon=!0)}),[r("option",Tt,y(d(he)("ptj-id-default")),1),(l(!0),s(n,null,m(p.value,(e=>(l(),s("option",{key:e.key,value:e.key},y(e.value),9,zt)))),128))],16,Ft)),[[O,a.field.change]]):"filter"==d(u)?(l(),i(ue,{key:1,field:a.field,options:p.value},null,8,["field","options"])):(l(),s("span",Rt,y(a.field.display),1))},__file:"presstojam/src/components/ptj-id.vue"};const Lt=["name"],It={key:1},Bt=["name"],Dt=g(" - "),Mt=["name"],Jt={key:2};var $t={props:{field:Object,type:{default:"view",type:String}},setup(e){const n=e;let a=t((()=>"edit"==n.type&&n.field.immutable?"view":n.type));return(t,n)=>"edit"==d(a)||"post"==d(a)?c((l(),s("input",S({key:0,name:e.field.name,type:"datetime-local","onUpdate:modelValue":n[0]||(n[0]=t=>e.field.change=t)},e.field.atts,{onBlur:n[1]||(n[1]=t=>e.field.validateon=!0)}),null,16,Lt)),[[_,e.field.change]]):"filter"==d(a)?(l(),s("div",It,[c(r("input",S({type:"datetime-local",name:e.field.name+"min"},e.field.atts,{"onUpdate:modelValue":n[2]||(n[2]=t=>e.field.change1=t)}),null,16,Bt),[[_,e.field.change1]]),Dt,c(r("input",S({type:"datetime-local",name:e.field.name+"max"},e.field.atts,{"onUpdate:modelValue":n[3]||(n[3]=t=>e.field.change2=t)}),null,16,Mt),[[_,e.field.change2]])])):(l(),s("span",Jt,y(e.field.val),1))},__file:"presstojam/src/components/ptj-time.vue"};const qt=["name"],Ht={key:1},Xt=[r("span",{class:"material-icons"},"download",-1)];var Yt={props:{field:Object,type:{type:String,default:"view"},id:Number},setup(e){const t=e;return(n,a)=>"edit"==e.type||"post"==e.type?(l(),s("input",{key:0,class:"ptj-form-asset",ref:"input",onChange:a[0]||(a[0]=(...e)=>n.setFile&&n.setFile(...e)),name:e.field.meta.name,type:"file"},null,40,qt)):(l(),s("span",Ht,[g(y(e.field.val)+" ",1),r("a",{onClick:a[1]||(a[1]=e=>{D.getAsset("/asset/"+t.field.model+"/"+t.field.name+"/"+t.id).then((e=>{const l=document.createElement("a"),s=URL.createObjectURL(e);l.href=s,l.download=t.field.val,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)})).catch((e=>{console.log(e)}))})},Xt)]))},__file:"presstojam/src/components/ptj-asset.vue"};const Gt=["onUpdate:modelValue"],Wt={class:"ptj-selectfields-label"};var Zt={setup:e=>(e,t)=>(l(!0),s(n,null,m(d(rt).meta.cells,((e,t)=>(l(),s("div",{key:t},[c(r("input",{type:"checkbox","onUpdate:modelValue":t=>e.summary=t,"true-value":1,"false-value":0,class:"ptj-selectfields-checkbox"},null,8,Gt),[[U,e.summary]]),r("label",Wt,y(d(he)("label",{field:e.name,model:e.model})),1)])))),128)),__file:"presstojam/src/components/ptj-selectfields.vue"};const Kt=e=>(v("data-v-15ab9672"),e=e(),b(),e),Qt={class:"ptj-table-wrapper"},el=["onClick"],tl={key:0,class:"material-icons"},ll={key:1,class:"material-icons"},sl={class:"ptj-actions"},nl=Kt((()=>r("span",{class:"material-icons"},"add",-1))),rl={class:"ptj-actions"},al=Kt((()=>r("span",{class:"material-icons"},"arrow_forward_ios",-1)));var il={setup(t){let a=q(),o=h({name:"",dir:""});const u=e(null);return(e,t)=>(l(),s("div",Qt,[r("table",{class:p(["ptj-table",M.model])},[r("thead",null,[r("tr",{class:"ptj-table-header",ref_key:"tableheader",ref:u},[(l(!0),s(n,null,m(d(rt).meta.cells,(e=>c((l(),s("th",{key:e.name,class:p(["ptj-table-header-cell",e.name]),onClick:t=>{!function(e){if(rt.meta.pages>0){o.dir=!o.name!=e||"desc"==o.dir?"asc":"desc",o.name=e;let t=[];t[o.name]=o.dir,rt.meta.sort=t,load()}else o.name!=e||"desc"==o.dir?(rt.data.sort((function(t,l){let s=t.getCell(e).toVal(),n=l.getCell(e).toVal();return s<n?-1:s>n?1:0})),o.name=e,o.dir="asc"):(rt.data.sort((function(t,l){let s=t.getCell(e).toVal(),n=l.getCell(e).toVal();return s<n?1:s>n?-1:0})),o.name=e,o.dir="desc")}(e.name)}},[g(y(d(he)("label",{model:e.model,field:e.name,def:e.name}))+" ",1),d(o).name==e.name&&"asc"==d(o).dir?(l(),s("span",tl,"keyboard_arrow_up")):k("v-if",!0),d(o).name==e.name&&"desc"==d(o).dir?(l(),s("span",ll,"keyboard_arrow_down")):k("v-if",!0)],10,el)),[[f,e.summary]]))),128)),r("th",sl,[1!=d(a).disable_selectfields?(l(),i(N,{key:0,location:!1,relative:u.value},{button:C((()=>[nl])),default:C((()=>[j(Zt)])),_:1},8,["relative"])):k("v-if",!0)])],512)]),r("tbody",null,[(l(!0),s(n,null,m(d(rt).data,((e,t)=>(l(),s("tr",{key:t,class:"ptj-table-row"},[(l(!0),s(n,null,m(e.cells,((t,n)=>c((l(),s("td",{key:n,class:p(["ptj-table-cell",t.name])},["asset"==t.type?(l(),i(Yt,{key:0,field:t,id:e.primary},null,8,["field","id"])):"number"==t.type?(l(),i(Ot,{key:1,field:t},null,8,["field"])):"flag"==t.type?(l(),i(Vt,{key:2,field:t,id:e.primary},null,8,["field","id"])):"id"==t.type?(l(),i(Nt,{key:3,field:t},null,8,["field"])):"time"==t.type?(l(),i($t,{key:4,field:t},null,8,["field"])):"string"==t.type?(l(),i(Le,{key:5,field:t},null,8,["field"])):k("v-if",!0)],2)),[[f,t.summary]]))),128)),r("td",rl,[j(K,{route:{state:"primary",key:e.primary}},{default:C((()=>[al])),_:2},1032,["route"])])])))),128))])],2)]))}};L("\ntable[data-v-15ab9672], thead[data-v-15ab9672], tbody[data-v-15ab9672], tr[data-v-15ab9672] {\r\n    width : 100%;\n}\n.ptj-table-wrapper[data-v-15ab9672] {\r\n    position : relative;\n}\r\n\r\n"),il.__scopeId="data-v-15ab9672",il.__file="presstojam/src/components/ptj-table.vue";var ol={setup(e){V("data"),V("indexes");const a=t((()=>{let e=[];for(let t in indexes)e=this.getCombinations(t,indexes[t],e);return e}));return(e,t)=>(l(!0),s(n,null,m(d(a),((t,a)=>(l(),s("div",{key:a},[r("h3",null,[(l(!0),s(n,null,m(t.tags,((e,t)=>(l(),s("span",{key:t},y(e)+" ",1)))),128))]),r("ul",null,[(l(!0),s(n,null,m(t.data,(t=>(l(),s("li",{key:t},[j(K,{route:e.route},{default:C((()=>[g(y(e.data[t].getSummary()),1)])),_:2},1032,["route"])])))),128))])])))),128))},__file:"presstojam/src/components/ptj-list.vue"};const dl=["onSubmit"],cl=["onClick"],pl=["value"];var ul={setup(e){function t(){rt.search.applyChangeData(),M.params=rt.search.convertToParams(),W(),dt()}return(e,a)=>(l(),s("form",{onSubmit:x(t,["prevent"]),class:"ptj-filter-form"},[r("h3",null,y(d(he)("ptj-filter-form-title")),1),(l(!0),s(n,null,m(d(rt).search.cells,(e=>c((l(),i(we,{key:e.name,field:e},{default:C((()=>["id"==e.type?(l(),i(Nt,{key:0,type:"filter",field:e,parent:M.key},null,8,["field","parent"])):"flag"==e.type?(l(),i(Vt,{key:1,type:"filter",field:e},null,8,["field"])):"number"==e.type?(l(),i(Ot,{key:2,type:"filter",field:e},null,8,["field"])):"time"==e.type?(l(),i($t,{key:3,type:"filter",field:e},null,8,["field"])):"string"==e.type?(l(),i(Le,{key:4,type:"filter",field:e},null,8,["field"])):k("v-if",!0),r("a",{class:"ptj-filter-form-reset",onClick:t=>e.reset()},"x",8,cl)])),_:2},1032,["field"])),[[f,"id"!=e.type||e.meta.reference||e.meta.recursive]]))),128)),r("input",{type:"submit",value:d(he)("ptj-filter-form-btn"),class:"ptj-filter-form-submit",onClick:a[0]||(a[0]=t=>{e.$emit("close")})},null,8,pl)],40,dl))}};L("\n.error[data-v-71ada21d] {\r\n  color : red;\n}\r\n\r\n"),ul.__scopeId="data-v-71ada21d",ul.__file="presstojam/src/components/ptj-filter-form.vue";const fl={class:"ptj-pagination"},hl=["onClick"];var ml={setup(e){function t(e){return e==M.params._page??1?"ptj-pagination-active":""}return(e,r)=>(l(),s("div",fl,[(l(!0),s(n,null,m(d(rt).max_pages,(e=>(l(),s("a",{key:e,onClick:t=>{return l=e,M.params._page=l,W(),void dt();var l},class:p(t(e))},y(e),11,hl)))),128))]))},__file:"presstojam/src/components/ptj-pagination.vue"};const gl={class:"ptj-progress-bar-wrapper"},yl={class:"ptj-progress-holder"};var _l={props:{total:Number,progress:Number},setup(e){const n=e,a=t((()=>{let e=Math.floor(n.progress/n.total*100);return isNaN(e)?0:e}));return(e,t)=>(l(),s("div",gl,[r("div",yl,[r("div",{class:"ptj-progress-bar",style:u("width:"+d(a)+"px")}," ",4)]),r("span",null,y(d(a))+"%",1)]))}};L("\n.ptj-progress-holder[data-v-460b10ff] {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\n}\n.ptj-progress-bar[data-v-460b10ff] {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\n}\r\n\r\n\r\n"),_l.__scopeId="data-v-460b10ff",_l.__file="presstojam/src/components/ptj-progress-bar.vue";const vl=["onSubmit"],bl=["value"];var kl={emits:["close"],setup(t,{emit:a}){let o=e("");const u=h(new nt),g=h({total:0,progress:0});let _=0;function v(){_=g.total>0?1:2,u.clearErrors();let e=u.serialize();return M.key&&(e["--parentid"]=M.key),D.post("/data/"+M.route+"/"+M.model,e).then((e=>{let t=[],l=u.getCellByType("asset");g.total=0;for(let s in l){if(!l[s].val)continue;++g.total;const n=new Asset;n.url="/asset/"+M.model+"/"+s+"/"+e["--id"];let r=n.saveFile(l[s].val).then((()=>{++g.progress}));t.push(r)}return Promise.all(t)})).then((()=>{u.reset(),dt(),a("close")})).catch((e=>(_=0,e.json().then((e=>{const t=e.exception[0];"PressToJamCore\\Exceptions\\ValidationException"==t.type&&u.setErrors(JSON.parse(t.message)),console.log("Err response",e)})))))}return E((async()=>{await(async()=>D.post("/route/"+M.route+"/"+M.model).then((e=>{const t=new tt;t.map(e.fields),u.applyMetaRow(t);let l=[];for(let e in t.cells)if("id"==t.cells[e].type&&t.cells[e].reference){let s="/reference/"+M.model+"/"+e;l.push(t.cells[e].setReferenceOptions(s,{"--parentid":M.key}))}return Promise.all(l)})).catch((e=>console.log(e))))()})),(e,t)=>c((l(),s("form",{onSubmit:x(v,["prevent"]),class:p(["ptj-form",M.model+" "+M.state])},[c(r("div",{class:"ptj-form-error"},y(d(o)),513),[[f,d(o)]]),(l(!0),s(n,null,m(d(u).cells,(e=>(l(),i(we,{key:e.name,field:e},{default:C((()=>["asset"==e.type?(l(),i(Yt,{key:0,type:"post",field:e},null,8,["field"])):"number"==e.type?(l(),i(Ot,{key:1,type:"post",field:e},null,8,["field"])):"flag"==e.type?(l(),i(Vt,{key:2,type:"post",field:e},null,8,["field"])):"id"==e.type?(l(),i(Nt,{key:3,type:"post",field:e,parent:M.key},null,8,["field","parent"])):"time"==e.type?(l(),i($t,{key:4,type:"post",field:e},null,8,["field"])):"string"==e.type?(l(),i(Le,{key:5,type:"post",field:e},null,8,["field"])):k("v-if",!0),e.encrypted?(l(),i(we,{key:6,field:e},{default:C((()=>[j(Ce,{field:e},null,8,["field"])])),_:2},1032,["field"])):k("v-if",!0)])),_:2},1032,["field"])))),128)),r("input",{type:"submit",value:d(he)("ptj-create-form-btn"),class:"ptj-form-submit"},null,8,bl),c(j(_l,{total:d(g).total,progress:d(g).progress},null,8,["total","progress"]),[[f,1==d(_)]])],42,vl)),[[f,0==d(_)]])},__file:"presstojam/src/components/ptj-create-form.vue"};const jl=["id"];var wl={emits:["reorder"],setup(e,{emit:t}){let a,i=0,o=0;function c(e){const t=e.target;a=t,e.dataTransfer.dropEffect="move",a.style.opacity="0.4",i=e.clientX,o=e.clientY}function p(){a.style.opacity="1.0"}function u(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const t=(l=e.clientX,s=e.clientY,{x:l==i?0:l>i?1:-1,y:s==o?0:s>o?1:-1});var l,s,n;1==t.y?(n=e.target.closest(".ptj-drag-target")).nextElementSibling?n.parentNode.insertBefore(a,n.nextElementSibling):n.parentNode.append(a):-1==t.y&&function(e){e.parentNode.insertBefore(a,e)}(e.target.closest(".ptj-drag-target")),i=e.clientX,o=e.clientY}function f(e){e.preventDefault()}function h(e){e.preventDefault(),e.dataTransfer.dropEffect="move"}function g(e){e.preventDefault(),e.dataTransfer.dropEffect="move";let l=function(){let e=[];const t=a.closest(".ptj-drop-target").querySelectorAll(".ptj-drag-target");for(let l=0;l<t.length;++l)e.push({"--id":t[l].getAttribute("id"),"--sort":l+1});return e}(),s="/data/"+M.route+"/"+M.model+"/resort";D.put(s,{_rows:l}).catch((e=>console.log(e)));const n={};for(let e of l)n[e["--id"]]=e["--sort"];t("reorder",n)}return(e,t)=>(l(),s("div",{class:"ptj-drop-target",onDragover:h,onDragenter:u,onDragleave:f,onDrop:g},[(l(!0),s(n,null,m(d(rt).data,((e,t)=>(l(),s("div",{key:t,id:e.primary,class:"ptj-drag-target",draggable:"true",onDragstart:c,onDragend:p},[r("span",null,y(e.getSummary()),1)],40,jl)))),128))],32))},__file:"presstojam/src/components/ptj-sort.vue"};const xl=e=>(v("data-v-1c7fb47e"),e=e(),b(),e),Cl=xl((()=>r("span",{class:"material-icons"},"search",-1))),Sl=xl((()=>r("span",{class:"material-icons"},"sort",-1)));var Ol={setup(e){let t=q();function n(e){!function(e){const t=[];t.length=rt.data.length;for(let l in rt.data)t[e[rt.data[l].primary]-1]=rt.data[l];rt.data=t}(e)}return E((async()=>{await dt()})),F((()=>{ot()})),(e,r)=>(l(),s("div",{class:p([Map.model,Map.state])},[d($).route.perms.includes("post")?(l(),i(N,{key:0},{button:C((()=>[g(y(d(he)("ptj-repo-post")),1)])),default:C((e=>[j(kl,{onClose:e.toggleShow},null,8,["onClose"])])),_:1})):k("v-if",!0),1!=d(t).disable_filter?(l(),i(N,{key:1},{button:C((()=>[g(y(d(he)("ptj-repo-search"))+" ",1),Cl])),default:C((e=>[j(ul,{onClose:e.toggleShow},null,8,["onClose"])])),_:1})):k("v-if",!0),1!=d(t).disable_sort&&d($).sort&&d($).route.perms.includes("put")?(l(),i(N,{key:2},{button:C((()=>[g(y(d(he)("ptj-repo-sort"))+" ",1),Sl])),default:C((e=>[j(wl,{onClose:e.toggleShow,onReorder:n},null,8,["onClose"])])),_:1})):k("v-if",!0),"tree"==d(rt).component?(l(),i(bt,{key:3})):"list"==d(rt).component?(l(),i(ol,{key:4})):"table"==d(rt).component?(l(),i(il,{key:5})):k("v-if",!0),d(rt).max_pages>0?(l(),i(ml,{key:6})):k("v-if",!0)],2))}};L("\n.table[data-v-1c7fb47e], .thead[data-v-1c7fb47e], .tbody[data-v-1c7fb47e], .tr[data-v-1c7fb47e] {\r\n    width : 100%;\n}\r\n\r\n"),Ol.__scopeId="data-v-1c7fb47e",Ol.__file="presstojam/src/components/ptj-repo.vue";const Pl=["placeholder"],El=["disabled"];var Al={props:{check_str:{type:String,default:"delete"},parentid:{default:0}},emits:["close"],setup(a,{emit:i}){const o=a;let p=e(""),u=e(!0),f=t((()=>he("ptj-delete-title",{val:o.check_str}))),h=t((()=>he("ptj-delete-btn")));function m(){u.value=p.value!=o.check_str}function g(){D.delete("/data/"+M.route+"/"+M.model,{"--id":M.key}).then((e=>{M.state="parent",M.key=o.parentid.val,G()})).catch((e=>console.log(e)))}return(e,t)=>(l(),s(n,null,[r("p",null,y(d(f)),1),c(r("input",{type:"text",placeholder:a.check_str,onKeyup:m,"onUpdate:modelValue":t[0]||(t[0]=e=>w(p)?p.value=e:p=e)},null,40,Pl),[[_,d(p)]]),r("button",{disabled:d(u),onClick:g},y(d(h)),9,El)],64))},__file:"presstojam/src/components/ptj-delete.vue"};const Ul=["value"],Vl={class:"ptj-children"};var Fl={setup(e){const a=h({data:new nt,fstate:0,type:"view",show_def:!1,progress:{total:0,progress:0}});function o(){a.type="view"==a.type?"edit":"view"}let c=t((()=>"edit"==a.type?"view":"edit"));const u=async()=>{let e=q(),t=function(e){let t={};return M.to&&(t.__to=M.to),M.key&&("first"==M.key?t.__limit=1:t["--id"]=M.key),e.fields&&(t.__fields=e.fields),t}(e);return D.get("/route/"+M.route+"/"+M.model+"/primary",t).then((t=>{const l=new tt;l.map(t.fields,e.fields??[]),a.data.applyMetaRow(l)})).then((()=>D.get("/data/"+M.route+"/"+M.model+"/primary",t))).then((e=>{a.data.row=e;for(let e in a.data.cells)a.data.cells[e].change=a.data.cells[e].val})).then((e=>{for(let e in a.data.cells)if("id"==a.data.cells[e].type&&a.data.cells[e].reference){let t="/reference/"+M.model+"/"+e;a.data.cells[e].setReferenceOptions(t,{"--id":M.key})}})).catch((e=>console.log(e)))};function f(){a.fstate=a.progress.total>0?1:2,a.data.clearErrors();let e=a.data.serialize(!0);if(0!=Object.keys(e).length)return e["--id"]=M.key,D.put("/data/"+M.route+"/"+M.model,e).then((e=>{let t=[],l=a.data.getCellByType("asset");a.progress.total=0;for(let s in l){if(!l[s].val)continue;++a.progress.total;const n=new Asset;n.url="/asset/"+M.model+"/"+s+"/"+e["--id"];let r=n.saveFile(l[s].val).then((()=>{++a.progress.progress}));t.push(r)}return Promise.all(t)})).then((()=>{for(let e in a.data.cells)a.data.cells[e].val=a.data.cells[e].change})).then((()=>{o()})).catch((e=>{if(a.fstate=0,"string"!=typeof e)return e.json().then((e=>{const t=e.exception[0];"PressToJamCore\\Exceptions\\ValidationException"==t.type&&a.data.setErrors(JSON.parse(t.message))}));globalerror=e}));o()}return E((async()=>{await u()})),F((()=>{a.data=new nt,a.fstate=0,a.type="view",a.show_def=!1,a.progress={total:0,progress:0}})),(e,t)=>(l(),s(n,null,[d($).route.perms.includes("put")?(l(),s("a",{key:0,onClick:o,class:"ptj-edit-toggle"},y(d(c)),1)):k("v-if",!0),d($).route.perms.includes("delete")?(l(),i(N,{key:1,cls:"ptj-del-modal"},{button:C((()=>[g(y(d(he)("ptj-primary-delete")),1)])),default:C((e=>[j(Al,{parentid:d(a).data.parent,onClose:e.toggleShow},null,8,["parentid","onClose"])])),_:1})):k("v-if",!0),r("div",{class:p(["ptj-primary",M.model])},[(l(!0),s(n,null,m(d(a).data.cells,(e=>(l(),i(we,{key:e.name,field:e},{default:C((()=>["asset"==e.type?(l(),i(Yt,{key:0,type:d(a).type,field:e,id:d(a).data.primary},null,8,["type","field","id"])):"number"==e.type?(l(),i(Ot,{key:1,type:d(a).type,field:e},null,8,["type","field"])):"flag"==e.type?(l(),i(Vt,{key:2,type:d(a).type,field:e,id:d(a).data.primary},null,8,["type","field","id"])):"id"==e.type?(l(),i(Nt,{key:3,type:d(a).type,field:e,parent:d(a).data.parent},null,8,["type","field","parent"])):"time"==e.type?(l(),i($t,{key:4,type:d(a).type,field:e},null,8,["type","field"])):"string"==e.type?(l(),i(Le,{key:5,type:d(a).type,field:e},null,8,["type","field"])):k("v-if",!0)])),_:2},1032,["field"])))),128)),"edit"==d(a).type?(l(),s("input",{key:0,type:"submit",value:d(he)("ptj-primary-put-btn"),class:"ptj-form-submit",onClick:f},null,8,Ul)):k("v-if",!0)],2),r("div",Vl,[(l(!0),s(n,null,m(d($).route.children,(e=>(l(),i(K,{key:e,route:{model:e,state:"parent",key:M.key}},{default:C((()=>[g(y(e),1)])),_:2},1032,["route"])))),128))])],64))},__file:"presstojam/src/components/ptj-primary.vue"};const Tl={class:"ptj-account-handler"},zl=["onSubmit"],Rl=["value"],Nl=["onSubmit"],Ll=["value"],Il=["onSubmit"],Bl=["value"];var Dl={props:{actions:[]},setup(e){const t=h({state:"login",active:!0,login_data:new nt,register_data:new nt,forgot_password:new nt,globalerror:""});function a(e){t.state=e}function o(){return t.active=!1,t.globalerror="","login"==t.state?D.post("/data/"+M.route+"/"+M.model+"/login",t.login_data.serialize("login")).then((e=>{Y()})).catch((e=>{t.globalerror="Incorrect username / password"})):"forgotpassword"==t.state?D.post("/data/"+M.route+"/"+M.model+"/forgotpassword",t.forgot_password.serialize("login")).then((e=>{Y()})).catch((e=>{t.globalerror="Incorrect username / password"})):D.post("/data/"+M.route+"/"+M.model,t.register_data.serialize("post")).then((e=>{Y()})).catch((e=>{t.register_data.applyErrors(e)}))}return D.post("/route/"+M.route+"/"+M.model).then((e=>{let l=new tt;l.map(e.fields),t.register_data.applyMetaRow(l)})),D.post("/route/"+M.route+"/"+M.model+"/login").then((e=>{let l=new tt;l.map(e.fields),t.login_data.applyMetaRow(l),t.forgot_password.applyMetaRow(l)})),(e,p)=>(l(),s("div",Tl,[c(r("form",{onSubmit:x(o,["prevent"]),class:"ptj-login"},[c(r("div",{class:"ptj-form-error"},y(d(t).globalerror),513),[[f,d(t).globalerror]]),(l(!0),s(n,null,m(d(t).login_data.cells,(e=>(l(),i(we,{key:e.meta.name,field:e},{default:C((()=>[j(Le,{type:"post",field:e},null,8,["field"])])),_:2},1032,["field"])))),128)),r("input",{type:"submit",value:d(he)("ptj-account-handler-btn-login"),class:"ptj-form-submit"},null,8,Rl),d($).route.perms.includes("post")?(l(),s("a",{key:0,onClick:p[0]||(p[0]=e=>a("create"))},"Register")):k("v-if",!0),r("a",{onClick:p[1]||(p[1]=e=>a("forgotpassword"))},"Forgotten password?")],40,zl),[[f,"login"==d(t).state]]),c(r("form",{onSubmit:x(o,["prevent"]),class:"ptj-register"},[c(r("div",{class:"ptj-form-error"},y(d(t).globalerror),513),[[f,d(t).globalerror]]),(l(!0),s(n,null,m(d(t).register_data.cells,(e=>(l(),i(we,{key:e.meta.name,field:e},{default:C((()=>["number"==e.meta.type?(l(),i(Ot,{key:0,type:"post",field:e},null,8,["field"])):"flag"==e.meta.type?(l(),i(Vt,{key:1,type:"post",field:e},null,8,["field"])):"time"==e.meta.type?(l(),i($t,{key:2,type:"post",field:e},null,8,["field"])):"string"==e.meta.type?(l(),i(Le,{key:3,type:"post",field:e},null,8,["field"])):k("v-if",!0),e.encrypted?(l(),i(we,{key:4,field:e},{default:C((()=>[j(Ce,{field:e},null,8,["field"])])),_:2},1032,["field"])):k("v-if",!0)])),_:2},1032,["field"])))),128)),r("input",{type:"submit",value:d(he)("ptj-account-handler-btn-create"),class:"ptj-form-submit"},null,8,Ll),d($).route.perms.includes("login")?(l(),s("a",{key:0,onClick:p[2]||(p[2]=e=>a("login"))},"Login")):k("v-if",!0)],40,Nl),[[f,"create"==d(t).state]]),c(r("form",{onSubmit:x(o,["prevent"]),class:"ptj-register"},[c(r("div",{class:"ptj-form-error"},y(d(t).globalerror),513),[[f,d(t).globalerror]]),(l(!0),s(n,null,m(d(t).forgot_password.cells,(e=>(l(),i(we,{key:e.meta.name,field:e},{default:C((()=>[j(Le,{type:"post",field:e},null,8,["field"]),j(we,{field:e},{default:C((()=>[j(Ce,{field:e},null,8,["field"])])),_:2},1032,["field"])])),_:2},1032,["field"])))),128)),r("input",{type:"submit",value:d(he)("ptj-account-handler-btn-forgot-password"),class:"ptj-form-submit"},null,8,Bl),r("a",{onClick:p[3]||(p[3]=e=>a("login"))},"Login")],40,Il),[[f,"forgotpassword"==d(t).state]])]))},__file:"presstojam/src/components/ptj-account-handler.vue"};const Ml=r("div",null,"Loading ...",-1);var Jl={setup(e){const a=t((()=>$.component?"ptj-primary"==$.component?Fl:"ptj-repo"==$.component?Ol:"ptj-account-handler"==$.component?Dl:void 0:null));return E((()=>(X(),H()))),(e,t)=>(l(),s(n,null,[j(He),(l(),i(T,null,{default:C((()=>[r("div",{class:p([M.model,M.state])},[r("h1",null,y(d($).title),1),d(a)?(l(),i(z(d(a)),{key:0})):k("v-if",!0)],2)])),fallback:C((()=>[Ml])),_:1}))],64))},__file:"presstojam/src/components/ptj-router.vue"};const $l={class:"ptj-account-details"},ql={class:"ptj-nav"},Hl={key:0};var Xl={setup:e=>(e,t)=>(l(),s(n,null,[r("div",$l,["public"!=d(Ie).user?(l(),s("a",{key:0,class:"ptj-account-details-logout",onClick:t[0]||(t[0]=(...e)=>d(De)&&d(De)(...e))},y(d(he)("ptj-user-logout")),1)):k("v-if",!0)]),r("div",ql,[(l(!0),s(n,null,m(d(Be).cats,((e,t)=>(l(),s("div",{key:t},[e.length>1?(l(),s("span",Hl,y(t),1)):k("v-if",!0),(l(!0),s(n,null,m(e,(e=>(l(),i(K,{route:{route:e.route,model:e.model,state:e.state,key:0},key:e.route},{default:C((()=>[g(y(e.route),1)])),_:2},1032,["route"])))),128))])))),128))]),j(Jl),d(Ie).login?(l(),i(N,{key:0})):k("v-if",!0)],64))};function Yl(e={}){if(e||(e={}),!e.client)throw"Must set client settings";if(!e.client.url)throw"No URL defined for client";return D.initSettings(e.client),e.map&&M.initSettings(e.map),function(e){e&&(J=e)}(e.models),Je(e.user&&e.user.role?e.user.role:"")}function Gl(e,t){Yl(t).then((()=>$e())).then((()=>{const t=R(Xl);return t.mount(e),t})).catch((e=>{console.log(e)}))}function Wl(e,t){Yl(t).then((()=>{const t=R(Jl);return t.mount(e),t})).catch((e=>{console.log(e)}))}function Zl(e){if(!e.client)throw"Must set client settings";if(!e.client.url)throw"No URL defined for client";return D.initSettings(e.client),D}Xl.__file="presstojam/src/components/ptj-user.vue";export{Zl as getClient,Gl as runApp,Wl as runRoute};
//# sourceMappingURL=ptj.esm.js.map
