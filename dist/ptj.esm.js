import{reactive as t,computed as e,defineComponent as s,openBlock as r,createElementBlock as a,normalizeClass as l,toDisplayString as o,resolveComponent as n,createCommentVNode as p,withDirectives as h,createElementVNode as d,vModelDynamic as c,createVNode as _,vShow as m,Fragment as u,renderList as f,vModelSelect as g,vModelRadio as j,vModelCheckbox as b,vModelText as v,normalizeStyle as y,withModifiers as C,createBlock as w,createTextVNode as k,renderSlot as x,withCtx as S,pushScopeId as L,popScopeId as R,ref as V,onMounted as E,resolveDynamicComponent as U,Teleport as O,createApp as D}from"vue";let P,T,A,M={},z={},B=!0;var N={regCustomHeader(t,e){M[t]=e},regStatusHandler(t,e){z[t]=e},setURL(t){P=t},regDebug(t){B=t},run:(t,e)=>(e.mode="cors",e.cache="no-cache",e.credentials="include",e["Content-Type"]="application/json",e.headers=M,fetch(P+t,e).then((t=>{if(T=t.status,A=t.ok,!z[t.status])return 401==t.status?t.status:t.json();z[t.status](t)})).then((s=>{if(!A)throw s;if(401==T){let s=e.method;return e.method="PUT",fetch(P+"/core-switch-tokens",e).then((r=>{if(r.ok)return e.method=s,fetch(P+t,e).then((t=>{if(401==t.status)throw new Error("Issue with refresh token");if(t.ok)return t.json()}))}))}return s})).catch((t=>{throw B&&console.log(t),t}))),setDebug:t=>(t?t.__debug=!0:t={__debug:!0},t),get(t,e){if(B&&(e=this.setDebug(e)),e){const s=new URLSearchParams;let r={};for(let t in e)Array.isArray(e[t])||"object"==typeof e[t]&&null!==e[t]?r[t]=e[t]:s.append(t,e[t]);r&&s.append("graph",JSON.stringify(r)),-1==t.indexOf("?")?t+="?":t+="&",t+=s.toString()}let s={method:"GET"};return this.run(t,s)},getprimary(t,e){return this.get(t,e)},post(t,e){B&&(e=this.setDebug(e));let s={method:"POST"};return s.body=JSON.stringify(e),this.run(t,s)},put(t,e){B&&(e=this.setDebug(e));let s={method:"PUT"};return s.body=JSON.stringify(e),this.run(t,s)},patch(t,e){B&&(e=this.setDebug(e));let s={method:"PATCH"};return s.body=JSON.stringify(e),this.run(t,s)},delete(t,e){B&&(e=this.setDebug(e));let s={method:"DELETE"};return s.body=JSON.stringify(e),this.run(t,s)}};class F{constructor(s){this._meta=s,this._store=t({value:null,display:null,error:0,is_validate_on:!1}),this.val=e({get:()=>this._store.value,set:t=>{this._store.value=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.error=e({get:()=>this._store.error,set:t=>{this._store.error=t}}),this.showError=e((()=>!(!this._store.is_validate_on||!this._store.error))),this._meta.default?this._store.value=this._meta.default:"select"==this._meta.type&&(this._store.value=0)}get meta(){return this._meta}set validateon(t){this._store.is_validate_on=t}set display(t){this._store.display=t}get display(){return this._store.display?this._store.display:this._store.value}toString(){return this._store.display}toVal(){return this._store.value}setVal(t){this._store.value=t}}class I{constructor(t){this._cells={},this._references={},this._children={},this._parent,this._primary,t&&this.applyMetaRow(t)}applyMetaRow(t){t.primary&&(this._primary=new F(t.primary)),t.parent&&(this._parent=new F(t.parent));for(const e in t.fields){const s=t.fields[e];this._cells[s.name]=new F(s)}for(const e in t.references)this._references[e]=new I(t.references[e]);for(const e in t.children)this._children[e]=t.children[e]}appendPrimary(t){this._primary=new F(t)}addChild(t,e){this._children[t]||(this._children[t]=[]),this._children[t].push(e)}set row(t){if(t){this._primary&&t[this._primary.meta.name]&&this._primary.setVal(t[this._primary.meta.name]),this._parent&&t[this._parent.meta.name]&&this._parent.setVal(t[this._parent.meta.name]);for(let e in this._cells)t[e]&&this._cells[e].setVal(t[e]);for(let e in this._references)this._references[e].row=t[e];for(let e in this._children)this._children[e].row=t[e];this._parent&&this._references[this._parent.meta.reference]&&(this._parent.display=this._references[this._parent.meta.reference].getSummary());for(let t in this._cells){let e=this._cells[t].meta;e.reference&&this._references[e.reference]&&(this._cells[t].display=this._references[e.reference].getSummary())}}}get cells(){return this._cells}get parent(){return this._parent}get primary(){return this._primary}get children(){return this._children}getCell(t){return this._primary&&this._primary.meta.name==t?this._primary:this._parent&&this._parent.meta.name==t?this._parent:this._cells[t]}getSummary(){let t=[];for(let e in this._cells){const s=this._cells[e];if(s.meta.isSummary()){const e=s.display;t.push(e)}}return t.join(" ")}toString(){let t=[];for(let e in this._cells)t.push(this._cells[e].display);return t.join(" ")}serialize(t){let e={};"post"==t?this._parent&&(e[this._parent.meta.name]=this._parent.toVal()):"put"!=t&&"delete"!=t||(e[this._primary.meta.name]=this._primary.toVal());for(let t in this._cells)e[t]=this._cells[t].toVal();return e}getCellByType(t){let e={};for(let s in this._cells)this._cells[s].meta.type==t&&(e[s]=this._cells[s]);return e}}class H extends F{constructor(t){super(t),"datetime"==this._meta.atts.type?(this._store.value={min:null,max:null},this.val=e({get:()=>this._store.value,set:t=>{t.min&&(this._store.value.min=this._meta.clean(t.min)),t.max&&(this._store.value.max=this._meta.clean(t.max)),this._store.error=this._meta.validate(t)}}),this.val1=e({get:()=>this._store.value.min,set:t=>{this._store.value.min=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.val2=e({get:()=>this._store.value.max,set:t=>{this._store.value.max=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.addParam=t=>{let e={};this._store.value.min&&(e.min=this._store.value.min),this._store.value.max&&(e.max=this._store.value.max),Object.keys(e).length>0&&(t[this._meta.name]=e)}):"checkbox"==this._meta.type?(this._store.value=0,this.addParam=t=>{1==this._store.value?t[this._meta.name]=1:2==this._store.value&&(t[this._meta.name]=0)}):"select"==this._meta.type?(this._store.value=[],this.addParam=t=>{this._store.value.length>0&&(t[this._meta.name]=this._store.value)}):this.addParam=t=>{this._store.value&&(t[this._meta.name]=["%"+this._store.value+"%"])}}}class J{constructor(t){this._cells={},this._primary,this._parent,this._limit=0,this._page=0,this._fields=[],this._sort={},this._groups=[],this._children=[],this._active,this._max_pages=0,t&&this.applyMetaRow(t)}applyMetaRow(t){t.primary&&(this._primary=new F(t.primary)),t.parent&&(this._parent=new F(t.parent));for(const e in t.fields){const s=t.fields[e];this._cells[s.name]=new H(s)}}get cells(){return this._cells}initField(t){this._data.initField(t)}set fields(t){this._fields=t}get fields(){return this._fields}set limit(t){this._limit=t}get limit(){return this._limit}set sort(t){this._sort=t}get sort(){return this._sort}set page(t){this._page=t}get page(){return this._page}set groups(t){this._groups=t}get groups(){return this._groups}set children(t){this._children=t}get children(){return this._children}get primary(){return this._primary}get parent(){return this._parent}get active(){return this._active}set active(t){this._active=t}get max_pages(){return this._max_pages}set max_pages(t){this._max_pages=t}convertToParams(){let t={};this._limit&&(t._limit=this._limit),this._page&&(t._page=this._page),this._fields.length>0&&(t._fields=this._fields),Object.keys(this._sort).length>0&&(t._sort=this._sort);for(let e in this._cells){let s=this._cells[e].toVal();s&&(t[e]=s)}return JSON.stringify(t)}convertDataToParams(){let t={};for(let e in this._cells)t[e]=this._cells[e].toVal();return Object.keys(t).length>0?JSON.stringify(t):null}convertFromParams(t){const e=JSON.parse(t);e._limit&&(this._limit=e._limit),e._fields&&(this._fields=e._fields),e.hasOwnProperty("_page")&&(this._page=e._page),e.hasOwnProperty("_sort")&&(this._sort=e._sort);for(const t in this._cells)e.hasOwnProperty(t)&&this._cells[t].setVal(e[t])}convertToAPIParams(t){let e={};this._limit&&(e.__limit=this._limit),this._page&&(e.__page=this._page*this._limit),this._fields.length>0&&(e.__fields=this._fields),Object.keys(this._sort).length>0&&(e.__sort=this._sort);for(let t in this._cells)this._cells[t].addParam(e);return"get"==t||"post"==t?this._parent&&this._parent.toVal()&&(e[this._parent.meta.name]=this._parent.toVal()):"login"!=t&&(e[this._primary.meta.name]=this._primary.toVal()),Object.keys(e).length?e:null}}const q={1:"too small",2:"too large",3:"contains incorrect characters",4:"doesn't contain required characters",5:"not unique"};var X={getError:function(t){return q[t]}};class K{constructor(){this._min,this._max,this._has=[],this._has_not=[],this._errors={OK:0,MIN_VALUE:1,MAX_VALUE:2,HAS:3,HAS_NOT:4}}set min(t){this._min=t}set max(t){this._max=t}set has(t){this._has.push(t)}set nothas(t){this._has_not.push(t)}validateSize(t){return t<this._min?this._errors.MIN_VALUE:t>this._max?this._errors.MAX_VALUE:this._errors.OK}validate(t){let e;if(isNaN(t)){const s=t?t.length:0;e=this.validateSize(s)}else e=this.validateSize(t);if(e!=this._errors.OK)return e;for(let e of this._has_not)if(t.match(e))return this._errors.HAS_NOT;if(0==this._has.length)return this._errors.OK;for(let e of this._has)if(t.match(this._has))return this._errors.OK;return this._errors.HAS}}class Y{constructor(s,r=null){if(this._name=s,this._type="",this._is_primary=!1,this._is_parent=!1,this._valid=1,this._atts={},this._confirm=!1,this._readonly=!1,this._placeholder="",this._conditions,this._link="",this._reference="",this._error=0,this._label="",this._on=!0,this._store=t({summary:0,options:null}),this._default=null,this._validator=new K,this._multiple=!1,this.summary=e({get:()=>this._store.summary,set:t=>{this._store.summary=t}}),this.options=e({get:()=>this._store.options,set:t=>{this._store.options=t}}),r){for(let t in r)if("summary"==t)this._store.summary=r[t];else{if("field"==t||"validation"==t)continue;this[t]=r[t]}if(r.field)for(let t in r.field)"summary"==t?this._store.summary=r.field[t]:this[t]=r.field[t];if(r.validation)for(let t in r.validation)this._validator[t]=r.validation[t]}if(!this._reference&&"select"==this._type){this._store.options=[];try{for(let t of this._atts.options)this._store.options.push({key:t,value:t})}catch(t){console.log("options not set for ",this._name)}}}set confirm(t){this._confirm=t}set readonly(t){this._readonly=t}set placeholder(t){this._placeholder=t}set atts(t){this._atts=t}set default(t){this._default=t}set asset(t){this._asset=t}set conditions(t){this._conditions=t}set link(t){this._link=t}set name(t){this._name=t}set type(t){this._type=t}set multiple(t){this._multiple=t}set is_primary(t){this._is_primary=t}set is_parent(t){this._is_parent=t}set reference(t){this._reference=t}set error(t){this._error=t}set label(t){this._label=t}set on(t){this._on=t}get name(){return this._name}get type(){return this._type}get on(){return this._on}get isprimary(){return this._is_primary}get required(){return this._min>0}get readonly(){return this._readonly}get placeholder(){return this._placeholder}get default(){return this._default}get atts(){return this._atts}get conditions(){return this._conditions}get link(){return this._link}get isparent(){return this._is_parent}get multiple(){return this._multiple}get confirm(){return this._confirm}get reference(){return this._reference}get asset(){return this._asset}get error(){return this._error?isNaN(this._error)?this._error:X.getError(this._error):""}get label(){return this._label}isSummary(){return this._store.summary}saveAsset(t){if(this._asset){if(this.val)return this._asset.saveFile(this.val,t)}return Promise.resolve()}setReferenceOptions(t,e){return this._store.options=[],N.get(t,e).then((t=>{for(let e in t.__data)0!==e.indexOf("__")&&this._store.options.push({key:t.__data[e].id,value:t.__data[e].value})})).catch((t=>{console.log(t)}))}clean(t){return"checkbox"==this._type?t?1:0:t}validate(t){return this._validator.validate(t)}exp(){return{name:this._name,type:this._type,atts:this._atts}}calcValue(t){return t||""}}class W{constructor(){this._size=0,this._blob=null,this._uploaded=!1,this._chunk_size=0,this._url,this._key=0,this._key_field}set chunk_size(t){this._chunk_size=t}set blob(t){this._blob=t}set url(t){this._url=t}set key(t){this._key=t}set keyfield(t){this._key_field=t}get blob(){return this._blob}get size(){return this._size}get uploaded(){return this._uploaded}get chunk_size(){return this._chunk_size}get url(){return this._url}getChunk(t){const e=0==this._chunk_size?0:t*this._chunk_size;let s=0==this._chunk_size?this._size:(t+1)*this._chunk_size;s>this._size&&(s=this._size);const r=new DataView(this._blob,e,s-e);let a=[];for(let t=0,e=r.byteLength;t<e;++t)a.push(r.getInt8(t));return a.join("")}loadFile(t){let e={};return e[this._key_field]=t,N.get(this._url,e).catch((t=>{alert(t)}))}delFile(t){let e={};return e[this._key_field]=t,N.delete(this._url,e).catch((t=>{alert(t)}))}saveFile(t,e){return this._size=t.size,new Promise(((e,s)=>{const r=new FileReader;let a=this;r.onload=function(t){a.blob=t.target.result,e(r.result)},r.onerror=s,r.readAsArrayBuffer(t)})).then((()=>{let t=[],s=0==this.chunk_size?1:Math.ceil(this.size/this.chunk_size);for(let r=0;r<s;++r){const s={};s.__chunk=r,s.__blob=this.getChunk(r),s[this._key_field]=e,t.push(N.put(this._url,s))}return Promise.all(t)}))}}class ${constructor(){this._fields={},this._parent,this._primary,this._references={},this._children={}}set field(t){this._fields[t.name]=t}get fields(){return this._fields}addReference(t,e){this._references[t]=e}addChild(t,e){this._children[t]=e}get references(){return this._references}get children(){return this._children}get parent(){return this._parent}get primary(){return this._primary}map(t){for(let e in t)t[e].is_primary?this._primary=new Y(e,t[e]):t[e].is_parent?this._parent=new Y(e,t[e]):this._fields[e]=new Y(e,t[e])}exportFields(t,e){let s=this._states[t].fields;e.fields=[];for(let t in s)(0==this._limit_fields.length||this._limit_fields.contains(t))&&e.fields.push(s[t])}exportToStore(t){t.fields=this._fields}getCellByType(t){let e={};for(let s in this._fields)this._fields[s].type==t&&(e[s]=this._fields[s]);return e}}let G={orig:0,target:0,state:null,key:null,to:null,model:null,end:null,param_str:{}};var Q={updateIntention:function(t,e){!function(){for(let t in G)G[t]=null}(),G.orig=parseInt(t);for(let t in e)G[t]=e[t]},convertMaps:function(t){let e=G.orig+G.target;e<0?t.unshift({...t[i]}):e>=t.length&&t.push({...t[t.length-1]});for(let s in G)null!==G[s]&&("_end"==s?t.splice(e+1,t.length):t[e][s]=G[s])}};class Z{constructor(e){this._label="",this._title="",this._component="",this._rawcomponent="",this._actions=[],this._next=null,this._index=0,this._primary_key_name="",this._parent_key_name="",this._circular="",this._model="",this._siblings=[],this._children=[],this._groups=[],this._classes="",this._states={},this._default_state="",this._settings={hide_actions:{}},this._meta_row=new $,this._global_meta_row=new $,this._data_template=null,this._data=null,this._global_data,this._indexes=null,this._stage=e,this._states,this._to,this._store=t({})}get currentstate(){return this._active_state?this._active_state:this._default_state}get fields(){return this._fields}get default_state(){return this._default_state}get classes(){return this._name.replace("_","-")+" "+this._state}set to(t){this._to=t}applySettings(t){this._settings=t,this._settings||(this._settings={}),this._settings.hide_actions||(this._settings.hide_actions={})}snakeCase(t){return t.replace("-","_")}buildMetaRow(t,e){this._meta_row=new $;let s=t.states[e].fields;if(s){let e={};for(let r of s)e[r]=t.fields[r];s=e}else s=t.fields;this._meta_row.map(s);let r={};for(let e in t.fields)(t.fields[e].is_primary||t.fields[e].is_parent)&&(r[e]=t.fields[e]);this._global_meta_row.map(r);let a=t.to;for(;a;){let t=new $;t.map(a.fields),this._meta_row.addReference(a.model,t),a=a.to}}initState(t,e){e||(e=t.default_state),this._model=t.model,this._primary_key_name=t.primarykey,this._parent_key_name=t.parentkey,this._children=t.children,this._siblings=t.siblings,this._circular=t.circular,this._states=t.states,this._default_state=t.default_state,this.buildMetaRow(t,e),this._children=t.children,this._siblings=t.siblings,this._states=t.states}loadURL(t){let e="/"+this._model;return"getprimary"!=t&&"put"!=t||(e+="-primary"),e}saveURL(){return"/"+this._model}initDataTemplate(t){this._to=t.to,this._data_template=new J(this._meta_row),"get"==t.state?"first"==t.key?this._data_template.limit=1:t.key&&this._data_template.parent.setVal(t.key):"post"==t.state?(this._global_data=new I(this._global_meta_row),t.key&&(this._data_template.parent.setVal(t.key),this._global_data.parent.setVal(t.key))):"login"!=t.state&&this._data_template.primary.setVal(t.key),t.param_str&&this._data_template.convertFromParams(t.param_str),this._settings.groups&&(this._data_template.groups=this._settings.groups),this._settings.limit&&(this._data_template.limit=this._settings.limit)}load(t){if("get"==t){let e=this._data_template.convertToAPIParams(t);return this._to&&(e||(e={}),e.__to=this._to),this._settings.fields&&(e||(e={}),e.__fields=this._settings.fields),this._data_template.limit>0?N.get(this.loadURL("get")+"-count",e).then((t=>{this._data_template.max_pages=Math.ceil(t.count/this._data_template.limit)})).then((()=>N.get(this.loadURL("get"),e))).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data=[],this.mapRepoData(t),t})):N.get(this.loadURL("get"),e).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data=[],this.mapRepoData(t),t}))}if("getprimary"==t||"put"==t){let e=this._data_template.convertToAPIParams(t);return this._to&&(e.__to=this._to),N.get(this.loadURL(t),e).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data={},this.mapData(t),t})).then((e=>{if(this._global_data=new I(this._global_meta_row),this._global_data.row=e,"put"==t)return this.setReferences()}))}return"post"==t?(this._data=new I(this._meta_row),this._data_template.parent&&this._data.parent.setVal(this._data_template.parent.toVal()),this.setReferences()):(this._data=new I(this._meta_row),Promise.resolve())}reload(){let t=this._data_template.convertToAPIParams("get");return this._to&&(t.__to=this._to),N.get(this.loadURL("get")+"-count",t).then((t=>{this._data_template.max_pages=Math.ceil(t.count/this._data_template.limit)})).then((()=>N.get(this.loadURL("get"),t))).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data=[],this.mapRepoData(t),t})).then((()=>this._store.data=this._data))}rLoadObj(t){let e=new I(this._meta_row);if(e.row=t,this._circular&&t[this._model]&&t[this._model])for(const s in t[this._model])e.addChild(this._model,this.rLoadObj(t[this._model][s]));for(const s in this._active_children){const r=this._active_children[s];if(t[r])for(const s in t[r])e.addChild(r,this.rLoadObj(t[r][s]))}return e}indexData(t){let e={};for(const s in t){const r=t[s];for(let t of this._data_template.groups){t=this.snakeCase(t),e[t]||(e[t]={});let a=r.getCell(t).toVal();e[t][a]||(e[t][a]={display:"",contains:[]},e[t][a].display=r.getCell(t).display),e[t][a].contains.push(s)}}return e}submit(t){let e=this._data.serialize(t);return N[t](this.saveURL(),e).then((e=>{if("SUCCESS"!=e.__status)throw{message:e.statusText};"post"==t&&this._global_data.primary.setVal(e[this._global_meta_row.primary.name])})).then((()=>{let t=[],e=this._store.data.getCellByType("asset");this._store.progress.total=0;for(let s in e){if(!e[s].toVal())continue;++this._store.progress.total;const r=new W;r.url=this.saveURL()+"-"+s,r.keyfield=this._store.data.primary.name;let a=r.saveFile(e[s].toVal(),this._store.data.primary.toVal()).then((()=>{++this._store.progress.progress}));t.push(a)}return Promise.all(t)}))}setReferences(){let t=[];const e=this._meta_row.getCellByType("select");for(let s in e)if(e[s].reference){let r={};this._global_meta_row.parent&&(r[this._global_meta_row.parent.name]=this._global_data.parent.toVal()),t.push(e[s].setReferenceOptions("/"+this._model+"-"+s.replace("_","-")+"-reference",r))}return Promise.all(t)}mapRepoData(t){this._data=[];for(const e in t.__data){const s=this.rLoadObj(t.__data[e]);this._data.push(s)}this._data_template.groups.length>0&&(this._indexes=this.indexData(this._data))}mapData(t){this._data=new I(this._meta_row),this._data.row=t}buildLink=t=>e=>{e&&(t.key=e);for(let e in this._settings.change_intention)t[e]=this._settings.change_intention[e];return Q.updateIntention(this._stage,t),Promise.resolve()};exportToStore(t){return this._store.actions=[],this._store.stage=this._stage,this._store.component="",this._store.rawcomponent="",this._store.title=this._states[t].title,this._store.label=this._states[t].label,this._store.action=t,this._store.method=this._store.action,this._store.submiturl=this.saveurl,this._store.model=this._model,this._store.classes=this._model+" "+t,this._store.groups=this._data_template.groups,this._store.settings||(this._store.settings={}),this._settings.disable_filter&&(this._store.disable_filter=!0),this._settings.disable_selectfields&&(this._store.disable_selectfields=!0),{get:()=>{if(this._store.rawcomponent=this._data_template.groups.length>0?"ptj-list":this._circular||this._data_template.children.length>0?"ptj-tree":"ptj-table",this._store.component="ptj-repo",this._store.index=this._model+"-get",this._store.submiturl=this.loadurl,this._store.reload=()=>{this.buildLink({param_str:this._data_template.convertToParams()})().then((()=>{this.reload()}))},this._meta_row.parent&&!this._settings.hide_actions.parent&&this._store.actions.push({r:this.buildLink({model:this._meta_row.parent.reference,state:"getprimary"}),n:"go back"}),this._states.post&&!this._settings.hide_actions.post&&this._store.actions.push({r:this.buildLink({state:"post"}),n:this._states.get.actions.post}),this._states.getprimary?this._store.next=this.buildLink({param_str:"",state:"getprimary"}):this._states.put&&(this._store.next=this.buildLink({param_str:"",state:"put"})),this._store.siblings=[],!this._settings.hide_actions.children)for(let t of this._siblings)this._store.siblings.push({r:this.buildLink({model:t.name,param_str:""}),n:t.label});this._data_template.limit>0&&(this._store.setPage=t=>{this._store.data_template.page=t,this.buildLink({param_str:this._data_template.convertToParams()})().then((()=>{this.reload()}))})},getprimary:()=>{if(this._store.component="ptj-single-item",this._store.actions=[],this._store.index=this._model+"-getprimary",this._meta_row.parent&&!this._settings.hide_actions.parent&&this._store.actions.push({r:this.buildLink({key:this._data.parent.toVal(),state:"get"}),n:this._states.getprimary.actions.get}),this._states.put&&!this._settings.hide_actions.put&&this._store.actions.push({r:this.buildLink({state:"put"}),n:this._states.getprimary.actions.put}),this._states.delete&&!this._settings.hide_actions.delete&&this._store.actions.push({r:()=>{if(confirm("Are you sure you want to delete this record and all associated children?")){let t={};return t[this._meta_row.primary.name]=this._data.primary.toVal(),N.delete(this.saveURL(),t).then((()=>{let t={state:"get"};return this._global_data.parent&&(t.key=this._global_data.parent.toVal()),this.buildLink(t)()}))}return Promise.reject("Delete cancelled")},n:this._states.getprimary.actions.delete}),this._store.children=[],!this._settings.hide_actions.children)for(let t of this._children)this._store.children.push({r:this.buildLink({state:"get",model:t.name}),n:t.label})},post:()=>{this._store.component=this._states.login?"ptj-account-handler":"ptj-form",this._store.index=this._model+"-post",this._store.progress={total:0,progress:0},this._store.actions=[],this._states.login&&this._store.actions.push({r:this.buildLink({state:"login"}),n:this._states.post.actions.login}),this._store.next=()=>this.buildLink({state:"getprimary",key:this._global_data.primary.toVal()})(),this._store.submit=()=>this.submit("post")},put:()=>{if(this._store.component="ptj-form",this._store.progress={total:0,progress:0},this._store.index=this._model+"-put",this._store.actions=[],this._states.getprimary)this._store.next=this.buildLink({state:"getprimary"});else{let t={state:"get"};this._global_data.parent&&(t.key=this._global_data.parent.toVal()),this._store.next=this.buildLink(t)}this._store.submit=()=>this.submit("put")},login:()=>{this._store.component="ptj-account-handler",this._store.index=this._model+"-login",this._store.progress={total:0,progress:0},this._store.submit=()=>{let t=this._data.serialize("login");return N.post(this.saveURL()+"-login",t).then((t=>{if("SUCCESS"!=t.__status)throw{message:t.statusText};return t}))},this._store.actions=[],this._states.post&&this._store.actions.push({r:this.buildLink({state:"post"}),n:this._states.login.actions.post})}}[t](),this._store.data=this._data,this._store.indexes=this._indexes,this._store.data_template=this._data_template,this._meta_row.exportToStore(this._store),this._store}}class tt{constructor(e){this._settings={},this._map,this._previous_map,this._response,this._instance,this._stage=e,this.store=t({stage:e})}get map(){return this._map}set map(t){this._previous_map={...this._map},0==Object.keys(this._previous_map).length&&(this._previous_map=null),this._map=t.copy()}get stage(){return this.store.stage}injectCustomSettings(t){this._settings=t}initModel(t,e){if(e&&e.model==t.model)return Promise.resolve();{e=null;let s=t.model?"/route-"+t.model:"/route-core-default",r={};return t.to&&(r.__to=t.to),N.get(s,r).then((e=>{if("SUCCESS"!=e.__status)throw new Error(e);this._response=e,t.state||(t.state=this._response.default_state),this._instance=new Z(this.store.stage),this._settings&&this._settings[t.state]&&this._instance.applySettings(this._settings[t.state])}))}}init(){return this.initModel(this._map,this._previous_map).then((()=>{this._previous_map&&this._previous_map.state==this._map.state||(this._instance.initState(this._response,this._map.state),this._previous_map=null)})).then((()=>{if(!this._previous_map||this._previous_map.key!=this._map.key||this._previous_map.param_str!=this._map.param_str)return this._previous_map=null,this._instance.initDataTemplate(this._map)})).then((()=>{this._previous_map&&this._previous_map.to!=this._map.to&&(this._instance.to=this._map.to,this._previous_map=null)})).then((()=>{if(!this._previous_map)return this._instance.load(this._map.state)}))}exportToStore(){return this._instance.exportToStore(this.map.state)}}const et={post:"-create",put:"-update",delete:"-delete",login:"-login",logout:"-logout",getprimary:"-primary",get:""};class st{constructor(){this._model,this._state="",this._key=0,this._to,this._param_str}set model(t){this._model=t}get model(){return this._model}set state(t){this._state=t}get state(){return this._state}set key(t){this._key=t}get key(){return this._key}set to(t){this._to=t}get to(){return this._to}set param_str(t){this._param_str=t}get param_str(){return this._param_str}copy(){return{model:this._model,state:this._state,key:this._key,to:this._to,param_str:this._param_str}}convertToURL(){let t=this._model,e=this._state,s=this._key,r=this._to,a=t+et[e];return s&&(a+="-"+s),r&&(a+="-to-"+r),a}convertFromURL(t){if(!t)return;let e=t.split("-to-");e.length>1&&(this._to=e[1],t=e[0]),e=t.split("-");let s=e[e.length-1];if("first"==s?(this._key=s,e.pop()):isNaN(s)||(this._key=s,e.pop()),0==e.length)throw new Error("Can't convert this url string: "+t);for(let t in et)if(et[t]=="-"+e[e.length-1]){this._state=t,e.pop();break}this._model=e.join("-")}}let rt=[],at=null,it="/";function lt(){let t=new st;return rt.push(t),t}var ot={trigger:function(t){at=t},resetMaps:function(){rt=[]},createMap:lt,convertToURL:function(){let t=[];for(let e of rt)t.push(e.convertToURL());const e=new URL(window.location.protocol+"//"+window.location.host+it),s=t.join("/"),r=new URL(s,e);for(let t in rt)rt[t].param_str&&r.searchParams.set("stage_"+t,rt[t].param_str);return r},convertFromURL:function(t){let e=t.pathname.replace(it,"");e=e.replace(/^\/+|\/+$/g,"");let s=e.split("/");rt=[];for(let t in s){lt().convertFromURL(s[t])}const r=t.searchParams;for(let t in rt){const e=r.get("stage_"+t);e&&(rt[t].param_str=e)}at&&at()},setBase:function(t){t=t.replace(/^\/+|\/+$/g,""),it="/"+t+"/"},getMaps:function(){return rt}};let nt;function pt(t){t||(t=new URL(window.location.href)),nt&&nt(t,window.location.search)}window.onpopstate=function(t){pt(new URL(document.location.href))};var ht={setRoute:function(t,e=""){window.history.pushState({name:t.pathname},document.title,t),pt(t)},hardSetRoute:function(t){window.location=t},runRoute:pt,regCallback:function(t){nt=t},softRoute:function(t,e=""){window.history.pushState({name:t.pathname},document.title,t)}};let dt=t({models:[],profile:null}),ct={},_t=[],mt=-1;function ut(t,e){let s=new tt(e);return s.map=t,ct[t.model]&&s.injectCustomSettings(ct[t.model]),_t[e]=s,_t[e]}function ft(){mt=-1;let t=ot.getMaps();if(0==t.length)throw new Error("Error with controller run, no maps created");dt.models=[];let e=[];_t.length>t.length&&_t.splice(t.length,_t.length-t.length);for(let s in t){const r=t[s];let a,i;a=s>=_t.length||_t[s].name!=r.model?ut(r,s):_t[s],ct&&ct[r.model]&&a.injectCustomSettings(ct[r.model]),i=a.init().catch((t=>console.log(t))),e.push(i)}Promise.all(e).then((()=>{for(let t of _t)dt.models.push(t.exportToStore())})).catch((t=>{console.log(t)}))}ot.trigger((()=>{ft()})),ht.regCallback(ot.convertFromURL);var gt={store:dt,models:_t,setSettings:function(t){if(t.client){if(N.setURL(t.client.url),t.client.custom_headers)for(let e in t.client.custom_headers)N.regCustomHeader(e,t.client.custom_headers[e]);t.client.debug&&N.regDebug(!0),N.regStatusHandler(403,(function(){alert("Page not found")}))}t.mapper&&t.mapper.base&&ot.setBase(t.mapper.base),t.models&&(ct=t.models)},initProfile:function(){return N.get("/core-check-user").then((t=>(dt.profile=t.__profile,dt.profile)))},assumeRole:function(t){return N.post("/core-assume-role",{role:t}).then((t=>(dt.profile=t.__profile,dt.profile)))},removeRole:function(){return N.post("/core-remove-role").then((t=>(dt.profile=t.__profile,dt.profile)))},run:ft,buildModel:ut,buildLink:function(t=!1){ot.resetMaps();let e=[];for(let t in _t){let s=_t[t];e.push(s.map)}Q.convertMaps(e);for(const t of e){let e=ot.createMap();for(let s in t)e[s]=t[s]}let s=ot.convertToURL();t?ht.softRoute(s):ht.setRoute(s)},runLink:function(){ot.runRoute()},runData:function(t=null){t||(t=new URL(window.location.href)),ot.convertFromURL(t)},reloadFromBase:function(){ot.resetMaps();let t=ot.convertToURL();ht.setRoute(t)},getStore:function(){return dt.models[mt]},next:function(){++mt},runRoute:function(t,e,s){return N[t](e,s)}};let jt={"ptj-account-details-logout":"ptj-account-details-logout","ptj-account-handler":"ptj-account-handler","ptj-breadcrumbs":"ptj-breadcrumbs","ptj-card":"ptj-card","ptj-card-row":"ptj-card-row","ptj-card-label":"ptj-card-label","ptj-card-value":"ptj-card-value","ptj-form":"ptj-form","ptj-form-title":"ptj-form-title","ptj-form-error":"ptj-form-error","ptj-form-group":"ptj-form-group","ptj-form-submit":"ptj-form-submit","ptj-root":"ptj-root","ptj-tabs":"ptj-tabs","ptj-tabs-card":"ptj-tabs-card","ptj-tabs-tab":"ptj-tabs-tab","ptj-repo":"ptj-repo","ptj-nav":"ptj-nav","ptj-nav-link":"ptj-nav-link","ptj-single-item":"ptj-single-item","ptj-single-item-row":"ptj-single-item-row","ptj-single-item-label":"ptj-single-item-label","ptj-single-item-value":"ptj-single-item-value","ptj-single-item-actions":"ptj-single-item-actions","ptj-single-item-children":"ptj-single-item-children","ptj-widget-window":"ptj-widget-window","ptj-widget-window-header":"ptj-widget-window-header","ptj-widget-window-title":"ptj-widget-window-title","ptj-widget-window-toggle":"ptj-widget-window-toggle","ptj-widget-window-body":"ptj-widget-window-body","ptj-repo-header-title":"ptj-repo-header-title","ptj-repo-header-actions":"ptj-repo-header-actions","ptj-tree":"ptj-tree","ptj-form-row":"ptj-form-row","ptj-form-input-row":"ptj-form-input-row","ptj-form-input-label":"ptj-form-input-label","ptj-form-input":"ptj-form-input","ptj-table":"ptj-table","ptj-table-header":"ptj-table-header","ptj-table-header-cell":"ptj-table-header-cell","ptj-table-row":"ptj-table-row","ptj-table-cell":"ptj-table-cell","ptj-table-cell-sortable":"ptj-table-cell-sortable","ptj-form-confirm-row":"ptj-form-confirm-row","ptj-form-confirm-label":"ptj-form-confirm-label","ptj-form-confirm":"ptj-form-confirm","ptj-pagination":"ptj-pagination","ptj-filter-form":"ptj-filter-form","ptj-filter-form-group":"ptj-filter-form-group","ptj-filter-form-submit":"ptj-filter-form-submit","ptj-form-select-row":"ptj-form-select-row","ptj-form-select-label":"ptj-form-select-label","ptj-form-select":"ptj-form-select","ptj-tree-node":"ptj-tree-node","ptj-tree-node-row":"ptj-tree-node-row","ptj-selectfields":"ptj-selectfields","ptj-selectfields-checkbox":"ptj-selectfields-checkbox","ptj-selectfields-label":"ptj-selectfields-label","ptj-form-radio-row":"ptj-form-radio-row","ptj-form-radio-label":"ptj-form-radio-label","ptj-form-radio-option-label":"ptj-form-radio-option-label","ptj-checkbox-row":"ptj-checkbox-row","ptj-checkbox-label":"ptj-checkbox-label","ptj-checkbox":"ptj-checkbox","ptj-form-textarea-row":"ptj-form-textarea-row","ptj-form-textarea-label":"ptj-form-textarea-label","ptj-form-textarea":"ptj-form-textarea","ptj-form-asset-row":"ptj-form-asset-row","ptj-form-asset-label":"ptj-form-asset-label","ptj-form-asset":"ptj-form-asset","ptj-progress-bar-wrapper":"ptj-progress-bar-wrapper","ptj-progress-bar-holder":"ptj-progress-bar-holder","ptj-progress-bar":"ptj-progress-bar","ptj-error":"ptj-error","ptj-filter-form-time-row":"ptj-filter-form-time-row","ptj-filter-form-time-label":"ptj-filter-form-time-label","ptj-filter-form-time-1":"ptj-filter-form-time-1","ptj-filter-form-time-2":"ptj-filter-form-time-2","ptj-filter-form-checkbox-row":"ptj-filter-form-checkbox-row","ptj-filter-form-checkbox-label":"ptj-filter-form-checkbox-label","ptj-filter-form-checkbox":"ptj-filter-form-checkbox","ptj-account-details-logout":"ptj-account-details-logout","ptj-accounthandler":"ptj-accounthandler","ptj-list":"ptj-list"};var bt={regClass:function(t,e){jt[t]=e},getClass:function(t){return jt[t]}},vt=s({name:"ptj-error",props:{error:[Number,String]},setup:()=>({Class:bt})});function yt(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===s&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}yt("\n.error {\r\n  color : red;\n}\r\n"),vt.render=function(t,e,s,i,n,p){return r(),a("p",{class:l(t.Class.getClass("ptj-error"))},o(t.error),3)},vt.__file="presstojam/src/components/ptj-error.vue";var Ct=s({name:"ptj-input",props:{field:Object},setup:()=>({Class:bt}),components:{"ptj-error":vt}});const wt=["name","type","readonly"];Ct.render=function(t,e,s,i,u,f){const g=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-input-row")+" "+t.field.meta.name)},["hidden"!=t.field.meta.atts.type?(r(),a("label",{key:0,class:l(t.Class.getClass("ptj-form-input-label"))},o(t.field.meta.label),3)):p("v-if",!0),h(d("input",{class:l(t.Class.getClass("ptj-form-input")),name:t.field.meta.name,type:t.field.meta.atts.type,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),onBlur:e[1]||(e[1]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly},null,42,wt),[[c,t.field.val]]),h(_(g,{error:t.field.error},null,8,["error"]),[[m,t.field.showError]])],2)},Ct.__file="presstojam/src/components/ptj-form-input.vue";var kt=s({name:"ptj-confirm",props:{field:Object},data:()=>({cval:""}),setup:()=>({Class:bt}),computed:{name(){return this.field.name+"_confirm"},error(){if(this.isvalidateon)return this.field.val==this.cval?"":"Doesn't match "+this.field.name}},components:{"ptj-error":vt}});const xt=["name","type"];kt.render=function(t,e,s,i,p,u){const f=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-confirm-row"))},[d("label",{class:l(t.Class.getClass("ptj-form-confirm-label"))},o(t.field.meta.label),3),h(d("input",{class:l(t.Class.getClass("ptj-form-confirm")),name:t.name,type:t.field.meta.atts.type,"onUpdate:modelValue":e[0]||(e[0]=e=>t.cval=e),onBlur:e[1]||(e[1]=e=>t.field.setValidateOn())},null,42,xt),[[c,t.cval]]),h(_(f,{error:t.error},null,8,["error"]),[[m,t.error]])],2)},kt.__file="presstojam/src/components/ptj-form-confirm.vue";var St=s({props:{field:Object},setup:t=>({Class:bt}),components:{"ptj-error":vt}});const Lt=["readonly","name","multiple"],Rt=d("option",{value:"0",selected:"",disabled:""},"Select Option",-1),Vt=["value"];St.render=function(t,e,s,i,p,c){const j=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-select-row"))},[d("label",{class:l(t.Class.getClass("ptj-form-select-label"))},o(t.field.meta.label),3),h(d("select",{class:l(t.Class.getClass("ptj-form-select")),"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),readonly:t.field.meta.readonly,name:t.field.meta.name,multiple:t.field.meta.multiple},[Rt,(r(!0),a(u,null,f(t.field.meta.options,(t=>(r(),a("option",{key:t.key,value:t.key},o(t.value),9,Vt)))),128))],10,Lt),[[g,t.field.val]]),h(_(j,{error:t.field.error},null,8,["error"]),[[m,t.field.showError]])],2)},St.__file="presstojam/src/components/ptj-form-select.vue";var Et=s({name:"ptj-radio",props:{field:Object},setup:()=>({Class:bt}),data:()=>({isvalidateon:!1}),methods:{setValidateOn(){this.isvalidateon=!0}},components:{"ptj-error":vt}});const Ut=["name","value"];Et.render=function(t,e,s,i,p,c){const g=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-radio-row"))},[d("label",{class:l(t.Class.getClass("ptj-form-radio-label"))},o(t.field.label),3),(r(!0),a(u,null,f(t.field.options,(s=>(r(),a("div",{key:s},[d("label",{class:l(t.Class.getClass("ptj-form-radio-option-label"))},o(s.option),3),h(d("input",{name:t.cfield.name,type:"radio",value:s.value,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e)},null,8,Ut),[[j,t.field.val]])])))),128)),h(_(g,{error:t.field.error},null,8,["error"]),[[m,t.field.error]])],2)},Et.__file="presstojam/src/components/ptj-form-radio.vue";var Ot=s({name:"ptj-checkbox",props:{field:Object},setup:()=>({Class:bt}),components:{"ptj-error":vt}});const Dt=["name"];Ot.render=function(t,e,s,i,p,c){const u=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-checkbox-row"))},[d("label",{class:l(t.Class.getClass("ptj-checkbox-label"))},o(t.field.meta.label),3),h(d("input",{class:l(t.Class.getClass("ptj-checkbox")),type:"checkbox","true-value":1,"false-value":0,name:t.field.meta.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e)},null,10,Dt),[[b,t.field.val]]),h(_(u,{error:t.field.error},null,8,["error"]),[[m,t.field.showError]])],2)},Ot.__file="presstojam/src/components/ptj-form-checkbox.vue";var Pt=s({name:"ptj-textarea",props:{field:Object},setup:()=>({Class:bt}),components:{"ptj-error":vt}});const Tt=["name","readonly","data-html"];Pt.render=function(t,e,s,i,p,c){const u=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-textarea-row")+" "+t.field.meta.name.replace("_","-"))},[d("label",{class:l(t.Class.getClass("ptj-form-textarea-label"))},o(t.field.meta.label),3),h(d("textarea",{class:l(t.Class.getClass("ptj-form-textarea")),name:t.field.meta.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),readonly:t.field.meta.readonly,"data-html":t.field.meta.atts.html},null,10,Tt),[[v,t.field.val]]),h(_(u,{error:t.field.error},null,8,["error"]),[[m,t.field.error]])],2)},Pt.__file="presstojam/src/components/ptj-form-textarea.vue";var At=s({name:"ptj-asset-field",props:{field:{type:Object,required:!0}},setup:()=>({Class:bt}),methods:{setFile(t){t.target.files.length>0?this.field.val=t.target.files[0]:this.field.val=null,this.field.validateon=!0}},components:{"ptj-error":vt}});const Mt=["name"];At.render=function(t,e,s,i,p,c){const u=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-form-asset-row"))},[d("label",{class:l(t.Class.getClass("ptj-form-asset-label"))},o(t.field.meta.label),3),d("input",{class:l(t.Class.getClass("ptj-form-asset")),ref:"input",onChange:e[0]||(e[0]=(...e)=>t.setFile&&t.setFile(...e)),name:t.field.meta.name,type:"file"},null,42,Mt),h(_(u,{error:t.field.error},null,8,["error"]),[[m,t.field.showError]])],2)},At.__file="presstojam/src/components/ptj-form-asset.vue";var zt=s({name:"ptj-progress-bar",props:{total:Number,progress:Number},setup:()=>({Class:bt}),computed:{num(){let t=Math.floor(this.progress/this.total*100);return isNaN(t)?0:t},style(){return"width:"+this.num+"%;"}}});yt("\n.ptj-progress-holder[data-v-460b10ff] {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\n}\n.ptj-bar[data-v-460b10ff] {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\n}\r\n\r\n\r\n"),zt.render=function(t,e,s,i,n,p){return r(),a("div",{class:l(t.Class.getClass("ptj-progress-bar-wrapper"))},[d("div",{class:l(t.Class.getClass("ptj-progress-bar-holder")+" ptj-progress-holder")},[d("div",{class:l(t.Class.getClass("ptj-progress-bar")+" ptj-bar"),style:y(t.style)}," ",6)],2),d("span",null,o(t.num)+"%",1)],2)},zt.__scopeId="data-v-460b10ff",zt.__file="presstojam/src/components/ptj-progress-bar.vue";var Bt=s({name:"ptj-form",data:()=>({fstate:0,globalerror:""}),setup:()=>({store:gt.getStore(),Class:bt}),methods:{clearErrors(){this.globalerror="";for(let t in this.store.data.cells)this.store.data.cells[t].error=0},submit(){return this.fstate=this.total>0?1:2,this.clearErrors(),this.store.submit().then((()=>{this.store.next(),gt.buildLink()})).catch((t=>{if(this.fstate=0,console.log(t),"string"==typeof t)this.globalerror=t;else for(let e in t){if(0===e.indexOf("__"))continue;const s=this.store.data.cells[e];s&&(s.error=X.getError(t[e]))}}))}},components:{"ptj-input":Ct,"ptj-confirm":kt,"ptj-select":St,"ptj-radio":Et,"ptj-checkbox":Ot,"ptj-textarea":Pt,"ptj-asset-field":At,"ptj-progress-bar":zt}});const Nt={key:6};Bt.render=function(t,e,s,i,c,g){const j=n("ptj-select"),b=n("ptj-radio"),v=n("ptj-checkbox"),y=n("ptj-textarea"),k=n("ptj-asset-field"),x=n("ptj-input"),S=n("ptj-confirm"),L=n("ptj-progress-bar");return r(),a(u,null,[h(d("form",{onSubmit:e[0]||(e[0]=C(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:l(t.Class.getClass("ptj-form")+" "+t.store.classes)},[h(d("div",{class:l(t.Class.getClass("ptj-form-error"))},o(t.globalerror),3),[[m,t.globalerror]]),(r(!0),a(u,null,f(t.store.data.cells,(e=>(r(),a("div",{key:e.meta.name,class:l(t.Class.getClass("ptj-form-group"))},["select"==e.meta.type?(r(),w(j,{key:0,field:e,stores:t.store},null,8,["field","stores"])):"radio"==e.meta.type?(r(),w(b,{key:1,field:e,stores:t.store},null,8,["field","stores"])):"checkbox"==e.meta.type?(r(),w(v,{key:2,field:e,stores:t.store},null,8,["field","stores"])):"textarea"==e.meta.type?(r(),w(y,{key:3,field:e,stores:t.store},null,8,["field","stores"])):"asset"==e.meta.type?(r(),w(k,{key:4,field:e,stores:t.store},null,8,["field","stores"])):(r(),w(x,{key:5,field:e,stores:t.store},null,8,["field","stores"])),e.meta.confirm?(r(),a("div",Nt,[_(S,{field:e,stores:t.store},null,8,["field","stores"])])):p("v-if",!0),p(" REMOVED: ")],2)))),128)),d("input",{type:"submit",value:"Submit",class:l(t.Class.getClass("ptj-form-submit"))},null,2)],34),[[m,0==t.fstate]]),h(_(L,{total:t.store.progress.total,progress:t.store.progress.progress},null,8,["total","progress"]),[[m,1==t.fstate]])],64)},Bt.__file="presstojam/src/components/ptj-form.vue";var Ft=s({name:"ptj-nav",props:{actions:Array,classes:{type:String,default:""}},setup:()=>({Class:bt}),methods:{setRoute(t){t.r().then((()=>{gt.buildLink()})).catch((t=>console.log(t)))}}});const It=["onClick"];Ft.render=function(t,e,s,i,n,p){return r(),a("span",{class:l(t.Class.getClass("ptj-nav")+" "+t.classes)},[(r(!0),a(u,null,f(t.actions,(e=>(r(),a("a",{key:e,onClick:s=>{t.setRoute(e)},class:l(t.Class.getClass("ptj-nav-link"))},o(e.n),11,It)))),128))],2)},Ft.__file="presstojam/src/components/ptj-nav.vue";var Ht=s({name:"ptj-time-range",props:{field:Object},setup:()=>({Class:bt}),components:{"ptj-error":vt}});Ht.render=function(t,e,s,i,p,c){const u=n("ptj-error");return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-filter-form-time-row"))},[d("label",{class:l(t.Class.getClass("ptj-filter-form-time-label"))},o(t.field.meta.label),3),h(d("input",{class:l(t.Class.getClass("ptj-filter-form-time-1")),type:"datetime-local","onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val1=e)},null,2),[[v,t.field.val1]]),h(d("input",{class:l(t.Class.getClass("ptj-filter-form-time-2")),type:"datetime-local","onUpdate:modelValue":e[1]||(e[1]=e=>t.field.val2=e)},null,2),[[v,t.field.val2]]),h(_(u,{error:t.field.error},null,8,["error"]),[[m,t.field.error]])],2)},Ht.__file="presstojam/src/components/ptj-filter-form-time.vue";var Jt=s({name:"ptj-checkbox",props:{field:Object},setup:()=>({Class:bt})});const qt=["name"],Xt=[d("option",{value:0},o("All"),-1),d("option",{value:1},o("Checked"),-1),d("option",{value:2},o("Unchecked"),-1)];Jt.render=function(t,e,s,i,n,p){return r(),a("div",{class:l(t.Class.getClass("ptj-form-row")+" "+t.Class.getClass("ptj-filter-form-checkbox-row"))},[d("label",{class:l(t.Class.getClass("ptj-filter-form-checkbox-label"))},o(t.field.meta.label),3),h(d("select",{name:t.field.meta.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),class:l(t.Class.getClass("ptj-filter-form-checkbox"))},Xt,10,qt),[[g,t.field.val]])],2)},Jt.__file="presstojam/src/components/ptj-filter-form-checkbox.vue";var Kt=s({props:{title:String,active:{type:Boolean,default:!1},classes:{type:String,default:""}},setup:()=>({Class:bt}),data(){return{show:this.active}},methods:{toggleWidget(){this.show=!this.show}}});const Yt=[d("span",{class:"material-icons"},"more_horiz",-1)],Wt={class:"Class.getClass('ptj-widget-window-body')"};Kt.render=function(t,e,s,i,n,p){return r(),a("div",{class:l(t.Class.getClass("ptj-widget-window")+" "+t.classes)},[d("div",{class:l(t.Class.getClass("ptj-widget-window-header"))},[d("h1",{class:l(t.Class.getClass("ptj-widget-window-title"))},[k(o(t.title)+" ",1),d("a",{class:l(t.Class.getClass("ptj-widget-window-toggle")),onClick:e[0]||(e[0]=(...e)=>t.toggleWidget&&t.toggleWidget(...e))},Yt,2)],2)],2),h(d("div",Wt,[x(t.$slots,"default")],512),[[m,t.show]])],2)},Kt.__file="presstojam/src/components/ptj-widget-window.vue";var $t=s({name:"ptj-filter-form",setup:()=>({store:gt.getStore(),Class:bt}),methods:{submit(){this.store.reload(),gt.buildLink(!0)}},components:{"ptj-input":Ct,"ptj-select":St,"ptj-checkbox":Ot,"ptj-time-range":Ht,"ptj-filter-checkbox":Jt,"ptj-widget":Kt}});yt("\n.error[data-v-71ada21d] {\r\n  color : red;\n}\r\n\r\n"),$t.render=function(t,e,s,i,h,c){const _=n("ptj-select"),m=n("ptj-filter-checkbox"),g=n("ptj-time-range"),j=n("ptj-input"),b=n("ptj-widget");return r(),w(b,{title:"search"},{default:S((()=>[d("form",{onSubmit:e[0]||(e[0]=C(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:l(t.Class.getClass("ptj-filter-form"))},[d("h1",null,"Search "+o(t.store.title),1),(r(!0),a(u,null,f(t.store.data_template.cells,(e=>(r(),a("div",{key:e.meta.name,class:l(t.Class.getClass("ptj-filter-form-group"))},["select"==e.meta.type?(r(),w(_,{key:0,field:e,multiple:!0,stores:t.store},null,8,["field","stores"])):"checkbox"==e.meta.type?(r(),w(m,{key:1,field:e,stores:t.store},null,8,["field","stores"])):"datetime"==e.meta.atts.type?(r(),w(g,{key:2,field:e,stores:t.store},null,8,["field","stores"])):(r(),w(j,{key:3,field:e,stores:t.store},null,8,["field","stores"])),p(" REMOVED: ")],2)))),128)),d("input",{type:"submit",value:"Submit",class:l(t.Class.getClass("ptj-filter-form-submit"))},null,2)],34)])),_:1})},$t.__scopeId="data-v-71ada21d",$t.__file="presstojam/src/components/ptj-filter-form.vue";var Gt=s({setup:()=>({store:gt.getStore(),Class:bt}),methods:{setPage(t){this.store.setPage(t-1),gt.buildLink(!0)},getActiveClass(t){return t-1==this.store.data_template.page?"ptj-pagination-active":""}}});const Qt=["onClick"];Gt.render=function(t,e,s,i,n,p){return r(),a("div",{class:l(t.Class.getClass("ptj-pagination"))},[(r(!0),a(u,null,f(t.store.data_template.max_pages,(e=>(r(),a("a",{key:e,onClick:s=>t.setPage(e),class:l(t.getActiveClass(e))},o(e),11,Qt)))),128))],2)},Gt.__file="presstojam/src/components/ptj-pagination.vue";var Zt=s({setup:()=>({store:gt.getStore(),Class:bt}),components:{"ptj-widget":Kt}});const te=["onUpdate:modelValue"];Zt.render=function(t,e,s,i,p,c){const _=n("ptj-widget");return r(),w(_,{title:"select fields",classes:t.Class.getClass("ptj-selectfields")},{default:S((()=>[(r(!0),a(u,null,f(t.store.fields,((e,s)=>(r(),a("div",{key:s},[h(d("input",{type:"checkbox","onUpdate:modelValue":t=>e.summary=t,"true-value":1,"false-value":0,class:l(t.Class.getClass("ptj-selectfields-checkbox"))},null,10,te),[[b,e.summary]]),d("label",{class:l(t.Class.getClass("ptj-selectfields-label"))},o(e.name),3)])))),128))])),_:1},8,["classes"])},Zt.__file="presstojam/src/components/ptj-selectfields.vue";var ee=s({name:"ptj-header",setup:()=>({store:gt.getStore(),Class:bt}),components:{"ptj-nav":Ft,"ptj-filter-form":$t,"ptj-pagination":Gt,"ptj-selectfields":Zt}});ee.render=function(t,e,s,i,h,c){const m=n("ptj-nav"),f=n("ptj-filter-form"),g=n("ptj-selectfields");return r(),a(u,null,[d("h1",{class:l(t.Class.getClass("ptj-repo-header-title"))},o(t.store.title),3),_(m,{actions:t.store.actions,class:l(t.Class.getClass("ptj-repo-header-actions"))},null,8,["actions","class"]),1!=t.store.disable_filter?(r(),w(f,{key:0})):p("v-if",!0),1!=t.store.disable_selectfields?(r(),w(g,{key:1})):p("v-if",!0)],64)},ee.__file="presstojam/src/components/ptj-repo-header.vue";var se=s({name:"ptj-tree-node",props:{branch:{type:Object,required:!0},draggable:Boolean,ischild:{type:Boolean,default:!1}},data:()=>({toggle_state:{}}),setup:()=>({store:gt.getStore(),Class:bt}),methods:{toggle(t){this.toggle_state[t]=!this.toggle_state[t]},setDraggable(t){t.target.closest(".ptj-draggable").setAttribute("draggable",!0)},endDraggable(t){t.target.closest(".ptj-draggable").setAttribute("draggable",!1)},selectRow(t){let e=t.primary.toVal();this.store.next(e),gt.buildLink()},getRowClass(){let t=[];for(let e of this.store.groups)t.push(this.store.model+"-"+e.replace("_","-")+"-"+this.branch[e]);return t.join(" ")}},computed:{sortable:()=>!0,children(){let t=[],e=this.branch.children;for(let s in e){const r=e[s];t.push(...r)}return t}},components:{}});const re=t=>(L("data-v-1dcaa9f5"),t=t(),R(),t),ae=["id"],ie=[re((()=>d("span",{class:"material-icons"},"subdirectory_arrow_right",-1)))],le=[re((()=>d("span",{class:"material-icons"},"keyboard_arrow_right",-1)))],oe={key:0},ne=[re((()=>d("span",{class:"material-icons"},"drag_handle",-1)))];yt("\n.model-tree.branch[data-v-1dcaa9f5] {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\n}\n.tree .ide-block[data-v-1dcaa9f5] {\r\n\tdisplay : none;\n}\n.dragArea[data-v-1dcaa9f5] {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\n}\r\n\r\n\r\n"),se.render=function(t,e,s,i,c,_){const g=n("ptj-tree-node",!0);return r(),a("div",{class:l(t.Class.getClass("ptj-tree-node")+" ptj-draggable"+this.getRowClass()),id:t.branch.primary.toVal(),draggable:"false"},[d("div",{class:l(t.Class.getClass("ptj-tree-node-row")),onClick:e[5]||(e[5]=e=>{t.selectRow(t.branch)})},[d("div",null,[t.ischild?(r(),a("a",{key:0,"data-action":"more",class:"button",onClick:e[0]||(e[0]=C((e=>t.toggle(t.branch.primary.toVal(),!1)),["prevent","stop"]))},ie)):(r(),a("a",{key:1,"data-action":"more",class:"button",onClick:e[1]||(e[1]=C((e=>t.toggle(t.branch.primary.toVal(),!0)),["prevent","stop"]))},le))]),t.sortable?(r(),a("div",oe,[d("a",{"data-action":"more",class:"button",onClick:e[2]||(e[2]=(...e)=>t.prevent.stop&&t.prevent.stop(...e)),onMousedown:e[3]||(e[3]=(...e)=>t.setDraggable&&t.setDraggable(...e)),onMouseup:e[4]||(e[4]=(...e)=>t.endDraggable&&t.endDraggable(...e))},ne,32)])):p("v-if",!0),d("div",null,o(t.branch.getSummary()),1)],2),(r(!0),a(u,null,f(t.children,((e,s)=>h((r(),w(g,{branch:e,ischild:!0,key:s,store:t.store},null,8,["branch","store"])),[[m,t.toggle_state[t.branch.primary.toVal()]]]))),128))],10,ae)},se.__scopeId="data-v-1dcaa9f5",se.__file="presstojam/src/components/ptj-tree-node.vue";class pe{constructor(t={}){this._handle=t.handle,this._drop_target=t.drop_target,this._drag_target=t.drag_target,this._call_back=t.callback,this._x=0,this._y=0,this._offset_x=0,this._offset_y=0,this._judder=t.judder?t.judder:5,this._drag_node,this._drop_node,this._tree=t.tree}isJudder(t,e){const s=t-this._x,r=e-this._y;return!(s<-5||s>5)&&!(r<-5||r>5)}getDirection(t,e){return{x:t==this._x?0:t>this._x?1:-1,y:e==this._y?0:e>this._y?1:-1}}offset(t){var e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView;return{top:e.top+s.pageYOffset,left:e.left+s.pageXOffset}}insertAfter(){let t=this._drag_node.getAttribute("id"),e=this._drop_node.getAttribute("id"),s=0,r=0;if(this._drop_node.nextElementSibling){for(let t in this._tree){let a=this._tree[t];if(a.id==e){s=a.circular,r=a.sort;break}}for(let e in this._tree){let a=this._tree[e];a.id==t?(a.circular=s,a.sort=r+1):a.circular==s&&a.sort>r&&++a.sort}}else for(let e in this._tree){let r=this._tree[e];r.id==t&&(r.circular=s,r.sort=0)}}insertBefore(){let t=this._drag_node.getAttribute("id"),e=this._drop_node.getAttribute("id"),s=0,r=0;for(let t in this._tree){let a=this._tree[t];if(a.id==e){s=a.circular,r=a.sort,++a.sort;break}}for(let e in this._tree){let a=this._tree[e];a.id==t?(a.circular=s,a.sort=r):a.circular==s&&a.sort>r&&++a.sort}}dragStart(t){const e=t.target.closest("[id]");this._drag_node=e;const{top:s,left:r}=this.offset(e);t.dataTransfer.dropEffect="move",this._x=t.clientX,this._y=t.clientY,this._offset_x=t.clientX-r,this._offset_y=t.clientY-s}isDroppable(t){return!!t.target.closest(this._drop_target)}dragEnter(t){if(!this.isDroppable(t))return!0;if(t.preventDefault(),t.dataTransfer.dropEffect="move",this._drop_node=t.target.closest(this._drag_target),!this._drop_node||this._drop_node.getAttribute("id")==this._drag_node.getAttribute("id"))return;const e=this.getDirection(t.clientX,t.clientY);1==e.y?this.insertAfter():-1==e.y&&this.insertBefore(),this._x=t.clientX,this._y=t.clientY}dragOver(t){if(!this.isDroppable(t))return!0;t.preventDefault(),t.dataTransfer.dropEffect="move"}dragEnd(){this._drag_node&&this._drag_node.setAttribute("draggable",!1),this._drag_node=null}drop(t){if(!this._drop_node)return!0;t.preventDefault(),this._call_back&&this._call_back(this._tree)}}var he={initDD:function(t){let e=new pe(t);if(document.querySelectorAll(t.handle).forEach((t=>t.addAttribute("draggable",!0))),t.handle){document.querySelectorAll(t.handle).forEach((e=>{e.addEventListener("mousedown",(e=>{e.target.closest(t.drag_target).addAttribute("draggable",!0)}))}))}t.main.addEventListener("dragstart",(t=>e.dragStart(t))),t.main.addEventListener("dragenter",(t=>e.dragEnter(t))),t.main.addEventListener("dragover",(t=>e.dragOver(t))),t.main.addEventListener("drop",(t=>e.drop(t))),t.main.addEventListener("dragend",(t=>e.dragEnd(t)))}},de=s({name:"ptj-tree",setup(t){let e={store:gt.getStore(),treeroot:V(null),Class:bt};return E((()=>{he.initDD({handle:".ptj-drag-handle",drag_target:".ptj-draggable",drop_target:".ptj-drop-target",main:e.treeroot.value,tree:e.store.data,callback:e.store.saveSort})})),e},components:{"ptj-nav":Ft,"ptj-tree-node":se,"ptj-filter-form":$t,"ptj-selectfields":Zt}});de.render=function(t,e,s,i,o,p){const h=n("ptj-tree-node");return r(),a("div",{class:l(t.Class.getClass("ptj-tree")+" "+t.store.classes+" ptj-drop-target"),ref:"treeroot"},[(r(!0),a(u,null,f(t.store.data,((t,e)=>(r(),w(h,{key:e,branch:t},null,8,["branch"])))),128))],2)},de.__file="presstojam/src/components/ptj-tree.vue";var ce=s({name:"ptj-table",setup:()=>({store:gt.getStore(),Class:bt,order:{name:"",dir:""}}),methods:{next(t){this.store.next(t),gt.buildLink()},orderBy(t){if(this.store.pages>0){this.order.dir=!this.order.name!=t||"desc"==this.order.dir?"asc":"desc",this.order.name=t;let e=[];e[this.order.name]=this.order.dir,this.store.data_template.sort=e,this.store.reload()}else this.order.name!=t||"desc"==this.order.dir?(this.store.data.sort((function(e,s){let r=e.getCell(t).toVal(),a=s.getCell(t).toVal();return r<a?-1:r>a?1:0})),this.order.name=t,this.order.dir="asc"):(this.store.data.sort((function(e,s){let r=e.getCell(t).toVal(),a=s.getCell(t).toVal();return r<a?1:r>a?-1:0})),this.order.name=t,this.order.dir="desc")},getRowClass(t){let e=[];for(let s of this.store.groups)e.push(this.store.model+"-"+s.replace("_","-")+"-"+t[s]);return e.join(" ")}},computed:{sortable(){return!!this.store.sort},overlimit:()=>!1,rowclass(){}},components:{"ptj-pagination":Gt}});const _e=["onClick"],me={key:0,class:"material-icons"},ue={key:1,class:"material-icons"},fe={key:0},ge=["onClick"],je=[(t=>(L("data-v-15ab9672"),t=t(),R(),t))((()=>d("span",{class:"material-icons"},"drag",-1)))];yt("\n.table[data-v-15ab9672], .thead[data-v-15ab9672], .tbody[data-v-15ab9672], .tr[data-v-15ab9672] {\r\n    width : 100%;\n}\r\n\r\n\r\n"),ce.render=function(t,e,s,i,c,_){const g=n("ptj-pagination");return r(),a(u,null,[d("table",{class:l(t.Class.getClass("ptj-table")+" "+t.store.classes)},[d("thead",null,[d("tr",{class:l(t.Class.getClass("ptj-table-header"))},[(r(!0),a(u,null,f(t.store.fields,(e=>h((r(),a("th",{key:e.name,class:l(t.Class.getClass("ptj-table-header-cell")+" "+e.name.replace("_","-")),onClick:s=>{t.orderBy(e.name)}},[k(o(e.label)+" ",1),this.order.name==e.name&&"asc"==this.order.dir?(r(),a("span",me,"keyboard_arrow_up")):p("v-if",!0),this.order.name==e.name&&"desc"==this.order.dir?(r(),a("span",ue,"keyboard_arrow_down")):p("v-if",!0)],10,_e)),[[m,e.summary]]))),128)),t.sortable?(r(),a("th",fe," ")):p("v-if",!0)],2)]),d("tbody",null,[(r(!0),a(u,null,f(t.store.data,((s,i)=>(r(),a("tr",{key:i,class:l(t.Class.getClass("ptj-table-row")+" "+this.getRowClass(s)),onClick:e=>{t.next(s.primary.toVal())}},[(r(!0),a(u,null,f(s.cells,((e,s)=>h((r(),a("td",{key:s,class:l(t.Class.getClass("ptj-table-cell")+" "+s.replace("_","-"))},o(e.display),3)),[[m,e.meta.summary]]))),128)),t.sortable?(r(),a("td",{key:0,class:l(t.Class.getClass("ptj-table-cell-sortable"))},[d("a",{"data-action":"more",class:"button",onClick:e[0]||(e[0]=C(((...e)=>t.toggle&&t.toggle(...e)),["prevent"])),draggable:"true"},je)],2)):p("v-if",!0)],10,ge)))),128))])],2),t.store.data_template.limit>0?(r(),w(g,{key:0})):p("v-if",!0)],64)},ce.__scopeId="data-v-15ab9672",ce.__file="presstojam/src/components/ptj-table.vue";var be=s({name:"ptj-list",setup:()=>({store:gt.getStore(),Class:bt}),methods:{next(t){this.store.next(t),gt.buildLink()},getCombinations(t,e,s){const r=[];if(0==s.length)for(let t in e)r.push({tags:[e[t].display],data:e[t].contains});else for(let t of s)for(let s in e){let a=t.tags;a.push(s.display),r.push({tags:a,data:t.data.filter((t=>e[s].contains.includes(t)))})}return r}},computed:{getIndexCombinations(){let t=[];for(let e in this.store.indexes)t=this.getCombinations(e,this.store.indexes[e],t);return t}}});const ve=["onClick"];be.render=function(t,e,s,i,n,p){return r(),a("div",{class:l(t.Class.getClass("ptj-list")+" "+t.store.classes)},[(r(!0),a(u,null,f(t.getIndexCombinations,((e,s)=>(r(),a("div",{key:s},[d("h3",null,[(r(!0),a(u,null,f(e.tags,((t,e)=>(r(),a("span",{key:e},o(t)+" ",1)))),128))]),d("ul",null,[(r(!0),a(u,null,f(e.data,(e=>(r(),a("li",{key:e},[d("a",{onClick:s=>t.next(t.store.data[e].primary.toVal())},o(t.store.data[e].getSummary()),9,ve)])))),128))])])))),128))],2)},be.__file="presstojam/src/components/ptj-list.vue";var ye=s({name:"ptj-repo",setup:()=>({store:gt.getStore(),Class:bt}),components:{"ptj-repo-header":ee,"ptj-tree":de,"ptj-table":ce,"ptj-list":be}});yt("\n.table[data-v-1c7fb47e], .thead[data-v-1c7fb47e], .tbody[data-v-1c7fb47e], .tr[data-v-1c7fb47e] {\r\n    width : 100%;\n}\n.ptj-data-row[data-v-1c7fb47e]:nth-child(odd) {background : #CCC}\r\n\r\n"),ye.render=function(t,e,s,i,o,p){const h=n("ptj-repo-header");return r(),a("div",{class:l(t.Class.getClass("ptj-repo")+" "+t.store.classes)},[_(h),(r(),w(U(t.store.rawcomponent),{key:t.store.key}))],2)},ye.__scopeId="data-v-1c7fb47e",ye.__file="presstojam/src/components/ptj-repo.vue";var Ce=s({name:"ptj-single-item",props:{active:{type:Boolean,default:!1}},setup:()=>({store:gt.getStore(),Class:bt}),computed:{editnav(){return this.store.actions.put},delnav(){return this.store.actions.delete},title(){return this.store.title+" "+this.store.summary()}},methods:{runDel(){this.store.runDelete()}},components:{"ptj-nav":Ft,"ptj-widget":Kt}});const we=k("  "),ke=["innerHTML"];Ce.render=function(t,e,s,i,p,h){const c=n("ptj-nav");return r(),a(u,null,[d("div",{class:l(t.Class.getClass("ptj-single-item")+" "+t.store.classes)},[d("h1",null,o(t.store.title),1),_(c,{actions:t.store.actions,class:l(t.Class.getClass("ptj-single-item-actions"))},null,8,["actions","class"]),(r(!0),a(u,null,f(t.store.data.cells,((e,s)=>(r(),a("div",{key:s,class:l(t.Class.getClass("ptj-single-item-row")+" "+e.name)},[d("span",{class:l(t.Class.getClass("ptj-single-item-label"))},o(e.meta.label),3),we,e.meta.atts.html?(r(),a("span",{key:0,class:l(t.Class.getClass("ptj-single-item-value")),innerHTML:e.val},null,10,ke)):(r(),a("span",{key:1,class:l(t.Class.getClass("ptj-single-item-value"))},o(e.val),3))],2)))),128))],2),_(c,{actions:t.store.children,class:l(t.Class.getClass("ptj-single-item-children"))},null,8,["actions","class"])],64)},Ce.__file="presstojam/src/components/ptj-single-item.vue";var xe=s({name:"ptj-login",setup(){let t=gt.getStore();return t.next=()=>{gt.reloadFromBase()},{store:t,Class:bt}},components:{"ptj-form":Bt,"ptj-nav":Ft}});xe.render=function(t,e,s,i,p,h){const c=n("ptj-form"),m=n("ptj-nav");return r(),a("div",{class:l(t.Class.getClass("ptj-accounthandler"))},[d("h1",null,o(t.store.title),1),_(c),_(m,{action:t.store.actions},null,8,["action"])],2)},xe.__file="presstojam/src/components/ptj-accounthandler.vue";var Se=s({name:"ptj-card",props:{store:Object,active:{type:Boolean,default:!1}},methods:{next(){this.store.next(),gt.buildLink()}},computed:{title(){return this.store.title},classes(){return bt.getClass("ptj-card")+" "+this.store.classes},rowclass:()=>bt.getClass("ptj-card-row"),labelclass:()=>bt.getClass("ptj-card-label"),valueclass:()=>bt.getClass("ptj-card-value")},components:{"ptj-widget":Kt}});const Le=[d("span",{class:"material-icons"},"view_carousel",-1)],Re=k(" ");Se.render=function(t,e,s,i,p,h){const c=n("ptj-widget");return r(),w(c,{title:t.title,active:t.active},{default:S((()=>[d("div",{class:l(t.classes)},[d("a",{onClick:e[0]||(e[0]=(...e)=>t.next&&t.next(...e))},Le),(r(!0),a(u,null,f(t.store.fields,((e,s)=>(r(),a("div",{key:s,class:l(t.rowclass+" "+e.name)},[d("span",{class:l(t.labelclass)},o(e.label),3),Re,d("span",{class:l(t.rowclass)},o(e.val),3)],2)))),128))],2)])),_:1},8,["title","active"])},Se.__file="presstojam/src/components/ptj-card.vue";var Ve=s({props:{index:{type:Boolean}},setup:t=>(t.index&&gt.next(),{store:gt.getStore(),Class:bt}),computed:{parents:()=>[]},components:{"ptj-form":Bt,"ptj-nav":Ft,"ptj-single-item":Ce,"ptj-account-handler":xe,"ptj-repo":ye,"ptj-card":Se}});Ve.render=function(t,e,s,i,o,p){const h=n("ptj-card");return r(),a("div",{class:l(t.Class.getClass("ptj-tabs"))},[(r(!0),a(u,null,f(t.parents,(e=>(r(),a("div",{class:l(t.Class.getClass("ptj-tabs-card")),key:e.name+"-parent"},[_(h,{store:e.store},null,8,["store"])],2)))),128)),d("div",{class:l(t.Class.getClass("ptj-tabs-tab"))},[(r(),w(U(t.store.component),{key:t.store.index}))],2)],2)},Ve.__file="presstojam/src/components/ptj-tabs.vue";var Ee=s({setup:()=>({Class:bt}),methods:{logout(){N.post("/core-logout").then((()=>{gt.reloadFromBase()}))}}});Ee.render=function(t,e,s,a,i,o){return r(),w(O,{to:"#ptj-accountdetails"},[d("a",{class:l(t.Class.getClass("ptj-account-details-logout")),onClick:e[0]||(e[0]=(...e)=>t.logout&&t.logout(...e))},"Logout",2)])},Ee.__file="presstojam/src/components/ptj-account-details.vue";var Ue=s({name:"ptj-root",setup:()=>({Class:bt}),computed:{groups:()=>gt.store.models,isaccount:()=>"public"!=gt.store.profile},components:{"ptj-tabs":Ve,"ptj-account-details":Ee}});Ue.render=function(t,e,s,i,o,h){const d=n("ptj-account-details"),c=n("ptj-tabs");return r(),a(u,null,[t.isaccount?(r(),w(d,{key:0})):p("v-if",!0),(r(!0),a(u,null,f(t.groups,(e=>(r(),a("div",{class:l(t.Class.getClass("ptj-root")),key:e.index},[_(c,{index:!0})],2)))),128))],64)},Ue.__file="presstojam/src/components/ptj-root.vue";var Oe={Ctrl:gt,runApp:function(t){const e=D(Ue);return e.mount(t),e}};export{Oe as default};
//# sourceMappingURL=ptj.esm.js.map
