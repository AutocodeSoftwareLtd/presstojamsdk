import{reactive as t,computed as e,defineComponent as s,openBlock as a,createElementBlock as r,normalizeClass as l,createElementVNode as o,normalizeStyle as n,toDisplayString as p,resolveComponent as d,renderSlot as h,withDirectives as c,createVNode as m,vShow as _,vModelText as u,createCommentVNode as f,createTextVNode as g,vModelCheckbox as j,vModelSelect as b,mergeProps as y,Fragment as v,renderList as w,vModelDynamic as C,createBlock as k,withModifiers as x,withCtx as S,pushScopeId as L,popScopeId as R,ref as V,onMounted as U,resolveDynamicComponent as E,Teleport as O,createApp as A}from"vue";let P,B,T,D={},N={},M=!0;var F={regCustomHeader(t,e){D[t]=e},regStatusHandler(t,e){N[t]=e},setURL(t){P=t},regDebug(t){M=t},run:(t,e)=>(e.mode="cors",e.cache="no-cache",e.credentials="include",e["Content-Type"]="application/json",e.headers=D,fetch(P+t,e).then((t=>{if(B=t.status,T=t.ok,!N[t.status])return 401==t.status?t.status:t.json();N[t.status](t)})).then((s=>{if(!T)throw s;if(401==B){let s=e.method;return e.method="PUT",fetch(P+"/core-switch-tokens",e).then((a=>{if(a.ok)return e.method=s,fetch(P+t,e).then((t=>{if(401==t.status)throw new Error("Issue with refresh token");if(t.ok)return t.json()}))}))}return s})).catch((t=>{throw M&&console.log(t),t}))),setDebug:t=>(t?t.__debug=!0:t={__debug:!0},t),get(t,e){if(M&&(e=this.setDebug(e)),e){const s=new URLSearchParams;let a={};for(let t in e)Array.isArray(e[t])||"object"==typeof e[t]&&null!==e[t]?a[t]=e[t]:s.append(t,e[t]);a&&s.append("graph",JSON.stringify(a)),-1==t.indexOf("?")?t+="?":t+="&",t+=s.toString()}let s={method:"GET"};return this.run(t,s)},getprimary(t,e){return this.get(t,e)},post(t,e){M&&(e=this.setDebug(e));let s={method:"POST"};return s.body=JSON.stringify(e),this.run(t,s)},put(t,e){M&&(e=this.setDebug(e));let s={method:"PUT"};return s.body=JSON.stringify(e),this.run(t,s)},patch(t,e){M&&(e=this.setDebug(e));let s={method:"PATCH"};return s.body=JSON.stringify(e),this.run(t,s)},delete(t,e){M&&(e=this.setDebug(e));let s={method:"DELETE"};return s.body=JSON.stringify(e),this.run(t,s)}};const I={1:"too small",2:"too large",3:"contains incorrect characters",4:"doesn't contain required characters",5:"not unique"};var z={getError:function(t){return I[t]}};class H{constructor(){this._min,this._max,this._has=[],this._has_not=[],this._errors={OK:0,MIN_VALUE:1,MAX_VALUE:2,HAS:3,HAS_NOT:4}}set min(t){this._min=t}set max(t){this._max=t}set has(t){this._has.push(t)}set nothas(t){this._has_not.push(t)}validateSize(t){return t<this._min?this._errors.MIN_VALUE:t>this._max?this._errors.MAX_VALUE:this._errors.OK}validate(t){let e;if(isNaN(t)){const s=t?t.length:0;e=this.validateSize(s)}else e=this.validateSize(t);if(e!=this._errors.OK)return e;for(let e of this._has_not)if(t.match(e))return this._errors.HAS_NOT;if(0==this._has.length)return this._errors.OK;for(let e of this._has)if(t.match(this._has))return this._errors.OK;return this._errors.HAS}}class J{constructor(s,a=null){if(this._name=s,this._type="",this._is_primary=!1,this._is_parent=!1,this._valid=1,this._atts={},this._confirm=!1,this._readonly=!1,this._placeholder="",this._conditions,this._link="",this._reference="",this._error=0,this._label="",this._store=t({summary:0,options:[]}),this._default=null,this._validator=new H,this._multiple=!1,this._encrypted=!1,this.summary=e({get:()=>this._store.summary,set:t=>{this._store.summary=t}}),this.options=e({get:()=>this._store.options,set:t=>{this._store.options=t}}),a){for(let t in a)if("summary"==t)this._store.summary=a[t];else{if("validation"==t)continue;this[t]=a[t]}if(a.validation)for(let t in a.validation)this._validator[t]=a.validation[t]}if(!this._reference&&"select"==this._type){this._store.options=[];try{for(let t of this._atts.options)this._store.options.push({key:t,value:t})}catch(t){console.log("options not set for ",this._name)}}}set confirm(t){this._confirm=t}set readonly(t){this._readonly=t}set placeholder(t){this._placeholder=t}set atts(t){this._atts=t}set default(t){this._default=t}set asset(t){this._asset=t}set conditions(t){this._conditions=t}set link(t){this._link=t}set name(t){this._name=t}set type(t){this._type=t.toLowerCase()}set multiple(t){this._multiple=t}set is_primary(t){this._is_primary=t}set is_parent(t){this._is_parent=t}set reference(t){this._reference=t}set error(t){this._error=t}set label(t){this._label=t}set encrypted(t){this._encrypted=t}get name(){return this._name}get type(){return this._type}get isprimary(){return this._is_primary}get required(){return this._min>0}get readonly(){return this._readonly}get placeholder(){return this._placeholder}get default(){return this._default}get atts(){return this._atts}get conditions(){return this._conditions}get link(){return this._link}get isparent(){return this._is_parent}get multiple(){return this._multiple}get confirm(){return this._confirm}get reference(){return this._reference}get asset(){return this._asset}get encrypted(){return this._encrypted}get error(){return this._error?isNaN(this._error)?this._error:z.getError(this._error):""}get validator(){return this._validator}get label(){return this._label}isSummary(){return this._store.summary}saveAsset(t){if(this._asset){if(this.val)return this._asset.saveFile(this.val,t)}return Promise.resolve()}setReferenceOptions(t,e){return this._store.options=[],F.get(t,e).then((t=>{for(let e in t.__data)0!==e.indexOf("__")&&this._store.options.push({key:t.__data[e].key,value:t.__data[e].value})})).catch((t=>{console.log(t)}))}clean(t){return"checkbox"==this._type?t?1:0:t}validate(t){return this._validator.validate(t)}exp(){return{name:this._name,type:this._type,atts:this._atts}}calcValue(t){return t||""}}class X{constructor(){this._fields={},this._primary,this._parent,this._children={}}set field(t){this._fields[t.name]=t}get fields(){return this._fields}addChild(t,e){this._children[t]=e}get children(){return this._children}get parent(){return this._parent}get primary(){return this._primary}map(t){for(let e in t)t[e].is_primary?this._primary=new J(e,t[e]):t[e].is_parent?this._parent=new J(e,t[e]):this._fields[e]=new J(e,t[e])}exportFields(t,e){let s=this._states[t].fields;e.fields=[];for(let t in s)(0==this._limit_fields.length||this._limit_fields.contains(t))&&e.fields.push(s[t])}exportToStore(t){t.fields=this._fields}getCellByType(t){let e={};for(let s in this._fields)this._fields[s].type==t&&(e[s]=this._fields[s]);return e}}class q{constructor(s){this._meta=s,this._store=t({value:null,display:null,error:0,is_validate_on:!1}),this.val=e({get:()=>this._store.value,set:t=>{this._store.value=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.error=e({get:()=>this._store.error,set:t=>{this._store.error=t}}),this.showError=e((()=>!(!this._store.is_validate_on||!this._store.error))),this._meta.default?this._store.value=this._meta.default:"select"==this._meta.type&&(this._store.value=0)}get meta(){return this._meta}set validateon(t){this._store.is_validate_on=t}set display(t){this._store.display=t}get display(){return this._store.display?this._store.display:this._store.value}toString(){return this._store.display}toVal(){return this._store.value}setVal(t){this._store.value=t}}class W extends q{constructor(t){super(t),"datetime"==this._meta.atts.type?(this._store.value={min:null,max:null},this.val=e({get:()=>this._store.value,set:t=>{t.min&&(this._store.value.min=this._meta.clean(t.min)),t.max&&(this._store.value.max=this._meta.clean(t.max)),this._store.error=this._meta.validate(t)}}),this.val1=e({get:()=>this._store.value.min,set:t=>{this._store.value.min=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.val2=e({get:()=>this._store.value.max,set:t=>{this._store.value.max=this._meta.clean(t),this._store.error=this._meta.validate(t)}}),this.addParam=t=>{let e={};this._store.value.min&&(e.min=this._store.value.min),this._store.value.max&&(e.max=this._store.value.max),Object.keys(e).length>0&&(t[this._meta.name]=e)}):"checkbox"==this._meta.type?(this._store.value=0,this.addParam=t=>{1==this._store.value?t[this._meta.name]=1:2==this._store.value&&(t[this._meta.name]=0)}):"select"==this._meta.type?(this._store.value=[],this.addParam=t=>{this._store.value.length>0&&(t[this._meta.name]=this._store.value)}):this.addParam=t=>{this._store.value&&(t[this._meta.name]=["%"+this._store.value+"%"])}}}class ${constructor(t){this._cells={},this._primary,this._parent,this._limit=0,this._page=0,this._fields=[],this._sort={},this._groups=[],this._children=[],this._active,this._max_pages=0,this._count=0,t&&this.applyMetaRow(t)}applyMetaRow(t){t.primary&&(this._primary=new q(t.primary)),t.parent&&(this._parent=new q(t.parent));for(const e in t.fields){const s=t.fields[e];this._cells[s.name]=new W(s)}}get cells(){return this._cells}initField(t){this._data.initField(t)}set fields(t){this._fields=t}get fields(){return this._fields}set limit(t){this._limit=t}get limit(){return this._limit}set sort(t){this._sort=t}get sort(){return this._sort}set page(t){this._page=t}get page(){return this._page}set groups(t){this._groups=t}get groups(){return this._groups}set children(t){this._children=t}get children(){return this._children}get primary(){return this._primary}get parent(){return this._parent}get active(){return this._active}set active(t){this._active=t}get max_pages(){return this._max_pages}set max_pages(t){this._max_pages=t}get count(){return this._count}set count(t){this._count=t}convertToParams(){let t={};this._limit&&(t._limit=this._limit),this._page&&(t._page=this._page),this._fields.length>0&&(t._fields=this._fields),Object.keys(this._sort).length>0&&(t._sort=this._sort);for(let e in this._cells){let s=this._cells[e].toVal();s&&(t[e]=s)}return JSON.stringify(t)}convertDataToParams(){let t={};for(let e in this._cells)t[e]=this._cells[e].toVal();return Object.keys(t).length>0?JSON.stringify(t):null}convertFromParams(t){const e=JSON.parse(t);e._limit&&(this._limit=e._limit),e._fields&&(this._fields=e._fields),e.hasOwnProperty("_page")&&(this._page=e._page),e.hasOwnProperty("_sort")&&(this._sort=e._sort);for(const t in this._cells)e.hasOwnProperty(t)&&this._cells[t].setVal(e[t])}convertToAPIParams(t){let e={};this._limit&&(e.__limit=this._limit),this._page&&(e.__page=this._page*this._limit),this._fields.length>0&&(e.__fields=this._fields),Object.keys(this._sort).length>0&&(e.__sort=this._sort);for(let t in this._cells)this._cells[t].addParam(e);return"parent"==t||"post"==t?this._parent&&this._parent.toVal()&&(e[this._parent.meta.name]=this._parent.toVal()):"login"!=t&&(e[this._primary.meta.name]=this._primary.toVal()),Object.keys(e).length?e:null}}class K{constructor(t){this._cells={},this._references={},this._children={},this._parent,this._primary,t&&this.applyMetaRow(t)}applyMetaRow(t){t.primary&&(this._primary=new q(t.primary)),t.parent&&(this._parent=new q(t.parent));for(const e in t.fields){const s=t.fields[e];this._cells[s.name]=new q(s)}for(const e in t.references)this._references[e]=new K(t.references[e]);for(const e in t.children)this._children[e]=t.children[e]}appendPrimary(t){this._primary=new q(t)}addChild(t,e){this._children[t]||(this._children[t]=[]),this._children[t].push(e)}set row(t){if(t){this._primary&&t[this._primary.meta.name]&&this._primary.setVal(t[this._primary.meta.name]),this._parent&&t[this._parent.meta.name]&&this._parent.setVal(t[this._parent.meta.name]);for(let e in this._cells)t[e]&&this._cells[e].setVal(t[e]);for(let e in this._references)this._references[e].row=t[e];for(let e in this._children)this._children[e].row=t[e];this._parent&&this._references[this._parent.meta.reference]&&(this._parent.display=this._references[this._parent.meta.reference].getSummary());for(let t in this._cells){let e=this._cells[t].meta;e.reference&&this._references[e.reference]&&(this._cells[t].display=this._references[e.reference].getSummary())}}}get cells(){return this._cells}get parent(){return this._parent}get primary(){return this._primary}get children(){return this._children}getCell(t){return this._primary&&this._primary.meta.name==t?this._primary:this._parent&&this._parent.meta.name==t?this._parent:this._cells[t]}getSummary(){let t=[];for(let e in this._cells){const s=this._cells[e];if(s.meta.isSummary()){const e=s.display;t.push(e)}}return t.join(" ")}toString(){let t=[];for(let e in this._cells)t.push(this._cells[e].display);return t.join(" ")}serialize(t){let e={};"post"==t?this._parent&&(e[this._parent.meta.name]=this._parent.toVal()):"put"!=t&&"delete"!=t||(e[this._primary.meta.name]=this._primary.toVal());for(let t in this._cells)e[t]=this._cells[t].toVal();return e}getCellByType(t){let e={};for(let s in this._cells)this._cells[s].meta.type==t&&(e[s]=this._cells[s]);return e}}let Y={orig:0,target:0,state:null,key:null,to:null,model:null,end:null,param_str:{}};var Z={updateIntention:function(t,e){!function(){for(let t in Y)Y[t]=null}(),Y.orig=parseInt(t);for(let t in e)Y[t]=e[t]},convertMaps:function(t){let e=Y.orig+Y.target;e<0?t.unshift({...t[i]}):e>=t.length&&t.push({...t[t.length-1]});for(let s in Y)null!==Y[s]&&("_end"==s?t.splice(e+1,t.length):t[e][s]=Y[s])}};class G{constructor(e,s){this._map=e,this._stage=s,this._label="",this._title="",this._component="",this._rawcomponent="",this._actions={},this._next=null,this._index=0,this._primary_key_name="",this._parent_key_name="",this._circular="",this._siblings=[],this._children=[],this._groups=[],this._classes="",this._settings={hide_actions:{}},this._meta_row=new X,this._global_meta_row=new X,this._data_template=null,this._data=null,this._global_data,this._store=t({}),this._back}get map(){return this._map}get stage(){return this.store.stage}applySettingsToParams(t){this._settings&&(this._settings.to&&(t.__to=this._settings.to),this._settings.fields&&(t.__fields=this._settings.fields))}injectCustomSettings(t){this._settings=t,this._settings.hide_actions||(this._settings.hide_actions={})}init(){let t=this._map.model?"/route-"+this._map.model:"/route-core-default",e="get";"primary"==this._map.state||"parent"==this._map.state?t+="-"+this._map.state:"login"==this._map.state?(t+="-"+login,e="post"):"put"!=this._map.state&&"post"!=this._map.state||(e=this._map.state);let s={};return this._map.to&&(s.__to=this._map.to),this.applySettingsToParams(s),F[e](t,s).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return t})).then((t=>{this._map.state=t.state,this._map.model=t.model,this._label=t.label,this._title=t.title,this._back=t.back;for(let e in t.children)this._children.push({name:e,label:t.children[e]});for(let e in t.siblings)this._siblings.push({name:e,label:t.siblings[e]});for(let e in t.fields)t.fields[e].circular&&(this._circular=e);this._actions=t.actions,this.buildMetaRow(t)})).catch((t=>console.log(t)))}get fields(){return this._fields}get classes(){return this._name.replace("_","-")+" "+this._map.state}snakeCase(t){return t.replace("-","_")}buildMetaRow(t){this._meta_row=new X,this._meta_row.map(t.fields);let e={};for(let s in t.fields)(t.fields[s].is_primary||t.fields[s].is_parent)&&(e[s]=t.fields[s]);this._global_meta_row.map(e)}loadURL(t){let e="/"+this._map.model;return"primary"==t||"put"==t?e+="-primary":"parent"==t&&(e+="-parent"),e}saveURL(){return"/"+this._map.model}initDataTemplate(){this._data_template=new $(this._meta_row),"get"==this._map.state||"parent"==this._map.state?"first"==this._map.key?this._data_template.limit=1:this._map.key&&this._data_template.parent.setVal(this._map.key):"post"==this._map.state?(this._global_data=new K(this._global_meta_row),this._map.key&&(this._data_template.parent.setVal(this._map.key),this._global_data.parent.setVal(this._map.key))):"login"!=this._map.state&&this._data_template.primary.setVal(this._map.key),this._map.param_str&&this._data_template.convertFromParams(this._map.param_str),this._settings.groups&&(this._data_template.groups=this._settings.groups),this._settings.limit&&(this._data_template.limit=this._settings.limit)}load(){if(this.initDataTemplate(),"get"==this._map.state||"parent"==this._map.state){let t=this._data_template.convertToAPIParams(this._map.state);return t||(t={}),this._map.to&&(t.__to=this._map.to),this.applySettingsToParams(t),this._data_template.limit>0?F.get(this.loadURL(this._map.state)+"-count",t).then((t=>{this._data_template.count=t.count,this._data_template.max_pages=Math.ceil(t.count/this._data_template.limit)})).then((()=>F.get(this.loadURL(this._map.state),t))).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data=[],this.mapRepoData(t),t})):F.get(this.loadURL(this._map.state),t).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data_template.count=t.__data.length,this._data=[],this.mapRepoData(t),t}))}if("primary"==this._map.state||"put"==this._map.state){let t=this._data_template.convertToAPIParams(this._map.state);return t||(t={}),this._settings&&this._settings.to?t.__to=this._settings.to:this._map.to&&(t.__to=this._map.to),F.get(this.loadURL(this._map.state),t).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data={},this.mapData(t),t})).then((t=>{if(this._global_data=new K(this._global_meta_row),this._global_data.row=t,"put"==this._map.state)return this.setReferences()}))}return"post"==this._map.state?(this._data=new K(this._meta_row),this._data_template.parent&&this._data.parent.setVal(this._data_template.parent.toVal()),this.setReferences()):(this._data=new K(this._meta_row),Promise.resolve())}reload(){this._data_template.page=0;let t=this._data_template.convertToAPIParams("get");return this._map.to&&(t.__to=this._map.to),F.get(this.loadURL("get")+"-count",t).then((t=>{this._data_template.count=t.count,this._data_template.max_pages=Math.ceil(t.count/this._data_template.limit)})).then((()=>F.get(this.loadURL("get"),t))).then((t=>{if("SUCCESS"!=t.__status)throw new Error(t);return this._data=[],this.mapRepoData(t),t})).then((()=>{this._store.data=this._data,this._store.data_template=this._data_template.count}))}rLoadObj(t){let e=new K(this._meta_row);if(e.row=t,this._circular&&t[this._map.model])for(const s in t[this._map.model])e.addChild(this._map.model,this.rLoadObj(t[this._map.model][s]));for(const s in this._active_children){const a=this._active_children[s];if(t[a])for(const s in t[a])e.addChild(a,this.rLoadObj(t[a][s]))}return e}indexData(t){let e={};for(const s in t){const a=t[s];for(let t of this._data_template.groups){t=this.snakeCase(t),e[t]||(e[t]={});let r=a.getCell(t).toVal();e[t][r]||(e[t][r]={display:"",contains:[]},e[t][r].display=a.getCell(t).display),e[t][r].contains.push(s)}}return e}import(t){return new Promise(((e,s)=>{var a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=s,a.readAsText(t.blob)})).then((t=>{const e={};for(let s in t[0])e[t[0][s]]=s;for(let e=1;e<t.length;++e);}))}submit(){let t=0,e=this._data.serialize(this._map.state);return F[this._map.state](this.saveURL(),e).then((e=>{if("SUCCESS"!=e.__status)throw{message:e.statusText};"post"==this._map.state&&(t=e.__key)})).then((()=>{let t=[],e=this._store.data.getCellByType("asset");this._store.progress.total=0;for(let s in e){if(!e[s].toVal())continue;++this._store.progress.total;const a=new Asset;a.url=this.saveURL()+"-"+s,a.keyfield=this._store.data.primary.name;let r=a.saveFile(e[s].toVal(),this._store.data.primary.toVal()).then((()=>{++this._store.progress.progress}));t.push(r)}return Promise.all(t)})).then((()=>t))}setReferences(){let t=[];const e=this._meta_row.getCellByType("id");for(let s in e)if(e[s].reference||e[s].circular){let a={};this._global_meta_row.parent&&(a[this._global_meta_row.parent.name]=this._global_data.parent.toVal()),t.push(e[s].setReferenceOptions("/"+this._map.model+"-"+s.replace("_","-")+"-reference",a))}return Promise.all(t)}mapRepoData(t){this._data=[];for(const e in t.__data){const s=this.rLoadObj(t.__data[e]);this._data.push(s)}this._data_template.groups.length>0&&(this._indexes=this.indexData(this._data))}mapData(t){this._data=new K(this._meta_row),this._data.row=t}buildLink=t=>e=>{e&&(t.key=e);for(let e in this._settings.change_intention)t[e]=this._settings.change_intention[e];return Z.updateIntention(this._stage,t),Promise.resolve()};exportToStore(){if(this._store.actions=[],this._store.stage=this._stage,this._store.component="",this._store.rawcomponent="",this._store.title=this._title,this._store.label=this._label,this._store.action=this._map.state,this._store.method=this._store.action,this._store.submiturl=this.saveurl,this._store.model=this._map.model,this._store.classes=this._map.model+" "+this._map.state,this._store.groups=this._data_template.groups,this._store.settings||(this._store.settings={}),this._settings.disable_filter&&(this._store.disable_filter=!0),this._settings.disable_selectfields&&(this._store.disable_selectfields=!0),"get"==this._map.state||"parent"==this._map.state){if(this._store.rawcomponent=this._data_template.groups.length>0?"ptj-list":this._circular||this._data_template.children.length>0?"ptj-tree":"ptj-table",this._store.component="ptj-repo",this._store.index=this._map.model+"-get",this._store.submiturl=this.loadurl,this._store.count=this._data_template.count,this._store.reload=()=>{this.buildLink({param_str:this._data_template.convertToParams()})().then((()=>{this.reload()}))},this._back&&!this._settings.hide_actions.parent&&this._store.actions.push({r:this.buildLink({model:this._back.model,state:"primary",key:this._data_template.parent.toVal()}),n:"go back"}),this._actions.post&&!this._settings.hide_actions.post&&this._store.actions.push({r:this.buildLink({state:"post"}),n:this._actions.post}),this._actions.primary?this._store.next=this.buildLink({param_str:"",state:"primary"}):this._actions.put&&(this._store.next=this.buildLink({param_str:"",state:"put"})),this._store.siblings=[],!this._settings.hide_actions.children)for(let t of this._siblings)this._store.siblings.push({r:this.buildLink({model:t.name,param_str:""}),n:t.label});this._data_template.limit>0&&(this._store.setPage=t=>{this._store.data_template.page=t,this.buildLink({param_str:this._data_template.convertToParams()})().then((()=>{this.reload()}))})}else if("primary"==this._map.state){if(this._store.component="ptj-single-item",this._store.actions=[],this._store.index=this._map.model+"-primary",this._back&&this._settings.hide_actions.parent,this._actions.put&&!this._settings.hide_actions.put&&this._store.actions.push({r:this.buildLink({state:"put"}),n:this._actions.put}),this._actions.delete&&!this._settings.hide_actions.delete&&this._store.actions.push({r:()=>{if(confirm("Are you sure you want to delete this record and all associated children?")){let t={};return t[this._meta_row.primary.name]=this._data.primary.toVal(),F.delete(this.saveURL(),t).then((()=>{let t={state:"get"};return this._global_data.parent&&(t.key=this._global_data.parent.toVal()),this.buildLink(t)()}))}return Promise.reject("Delete cancelled")},n:this._actions.delete}),this._store.children=[],!this._settings.hide_actions.children)for(let t of this._children)this._store.children.push({r:this.buildLink({state:"parent",model:t.name}),n:t.label})}else if("post"==this._map.state)this._store.component=this._actions.login?"ptj-account-handler":"ptj-form",this._store.index=this._map.model+"-post",this._store.progress={total:0,progress:0},this._store.actions=[],this._actions.login&&this._store.actions.push({r:this.buildLink({state:"login"}),n:this._actions.login}),this._store.next=t=>{let e="";return this._actions.parent?e="parent":this._actions.get?e="get":this._actions.primary&&(e="primary"),this.buildLink({state:e,active:t})()},this._store.submit=()=>this.submit("post");else if("put"==this._map.state){if(this._store.component="ptj-form",this._store.progress={total:0,progress:0},this._store.index=this._map.model+"-put",this._store.actions=[],this._actions.primary)this._store.next=this.buildLink({state:"primary"});else{let t={state:"get"};this._global_data.parent&&(t.key=this._global_data.parent.toVal()),this._store.next=this.buildLink(t)}this._store.submit=()=>this.submit("put")}else"login"==this._map.state&&(this._store.component="ptj-account-handler",this._store.index=this._map.model+"-login",this._store.progress={total:0,progress:0},this._store.submit=()=>{let t=this._data.serialize("login");return F.post(this.saveURL()+"-login",t).then((t=>{if("SUCCESS"!=t.__status)throw{message:t.statusText};return t}))},this._store.actions=[],this._actions.post&&this._store.actions.push({r:this.buildLink({state:"post"}),n:this._actions.post}));return this._store.data=this._data,this._store.indexes=this._indexes,this._store.data_template=this._data_template,this._meta_row.exportToStore(this._store),this._store}}const Q={post:"-create",put:"-update",delete:"-delete",login:"-login",logout:"-logout",primary:"-primary",parent:"-parent",get:""};class tt{constructor(){this._model,this._state="",this._key=0,this._to,this._param_str}set model(t){this._model=t}get model(){return this._model}set state(t){this._state=t}get state(){return this._state}set key(t){this._key=t}get key(){return this._key}set to(t){this._to=t}get to(){return this._to}set param_str(t){this._param_str=t}get param_str(){return this._param_str}copy(){return{model:this._model,state:this._state,key:this._key,to:this._to,param_str:this._param_str}}matches(t){return this._model==t.model&&(this._state==t.state&&this._to==t.to)}convertToURL(){let t=this._model,e=this._state,s=this._key,a=this._to,r=t+Q[e];return s&&(r+="-"+s),a&&(r+="-to-"+a),r}convertFromURL(t){if(!t)return;let e=t.split("-to-");e.length>1&&(this._to=e[1],t=e[0]),e=t.split("-");let s=e[e.length-1];if("first"==s?(this._key=s,e.pop()):isNaN(s)||(this._key=s,e.pop()),0==e.length)throw new Error("Can't convert this url string: "+t);this._state="get";for(let t in Q)if(Q[t]=="-"+e[e.length-1]){this._state=t,e.pop();break}this._model=e.join("-")}}let et=[],st=null,at="/";function rt(){let t=new tt;return et.push(t),t}var it={trigger:function(t){st=t},resetMaps:function(){et=[]},createMap:rt,convertToURL:function(){let t=[];for(let e of et)t.push(e.convertToURL());const e=new URL(window.location.protocol+"//"+window.location.host+at),s=t.join("/"),a=new URL(s,e);for(let t in et)et[t].param_str&&a.searchParams.set("stage_"+t,et[t].param_str);return a},convertFromURL:function(t){let e=t.pathname.replace(at,"");e=e.replace(/^\/+|\/+$/g,"");let s=e.split("/");et=[];for(let t in s){rt().convertFromURL(s[t])}const a=t.searchParams;for(let t in et){const e=a.get("stage_"+t);e&&(et[t].param_str=e)}st&&st()},setBase:function(t){t=t.replace(/^\/+|\/+$/g,""),at="/"+t+"/"},getMaps:function(){return et}};let lt;function ot(t){t||(t=new URL(window.location.href)),lt&&lt(t,window.location.search)}window.onpopstate=function(t){ot(new URL(document.location.href))};var nt={setRoute:function(t,e=""){window.history.pushState({name:t.pathname},document.title,t),ot(t)},hardSetRoute:function(t){window.location=t},runRoute:ot,regCallback:function(t){lt=t},softRoute:function(t,e=""){window.history.pushState({name:t.pathname},document.title,t)}};let pt=t({models:[],profile:null}),dt={},ht=[],ct=-1;function mt(){ct=-1;let t=it.getMaps();if(0==t.length)throw new Error("Error with controller run, no maps created");pt.models=[];let e=[];ht.length>t.length&&ht.splice(t.length,ht.length-t.length);for(let s in t){const a=t[s];if(s>=ht.length||!a.matches(ht[s].map)){const t=new G(a.copy(),s);ht[s]=t,console.log("Settings are ",dt,a),dt&&dt[a.model]&&dt[a.model][a.state]&&t.injectCustomSettings(dt[a.model][a.state]),e.push(t.init().then((()=>t.load())))}else e.push(ht[s].load())}Promise.all(e).then((()=>{for(let t of ht)pt.models.push(t.exportToStore())})).catch((t=>{console.log(t)}))}it.trigger((()=>{mt()})),nt.regCallback(it.convertFromURL);var _t={store:pt,models:ht,setSettings:function(t){if(t.client){if(F.setURL(t.client.url),t.client.custom_headers)for(let e in t.client.custom_headers)F.regCustomHeader(e,t.client.custom_headers[e]);t.client.debug&&F.regDebug(!0),F.regStatusHandler(403,(function(){alert("Page not found")}))}t.mapper&&t.mapper.base&&it.setBase(t.mapper.base),t.models&&(dt=t.models)},initProfile:function(){return F.get("/core-check-user").then((t=>(pt.profile=t.__profile,pt.profile)))},assumeRole:function(t){return F.post("/core-assume-role",{role:t}).then((t=>(pt.profile=t.__profile,pt.profile)))},removeRole:function(){return F.post("/core-remove-role").then((t=>(pt.profile=t.__profile,pt.profile)))},run:mt,buildLink:function(t=!1){it.resetMaps();let e=[];for(let t in ht){let s=ht[t];e.push({...s.map})}Z.convertMaps(e);for(const t of e){let e=it.createMap();for(let s in t)e[s]=t[s]}let s=it.convertToURL();t?nt.softRoute(s):nt.setRoute(s)},runLink:function(){it.runRoute()},runData:function(t=null){t||(t=new URL(window.location.href)),it.convertFromURL(t)},reloadFromBase:function(){it.resetMaps();let t=it.convertToURL();nt.setRoute(t)},getStore:function(){return pt.models[ct]},next:function(){++ct},runRoute:function(t,e,s){return F[t](e,s)}};let ut={"ptj-account-details-logout":"ptj-account-details-logout","ptj-account-handler":"ptj-account-handler","ptj-breadcrumbs":"ptj-breadcrumbs","ptj-card":"ptj-card","ptj-card-row":"ptj-card-row","ptj-card-label":"ptj-card-label","ptj-card-value":"ptj-card-value","ptj-form":"ptj-form","ptj-form-title":"ptj-form-title","ptj-form-error":"ptj-form-error","ptj-form-group":"ptj-form-group","ptj-form-submit":"ptj-form-submit","ptj-root":"ptj-root","ptj-tabs":"ptj-tabs","ptj-tabs-card":"ptj-tabs-card","ptj-tabs-tab":"ptj-tabs-tab","ptj-repo":"ptj-repo","ptj-nav":"ptj-nav","ptj-nav-link":"ptj-nav-link","ptj-single-item":"ptj-single-item","ptj-single-item-row":"ptj-single-item-row","ptj-single-item-label":"ptj-single-item-label","ptj-single-item-value":"ptj-single-item-value","ptj-single-item-actions":"ptj-single-item-actions","ptj-single-item-children":"ptj-single-item-children","ptj-widget-window":"ptj-widget-window","ptj-widget-window-header":"ptj-widget-window-header","ptj-widget-window-title":"ptj-widget-window-title","ptj-widget-window-toggle":"ptj-widget-window-toggle","ptj-widget-window-body":"ptj-widget-window-body","ptj-repo-header-title":"ptj-repo-header-title","ptj-repo-header-actions":"ptj-repo-header-actions","ptj-tree":"ptj-tree","ptj-form-row":"ptj-form-row","ptj-form-input-row":"ptj-form-input-row","ptj-form-input-label":"ptj-form-input-label","ptj-form-input":"ptj-form-input","ptj-table":"ptj-table","ptj-table-header":"ptj-table-header","ptj-table-header-cell":"ptj-table-header-cell","ptj-table-row":"ptj-table-row","ptj-table-cell":"ptj-table-cell","ptj-table-cell-sortable":"ptj-table-cell-sortable","ptj-form-confirm-row":"ptj-form-confirm-row","ptj-form-confirm-label":"ptj-form-confirm-label","ptj-form-confirm":"ptj-form-confirm","ptj-pagination":"ptj-pagination","ptj-filter-form":"ptj-filter-form","ptj-filter-form-group":"ptj-filter-form-group","ptj-filter-form-submit":"ptj-filter-form-submit","ptj-form-select-row":"ptj-form-select-row","ptj-form-select-label":"ptj-form-select-label","ptj-form-select":"ptj-form-select","ptj-tree-node":"ptj-tree-node","ptj-tree-node-row":"ptj-tree-node-row","ptj-selectfields":"ptj-selectfields","ptj-selectfields-checkbox":"ptj-selectfields-checkbox","ptj-selectfields-label":"ptj-selectfields-label","ptj-form-radio-row":"ptj-form-radio-row","ptj-form-radio-label":"ptj-form-radio-label","ptj-form-radio-option-label":"ptj-form-radio-option-label","ptj-checkbox-row":"ptj-checkbox-row","ptj-checkbox-label":"ptj-checkbox-label","ptj-checkbox":"ptj-checkbox","ptj-form-textarea-row":"ptj-form-textarea-row","ptj-form-textarea-label":"ptj-form-textarea-label","ptj-form-textarea":"ptj-form-textarea","ptj-form-asset-row":"ptj-form-asset-row","ptj-form-asset-label":"ptj-form-asset-label","ptj-form-asset":"ptj-form-asset","ptj-progress-bar-wrapper":"ptj-progress-bar-wrapper","ptj-progress-bar-holder":"ptj-progress-bar-holder","ptj-progress-bar":"ptj-progress-bar","ptj-error":"ptj-error","ptj-filter-form-time-row":"ptj-filter-form-time-row","ptj-filter-form-time-label":"ptj-filter-form-time-label","ptj-filter-form-time-1":"ptj-filter-form-time-1","ptj-filter-form-time-2":"ptj-filter-form-time-2","ptj-filter-form-checkbox-row":"ptj-filter-form-checkbox-row","ptj-filter-form-checkbox-label":"ptj-filter-form-checkbox-label","ptj-filter-form-checkbox":"ptj-filter-form-checkbox","ptj-account-details-logout":"ptj-account-details-logout","ptj-accounthandler":"ptj-accounthandler","ptj-list":"ptj-list"};var ft={regClass:function(t,e){ut[t]=e},getClass:function(t){return ut[t]}},gt=s({name:"ptj-progress-bar",props:{total:Number,progress:Number},setup:()=>({Class:ft}),computed:{num(){let t=Math.floor(this.progress/this.total*100);return isNaN(t)?0:t},style(){return"width:"+this.num+"%;"}}});function jt(t,e){void 0===e&&(e={});var s=e.insertAt;if(t&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===s&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}jt("\n.ptj-progress-holder[data-v-460b10ff] {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\n}\n.ptj-bar[data-v-460b10ff] {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\n}\r\n\r\n\r\n"),gt.render=function(t,e,s,i,d,h){return a(),r("div",{class:l(t.Class.getClass("ptj-progress-bar-wrapper"))},[o("div",{class:l(t.Class.getClass("ptj-progress-bar-holder")+" ptj-progress-holder")},[o("div",{class:l(t.Class.getClass("ptj-progress-bar")+" ptj-bar"),style:n(t.style)}," ",6)],2),o("span",null,p(t.num)+"%",1)],2)},gt.__scopeId="data-v-460b10ff",gt.__file="presstojam/src/components/ptj-progress-bar.vue";var bt=s({name:"ptj-error",props:{error:[Number,String]},setup:()=>({Class:ft})});jt("\n.error {\r\n  color : red;\n}\r\n"),bt.render=function(t,e,s,i,o,n){return a(),r("p",{class:l(t.Class.getClass("ptj-error"))},p(t.error),3)},bt.__file="presstojam/src/components/ptj-error.vue";var yt=s({props:{field:Object},setup:t=>({Class:ft}),computed:{classes(){return ft.getClass("ptj-form-row")+" "+this.field.meta.type}},components:{"ptj-error":bt}});yt.render=function(t,e,s,i,n,u){const f=d("ptj-error");return a(),r("div",{class:l(t.classes)},[o("label",{class:l(t.Class.getClass("ptj-form-label"))},p(t.field.meta.label),3),h(t.$slots,"default"),c(m(f,{error:t.field.error},null,8,["error"]),[[_,t.field.showError]])],2)},yt.__file="presstojam/src/components/ptj-form-row.vue";var vt=s({name:"ptj-number",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},setup:()=>({Class:ft})});const wt=["name","readonly"],Ct={key:1},kt=["name","readonly"],xt=g(" - "),St=["name","readonly"],Lt={key:2};vt.render=function(t,e,s,i,o,n){return t.editable?c((a(),r("input",{key:0,class:l(t.Class.getClass("ptj-form-number")),name:t.field.meta.name,type:"number","onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),onBlur:e[1]||(e[1]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly},null,42,wt)),[[u,t.field.val]]):t.filter?(a(),r("div",Ct,[t.editable?c((a(),r("input",{key:0,class:l(t.Class.getClass("ptj-form-number")),name:t.field.meta.name,type:"number","onUpdate:modelValue":e[2]||(e[2]=e=>t.field.val=e),onBlur:e[3]||(e[3]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly},null,42,kt)),[[u,t.field.val]]):f("v-if",!0),xt,t.editable?c((a(),r("input",{key:1,class:l(t.Class.getClass("ptj-form-number")),name:t.field.meta.name,type:"number","onUpdate:modelValue":e[4]||(e[4]=e=>t.field.val=e),onBlur:e[5]||(e[5]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly},null,42,St)),[[u,t.field.val]]):f("v-if",!0)])):(a(),r("span",Lt,p(t.field.val),1))},vt.__file="presstojam/src/components/ptj-number.vue";var Rt=s({name:"ptj-flag",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},data:()=>({cval:""}),setup:()=>({Class:ft})});const Vt=["name"],Ut=["name"],Et=[o("option",{value:0},p("All"),-1),o("option",{value:1},p("Checked"),-1),o("option",{value:2},p("Unchecked"),-1)],Ot={key:2};Rt.render=function(t,e,s,i,o,n){return t.editable?c((a(),r("input",{key:0,class:l(t.Class.getClass("ptj-checkbox")),type:"checkbox","true-value":1,"false-value":0,name:t.field.meta.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e)},null,10,Vt)),[[j,t.field.val]]):t.filter?c((a(),r("select",{key:1,name:t.field.meta.name,"onUpdate:modelValue":e[1]||(e[1]=e=>t.field.val=e),class:l(t.Class.getClass("ptj-filter-form-checkbox"))},Et,10,Ut)),[[b,t.field.val]]):(a(),r("button",Ot,p(t.field.val),1))},Rt.__file="presstojam/src/components/ptj-flag.vue";var At=s({name:"ptj-flag",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},data:()=>({cval:""}),computed:{atts(){}},setup:()=>({Class:ft})});const Pt=["name"],Bt=o("option",{value:"0",selected:""},"Select Option",-1),Tt=["value"],Dt=["name"],Nt=o("option",{value:"0",selected:"",disabled:""},"All",-1),Mt=["value"],Ft={key:2};At.render=function(t,e,s,i,l,o){return t.editable?c((a(),r("select",y({key:0,class:t.Class.getClass("ptj-form-select"),"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),name:t.field.meta.name},t.atts,{onBlur:e[1]||(e[1]=e=>t.field.validateon=!0)}),[Bt,(a(!0),r(v,null,w(t.field.meta.options,(t=>(a(),r("option",{key:t.key,value:t.key},p(t.value),9,Tt)))),128))],16,Pt)),[[b,t.field.val]]):t.filter?c((a(),r("select",y({key:1,class:t.Class.getClass("ptj-form-select"),"onUpdate:modelValue":e[2]||(e[2]=e=>t.field.val=e),name:t.field.meta.name},t.atts,{onBlur:e[3]||(e[3]=e=>t.field.validateon=!0),multiple:"true"}),[Nt,(a(!0),r(v,null,w(t.field.meta.options,(t=>(a(),r("option",{key:t.key,value:t.key},p(t.value),9,Mt)))),128))],16,Dt)),[[b,t.field.val]]):(a(),r("span",Ft,p(t.field.val),1))},At.__file="presstojam/src/components/ptj-id.vue";var It=s({name:"ptj-time",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},setup:()=>({Class:ft})});const zt=["name","readonly"],Ht={key:1},Jt=g(" - "),Xt={key:2};It.render=function(t,e,s,i,n,d){return t.editable?c((a(),r("input",{key:0,class:l(t.Class.getClass("ptj-form-time")),name:t.field.meta.name,type:"datetime-local","onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),onBlur:e[1]||(e[1]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly},null,42,zt)),[[u,t.field.val]]):t.filter?(a(),r("div",Ht,[c(o("input",{class:l(t.Class.getClass("ptj-filter-form-time-1")),type:"datetime-local","onUpdate:modelValue":e[2]||(e[2]=e=>t.field.val1=e)},null,2),[[u,t.field.val1]]),Jt,c(o("input",{class:l(t.Class.getClass("ptj-filter-form-time-2")),type:"datetime-local","onUpdate:modelValue":e[3]||(e[3]=e=>t.field.val2=e)},null,2),[[u,t.field.val2]])])):(a(),r("span",Xt,p(t.field.val),1))},It.__file="presstojam/src/components/ptj-time.vue";var qt=s({name:"ptj-string-editable",props:{field:Object},setup:()=>({Class:ft}),methods:{isEnum(t){if(!t)return null;let e=[];const s=new RegExp(/^[a-zA-Z]+[a-zA-Z0-9._]+$/),a=t.split("|");for(let t of a)if(t){if(!s.test(t))return null;e.push(t)}return e}},computed:{tag(){return this.isEnum(this.field.meta.validator.contains)?"select":this.field.meta.html||this.field.meta.max>150?"textarea":"input"},options(){const t=this.field.meta.validator.contains.split("|");let e=[];for(let s of t)e.push({key:s,value:s});return e},atts(){let t={};return this.field.meta.encrypted&&(t.type="password"),this.field.meta.readonly&&(t.readonly=!0),this.field.meta.placeholder&&(t.placeholder=field.meta.placeholder),this.field.meta.html&&(t["data-html"]=1),t}}});const Wt=["name"],$t=["name"],Kt=o("option",{value:"0",selected:"",disabled:""},"Select Option",-1),Yt=["value"],Zt=["name","readonly"];qt.render=function(t,e,s,i,l,o){return"textarea"==t.tag?c((a(),r("textarea",y({key:0},t.atts,{name:t.field.meta.name,"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e)}),null,16,Wt)),[[u,t.field.val]]):"select"==t.tag?c((a(),r("select",y({key:1,class:t.Class.getClass("ptj-form-select"),"onUpdate:modelValue":e[1]||(e[1]=e=>t.field.val=e),name:t.field.meta.name},t.atts,{onBlur:e[2]||(e[2]=e=>t.field.validateon=!0)}),[Kt,(a(!0),r(v,null,w(t.options,(t=>(a(),r("option",{key:t.key,value:t.key},p(t.value),9,Yt)))),128))],16,$t)),[[b,t.field.val]]):c((a(),r("input",y({key:2},t.atts,{class:t.Class.getClass("ptj-form-number"),name:t.field.meta.name,"onUpdate:modelValue":e[3]||(e[3]=e=>t.field.val=e),onBlur:e[4]||(e[4]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly}),null,16,Zt)),[[C,t.field.val]])},qt.__file="presstojam/src/components/ptj-string-editable.vue";var Gt=s({name:"ptj-string-display",props:{field:Object},setup:()=>({Class:ft}),computed:{tag(){return this.field.meta.html||this.field.meta.max>150?"textarea":"input"}}});const Qt={key:0},te={key:1};Gt.render=function(t,e,s,i,l,o){return"textarea"==t.tag?(a(),r("div",Qt,p(t.field.val),1)):(a(),r("span",te,p(t.field.val),1))},Gt.__file="presstojam/src/components/ptj-string-display.vue";var ee=s({name:"ptj-string-filter",props:{field:Object},setup:()=>({Class:ft}),methods:{isEnum(t){if(!t)return null;let e=[];const s=new RegExp(/^[a-zA-Z]+[a-zA-Z0-9._]+$/),a=t.split("|");for(let t of a)if(t){if(!s.test(t))return null;e.push(t)}return e}},computed:{tag(){return this.isEnum(this.field.meta.validator.contains)?"select":this.field.meta.html||this.field.meta.max>150?"textarea":"input"},options(){const t=this.field.meta.validator.contains.split("|");let e=[];for(let s of t)e.push({key:s,value:s});return e},atts(){let t={};return this.field.meta.encrypted&&(t.type="hidden"),this.field.meta.readonly&&(t.readonly=!0),this.field.meta.placeholder&&(t.placeholder=field.meta.placeholder),this.field.meta.html&&(t["data-html"]=1),t}}});const se=["name"],ae=o("option",{value:"0",selected:"",disabled:""},"Select Option",-1),re=["value"],ie=["name","readonly"];ee.render=function(t,e,s,i,l,o){return"select"==t.tag?c((a(),r("select",y({key:0,class:t.Class.getClass("ptj-form-select"),"onUpdate:modelValue":e[0]||(e[0]=e=>t.field.val=e),name:t.field.meta.name},t.atts,{onBlur:e[1]||(e[1]=e=>t.field.validateon=!0),multiple:"true"}),[ae,(a(!0),r(v,null,w(t.options,(t=>(a(),r("option",{key:t.key,value:t.key},p(t.value),9,re)))),128))],16,se)),[[b,t.field.val]]):c((a(),r("input",y({key:1},t.atts,{class:t.Class.getClass("ptj-form-number"),name:t.field.meta.name,"onUpdate:modelValue":e[2]||(e[2]=e=>t.field.val=e),onBlur:e[3]||(e[3]=e=>t.field.validateon=!0),readonly:t.field.meta.readonly}),null,16,ie)),[[C,t.field.val]])},ee.__file="presstojam/src/components/ptj-string-filter.vue";var le=s({name:"ptj-string",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},setup:()=>({Class:ft}),components:{"ptj-string-editable":qt,"ptj-string-display":Gt,"ptj-string-filter":ee}});le.render=function(t,e,s,r,i,l){const o=d("ptj-string-editable"),n=d("ptj-string-filter"),p=d("ptj-string-display");return t.editable?(a(),k(o,{key:0,field:t.field},null,8,["field"])):t.filter?(a(),k(n,{key:1,field:t.field},null,8,["field"])):(a(),k(p,{key:2,field:t.field},null,8,["field"]))},le.__file="presstojam/src/components/ptj-string.vue";var oe=s({name:"ptj-asset",props:{field:Object,editable:{type:Boolean,default:!1},filter:{type:Boolean,default:!1}},setup:()=>({Class:ft})});const ne=["name"],pe={key:1};oe.render=function(t,e,s,i,o,n){return t.editable?(a(),r("input",{key:0,class:l(t.Class.getClass("ptj-form-asset")),ref:"input",onChange:e[0]||(e[0]=(...e)=>t.setFile&&t.setFile(...e)),name:t.field.meta.name,type:"file"},null,42,ne)):(a(),r("span",pe,p(t.field.val),1))},oe.__file="presstojam/src/components/ptj-asset.vue";var de=s({name:"ptj-form",data:()=>({fstate:0,globalerror:""}),setup:()=>({store:_t.getStore(),Class:ft}),methods:{clearErrors(){this.globalerror="";for(let t in this.store.data.cells)this.store.data.cells[t].error=0},submit(){return this.fstate=this.total>0?1:2,this.clearErrors(),this.store.submit().then((t=>{this.store.next(t),_t.buildLink()})).catch((t=>{if(this.fstate=0,console.log(t),"string"==typeof t)this.globalerror=t;else for(let e in t){if(0===e.indexOf("__"))continue;const s=this.store.data.cells[e];s&&(s.error=z.getError(t[e]))}}))}},components:{"ptj-string":le,"ptj-time":It,"ptj-asset":oe,"ptj-id":At,"ptj-progress-bar":gt,"ptj-form-row":yt,"ptj-flag":Rt,"ptj-number":vt}});de.render=function(t,e,s,i,n,h){const u=d("ptj-asset"),g=d("ptj-number"),j=d("ptj-flag"),b=d("ptj-id"),y=d("ptj-time"),C=d("ptj-string"),L=d("ptj-form-row"),R=d("ptj-progress-bar");return a(),r(v,null,[c(o("form",{onSubmit:e[0]||(e[0]=x(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:l(t.Class.getClass("ptj-form")+" "+t.store.classes)},[c(o("div",{class:l(t.Class.getClass("ptj-form-error"))},p(t.globalerror),3),[[_,t.globalerror]]),(a(!0),r(v,null,w(t.store.data.cells,(e=>(a(),k(L,{key:e.meta.name,field:e,class:l(t.Class.getClass("ptj-form-group"))},{default:S((()=>["asset"==e.meta.type?(a(),k(u,{key:0,editable:!0,field:e},null,8,["field"])):"number"==e.meta.type?(a(),k(g,{key:1,editable:!0,field:e},null,8,["field"])):"flag"==e.meta.type?(a(),k(j,{key:2,editable:!0,field:e},null,8,["field"])):"id"==e.meta.type?(a(),k(b,{key:3,editable:!0,field:e},null,8,["field"])):"time"==e.meta.type?(a(),k(y,{key:4,editable:!0,field:e},null,8,["field"])):"string"==e.meta.type?(a(),k(C,{key:5,editable:!0,field:e},null,8,["field"])):f("v-if",!0)])),_:2},1032,["field","class"])))),128)),o("input",{type:"submit",value:"Submit",class:l(t.Class.getClass("ptj-form-submit"))},null,2)],34),[[_,0==t.fstate]]),c(m(R,{total:t.store.progress.total,progress:t.store.progress.progress},null,8,["total","progress"]),[[_,1==t.fstate]])],64)},de.__file="presstojam/src/components/ptj-form.vue";var he=s({name:"ptj-nav",props:{actions:Array,classes:{type:String,default:""}},setup:()=>({Class:ft}),methods:{setRoute(t){t.r().then((()=>{_t.buildLink()})).catch((t=>console.log(t)))}}});const ce=["onClick"];he.render=function(t,e,s,i,o,n){return a(),r("span",{class:l(t.Class.getClass("ptj-nav")+" "+t.classes)},[(a(!0),r(v,null,w(t.actions,(e=>(a(),r("a",{key:e,onClick:s=>{t.setRoute(e)},class:l(t.Class.getClass("ptj-nav-link"))},p(e.n),11,ce)))),128))],2)},he.__file="presstojam/src/components/ptj-nav.vue";var me=s({props:{title:String,active:{type:Boolean,default:!1},classes:{type:String,default:""}},setup:()=>({Class:ft}),data(){return{show:this.active}},methods:{toggleWidget(){this.show=!this.show}}});const _e=[o("span",{class:"material-icons"},"more_horiz",-1)],ue={class:"Class.getClass('ptj-widget-window-body')"};me.render=function(t,e,s,i,n,d){return a(),r("div",{class:l(t.Class.getClass("ptj-widget-window")+" "+t.classes)},[o("div",{class:l(t.Class.getClass("ptj-widget-window-header"))},[o("h1",{class:l(t.Class.getClass("ptj-widget-window-title"))},[g(p(t.title)+" ",1),o("a",{class:l(t.Class.getClass("ptj-widget-window-toggle")),onClick:e[0]||(e[0]=(...e)=>t.toggleWidget&&t.toggleWidget(...e))},_e,2)],2)],2),c(o("div",ue,[h(t.$slots,"default",{toggleWidget:t.toggleWidget})],512),[[_,t.show]])],2)},me.__file="presstojam/src/components/ptj-widget-window.vue";var fe=s({name:"ptj-filter-form",setup:()=>({store:_t.getStore(),Class:ft}),methods:{submit(){this.store.reload(),_t.buildLink(!0)}},components:{"ptj-form-row":yt,"ptj-id":At,"ptj-flag":Rt,"ptj-time":It,"ptj-number":vt,"ptj-string":le,"ptj-widget":me}});const ge=["onClick"];jt("\n.error[data-v-71ada21d] {\r\n  color : red;\n}\r\n\r\n"),fe.render=function(t,e,s,i,n,h){const c=d("ptj-id"),m=d("ptj-flag"),_=d("ptj-number"),u=d("ptj-time"),g=d("ptj-string"),j=d("ptj-form-row"),b=d("ptj-widget");return a(),k(b,{title:"search"},{default:S((s=>[o("form",{onSubmit:e[0]||(e[0]=x(((...e)=>t.submit&&t.submit(...e)),["prevent"])),class:l(t.Class.getClass("ptj-filter-form"))},[o("h1",null,"Search "+p(t.store.title),1),(a(!0),r(v,null,w(t.store.data_template.cells,(e=>(a(),k(j,{key:e.meta.name,field:e,class:l(t.Class.getClass("ptj-filter-form-group"))},{default:S((()=>["id"==e.meta.type?(a(),k(c,{key:0,filter:!0,field:e},null,8,["field"])):"flag"==e.meta.type?(a(),k(m,{key:1,filter:!0,field:e},null,8,["field"])):"number"==e.meta.type?(a(),k(_,{key:2,filter:!0,field:e},null,8,["field"])):"time"==e.meta.type?(a(),k(u,{key:3,filter:!0,field:e},null,8,["field"])):"string"==e.meta.type?(a(),k(g,{key:4,filter:!0,field:e},null,8,["field"])):f("v-if",!0)])),_:2},1032,["field","class"])))),128)),o("input",{type:"submit",value:"Submit",class:l(t.Class.getClass("ptj-filter-form-submit")),onClick:s.toggleWidget},null,10,ge)],34)])),_:1})},fe.__scopeId="data-v-71ada21d",fe.__file="presstojam/src/components/ptj-filter-form.vue";var je=s({setup:()=>({store:_t.getStore(),Class:ft}),methods:{setPage(t){this.store.setPage(t-1),_t.buildLink(!0)},getActiveClass(t){return t-1==this.store.data_template.page?"ptj-pagination-active":""}}});const be=["onClick"];je.render=function(t,e,s,i,o,n){return a(),r("div",{class:l(t.Class.getClass("ptj-pagination"))},[(a(!0),r(v,null,w(t.store.data_template.max_pages,(e=>(a(),r("a",{key:e,onClick:s=>t.setPage(e),class:l(t.getActiveClass(e))},p(e),11,be)))),128))],2)},je.__file="presstojam/src/components/ptj-pagination.vue";var ye=s({setup:()=>({store:_t.getStore(),Class:ft}),components:{"ptj-widget":me}});const ve=["onUpdate:modelValue"];ye.render=function(t,e,s,i,n,h){const m=d("ptj-widget");return a(),k(m,{title:"select fields",classes:t.Class.getClass("ptj-selectfields")},{default:S((()=>[(a(!0),r(v,null,w(t.store.fields,((e,s)=>(a(),r("div",{key:s},[c(o("input",{type:"checkbox","onUpdate:modelValue":t=>e.summary=t,"true-value":1,"false-value":0,class:l(t.Class.getClass("ptj-selectfields-checkbox"))},null,10,ve),[[j,e.summary]]),o("label",{class:l(t.Class.getClass("ptj-selectfields-label"))},p(e.name),3)])))),128))])),_:1},8,["classes"])},ye.__file="presstojam/src/components/ptj-selectfields.vue";var we=s({name:"ptj-header",setup:()=>({store:_t.getStore(),Class:ft}),components:{"ptj-nav":he,"ptj-filter-form":fe,"ptj-pagination":je,"ptj-selectfields":ye}});const Ce={key:0};we.render=function(t,e,s,i,n,h){const c=d("ptj-nav"),_=d("ptj-filter-form"),u=d("ptj-selectfields");return a(),r(v,null,[o("h1",{class:l(t.Class.getClass("ptj-repo-header-title"))},p(t.store.title),3),t.store.count?(a(),r("p",Ce,"Number of rows: "+p(t.store.count),1)):f("v-if",!0),m(c,{actions:t.store.actions,class:l(t.Class.getClass("ptj-repo-header-actions"))},null,8,["actions","class"]),1!=t.store.disable_filter?(a(),k(_,{key:1})):f("v-if",!0),1!=t.store.disable_selectfields?(a(),k(u,{key:2})):f("v-if",!0)],64)},we.__file="presstojam/src/components/ptj-repo-header.vue";var ke=s({name:"ptj-tree-node",props:{branch:{type:Object,required:!0},draggable:Boolean,ischild:{type:Boolean,default:!1}},data:()=>({toggle_state:{}}),setup:()=>({store:_t.getStore(),Class:ft}),methods:{toggle(t){this.toggle_state[t]=!this.toggle_state[t]},setDraggable(t){t.target.closest(".ptj-draggable").setAttribute("draggable",!0)},endDraggable(t){t.target.closest(".ptj-draggable").setAttribute("draggable",!1)},selectRow(t){let e=t.primary.toVal();this.store.next(e),_t.buildLink()},getRowClass(){let t=[];for(let e of this.store.groups)t.push(this.store.model+"-"+e.replace("_","-")+"-"+this.branch[e]);return t.join(" ")}},computed:{sortable:()=>!0,children(){let t=[],e=this.branch.children;for(let s in e){const a=e[s];t.push(...a)}return t}},components:{}});const xe=t=>(L("data-v-1dcaa9f5"),t=t(),R(),t),Se=["id"],Le=[xe((()=>o("span",{class:"material-icons"},"subdirectory_arrow_right",-1)))],Re=[xe((()=>o("span",{class:"material-icons"},"keyboard_arrow_right",-1)))],Ve={key:0},Ue=[xe((()=>o("span",{class:"material-icons"},"drag_handle",-1)))];jt("\n.model-tree.branch[data-v-1dcaa9f5] {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\n}\n.tree .ide-block[data-v-1dcaa9f5] {\r\n\tdisplay : none;\n}\n.dragArea[data-v-1dcaa9f5] {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\n}\r\n\r\n\r\n"),ke.render=function(t,e,s,i,n,h){const m=d("ptj-tree-node",!0);return a(),r("div",{class:l(t.Class.getClass("ptj-tree-node")+" ptj-draggable"+this.getRowClass()),id:t.branch.primary.toVal(),draggable:"false"},[o("div",{class:l(t.Class.getClass("ptj-tree-node-row")),onClick:e[5]||(e[5]=e=>{t.selectRow(t.branch)})},[o("div",null,[t.ischild?(a(),r("a",{key:0,"data-action":"more",class:"button",onClick:e[0]||(e[0]=x((e=>t.toggle(t.branch.primary.toVal(),!1)),["prevent","stop"]))},Le)):(a(),r("a",{key:1,"data-action":"more",class:"button",onClick:e[1]||(e[1]=x((e=>t.toggle(t.branch.primary.toVal(),!0)),["prevent","stop"]))},Re))]),t.sortable?(a(),r("div",Ve,[o("a",{"data-action":"more",class:"button",onClick:e[2]||(e[2]=(...e)=>t.prevent.stop&&t.prevent.stop(...e)),onMousedown:e[3]||(e[3]=(...e)=>t.setDraggable&&t.setDraggable(...e)),onMouseup:e[4]||(e[4]=(...e)=>t.endDraggable&&t.endDraggable(...e))},Ue,32)])):f("v-if",!0),o("div",null,p(t.branch.getSummary()),1)],2),(a(!0),r(v,null,w(t.children,((e,s)=>c((a(),k(m,{branch:e,ischild:!0,key:s,store:t.store},null,8,["branch","store"])),[[_,t.toggle_state[t.branch.primary.toVal()]]]))),128))],10,Se)},ke.__scopeId="data-v-1dcaa9f5",ke.__file="presstojam/src/components/ptj-tree-node.vue";class Ee{constructor(t={}){this._handle=t.handle,this._drop_target=t.drop_target,this._drag_target=t.drag_target,this._call_back=t.callback,this._x=0,this._y=0,this._offset_x=0,this._offset_y=0,this._judder=t.judder?t.judder:5,this._drag_node,this._drop_node,this._tree=t.tree}isJudder(t,e){const s=t-this._x,a=e-this._y;return!(s<-5||s>5)&&!(a<-5||a>5)}getDirection(t,e){return{x:t==this._x?0:t>this._x?1:-1,y:e==this._y?0:e>this._y?1:-1}}offset(t){var e=t.getBoundingClientRect(),s=t.ownerDocument.defaultView;return{top:e.top+s.pageYOffset,left:e.left+s.pageXOffset}}insertAfter(){let t=this._drag_node.getAttribute("id"),e=this._drop_node.getAttribute("id"),s=0,a=0;if(this._drop_node.nextElementSibling){for(let t in this._tree){let r=this._tree[t];if(r.id==e){s=r.circular,a=r.sort;break}}for(let e in this._tree){let r=this._tree[e];r.id==t?(r.circular=s,r.sort=a+1):r.circular==s&&r.sort>a&&++r.sort}}else for(let e in this._tree){let a=this._tree[e];a.id==t&&(a.circular=s,a.sort=0)}}insertBefore(){let t=this._drag_node.getAttribute("id"),e=this._drop_node.getAttribute("id"),s=0,a=0;for(let t in this._tree){let r=this._tree[t];if(r.id==e){s=r.circular,a=r.sort,++r.sort;break}}for(let e in this._tree){let r=this._tree[e];r.id==t?(r.circular=s,r.sort=a):r.circular==s&&r.sort>a&&++r.sort}}dragStart(t){const e=t.target.closest("[id]");this._drag_node=e;const{top:s,left:a}=this.offset(e);t.dataTransfer.dropEffect="move",this._x=t.clientX,this._y=t.clientY,this._offset_x=t.clientX-a,this._offset_y=t.clientY-s}isDroppable(t){return!!t.target.closest(this._drop_target)}dragEnter(t){if(!this.isDroppable(t))return!0;if(t.preventDefault(),t.dataTransfer.dropEffect="move",this._drop_node=t.target.closest(this._drag_target),!this._drop_node||this._drop_node.getAttribute("id")==this._drag_node.getAttribute("id"))return;const e=this.getDirection(t.clientX,t.clientY);1==e.y?this.insertAfter():-1==e.y&&this.insertBefore(),this._x=t.clientX,this._y=t.clientY}dragOver(t){if(!this.isDroppable(t))return!0;t.preventDefault(),t.dataTransfer.dropEffect="move"}dragEnd(){this._drag_node&&this._drag_node.setAttribute("draggable",!1),this._drag_node=null}drop(t){if(!this._drop_node)return!0;t.preventDefault(),this._call_back&&this._call_back(this._tree)}}var Oe={initDD:function(t){let e=new Ee(t);if(document.querySelectorAll(t.handle).forEach((t=>t.addAttribute("draggable",!0))),t.handle){document.querySelectorAll(t.handle).forEach((e=>{e.addEventListener("mousedown",(e=>{e.target.closest(t.drag_target).addAttribute("draggable",!0)}))}))}t.main.addEventListener("dragstart",(t=>e.dragStart(t))),t.main.addEventListener("dragenter",(t=>e.dragEnter(t))),t.main.addEventListener("dragover",(t=>e.dragOver(t))),t.main.addEventListener("drop",(t=>e.drop(t))),t.main.addEventListener("dragend",(t=>e.dragEnd(t)))}},Ae=s({name:"ptj-tree",setup(t){let e={store:_t.getStore(),treeroot:V(null),Class:ft};return U((()=>{Oe.initDD({handle:".ptj-drag-handle",drag_target:".ptj-draggable",drop_target:".ptj-drop-target",main:e.treeroot.value,tree:e.store.data,callback:e.store.saveSort})})),e},components:{"ptj-nav":he,"ptj-tree-node":ke,"ptj-filter-form":fe,"ptj-selectfields":ye}});Ae.render=function(t,e,s,i,o,n){const p=d("ptj-tree-node");return a(),r("div",{class:l(t.Class.getClass("ptj-tree")+" "+t.store.classes+" ptj-drop-target"),ref:"treeroot"},[(a(!0),r(v,null,w(t.store.data,((t,e)=>(a(),k(p,{key:e,branch:t},null,8,["branch"])))),128))],2)},Ae.__file="presstojam/src/components/ptj-tree.vue";var Pe=s({name:"ptj-table",setup:()=>(console.log(_t.getStore().fields),{store:_t.getStore(),Class:ft,order:{name:"",dir:""}}),methods:{next(t){this.store.next(t),_t.buildLink()},orderBy(t){if(this.store.pages>0){this.order.dir=!this.order.name!=t||"desc"==this.order.dir?"asc":"desc",this.order.name=t;let e=[];e[this.order.name]=this.order.dir,this.store.data_template.sort=e,this.store.reload()}else this.order.name!=t||"desc"==this.order.dir?(this.store.data.sort((function(e,s){let a=e.getCell(t).toVal(),r=s.getCell(t).toVal();return a<r?-1:a>r?1:0})),this.order.name=t,this.order.dir="asc"):(this.store.data.sort((function(e,s){let a=e.getCell(t).toVal(),r=s.getCell(t).toVal();return a<r?1:a>r?-1:0})),this.order.name=t,this.order.dir="desc")},getRowClass(t){let e=[];for(let s of this.store.groups)e.push(this.store.model+"-"+s.replace("_","-")+"-"+t[s]);return e.join(" ")}},computed:{sortable(){return!!this.store.sort},overlimit:()=>!1,rowclass(){}},components:{"ptj-pagination":je,"ptj-string":le,"ptj-time":It,"ptj-asset":oe,"ptj-id":At,"ptj-flag":Rt,"ptj-number":vt}});const Be=["onClick"],Te={key:0,class:"material-icons"},De={key:1,class:"material-icons"},Ne={key:0},Me=["onClick"],Fe=[(t=>(L("data-v-15ab9672"),t=t(),R(),t))((()=>o("span",{class:"material-icons"},"drag",-1)))];jt("\n.table[data-v-15ab9672], .thead[data-v-15ab9672], .tbody[data-v-15ab9672], .tr[data-v-15ab9672] {\r\n    width : 100%;\n}\r\n\r\n\r\n"),Pe.render=function(t,e,s,i,n,h){const m=d("ptj-asset"),u=d("ptj-number"),j=d("ptj-flag"),b=d("ptj-id"),y=d("ptj-time"),C=d("ptj-string"),S=d("ptj-pagination");return a(),r(v,null,[o("table",{class:l(t.Class.getClass("ptj-table")+" "+t.store.classes)},[o("thead",null,[o("tr",{class:l(t.Class.getClass("ptj-table-header"))},[(a(!0),r(v,null,w(t.store.fields,(e=>c((a(),r("th",{key:e.name,class:l(t.Class.getClass("ptj-table-header-cell")+" "+e.name.replace("_","-")),onClick:s=>{t.orderBy(e.name)}},[g(p(e.label)+" ",1),this.order.name==e.name&&"asc"==this.order.dir?(a(),r("span",Te,"keyboard_arrow_up")):f("v-if",!0),this.order.name==e.name&&"desc"==this.order.dir?(a(),r("span",De,"keyboard_arrow_down")):f("v-if",!0)],10,Be)),[[_,e.summary]]))),128)),t.sortable?(a(),r("th",Ne," ")):f("v-if",!0)],2)]),o("tbody",null,[(a(!0),r(v,null,w(t.store.data,((s,i)=>(a(),r("tr",{key:i,class:l(t.Class.getClass("ptj-table-row")+" "+this.getRowClass(s)),onClick:e=>{t.next(s.primary.toVal())}},[(a(!0),r(v,null,w(s.cells,((e,s)=>c((a(),r("td",{key:s,class:l(t.Class.getClass("ptj-table-cell")+" "+s.replace("_","-"))},["asset"==e.meta.type?(a(),k(m,{key:0,field:e},null,8,["field"])):"number"==e.meta.type?(a(),k(u,{key:1,field:e},null,8,["field"])):"flag"==e.meta.type?(a(),k(j,{key:2,field:e},null,8,["field"])):"id"==e.meta.type?(a(),k(b,{key:3,field:e},null,8,["field"])):"time"==e.meta.type?(a(),k(y,{key:4,field:e},null,8,["field"])):"string"==e.meta.type?(a(),k(C,{key:5,field:e},null,8,["field"])):f("v-if",!0)],2)),[[_,e.meta.summary]]))),128)),t.sortable?(a(),r("td",{key:0,class:l(t.Class.getClass("ptj-table-cell-sortable"))},[o("a",{"data-action":"more",class:"button",onClick:e[0]||(e[0]=x(((...e)=>t.toggle&&t.toggle(...e)),["prevent"])),draggable:"true"},Fe)],2)):f("v-if",!0)],10,Me)))),128))])],2),t.store.data_template.limit>0?(a(),k(S,{key:0})):f("v-if",!0)],64)},Pe.__scopeId="data-v-15ab9672",Pe.__file="presstojam/src/components/ptj-table.vue";var Ie=s({name:"ptj-list",setup:()=>({store:_t.getStore(),Class:ft}),methods:{next(t){this.store.next(t),_t.buildLink()},getCombinations(t,e,s){const a=[];if(0==s.length)for(let t in e)a.push({tags:[e[t].display],data:e[t].contains});else for(let t of s)for(let s in e){let r=t.tags;r.push(s.display),a.push({tags:r,data:t.data.filter((t=>e[s].contains.includes(t)))})}return a}},computed:{getIndexCombinations(){let t=[];for(let e in this.store.indexes)t=this.getCombinations(e,this.store.indexes[e],t);return t}}});const ze=["onClick"];Ie.render=function(t,e,s,i,n,d){return a(),r("div",{class:l(t.Class.getClass("ptj-list")+" "+t.store.classes)},[(a(!0),r(v,null,w(t.getIndexCombinations,((e,s)=>(a(),r("div",{key:s},[o("h3",null,[(a(!0),r(v,null,w(e.tags,((t,e)=>(a(),r("span",{key:e},p(t)+" ",1)))),128))]),o("ul",null,[(a(!0),r(v,null,w(e.data,(e=>(a(),r("li",{key:e},[o("a",{onClick:s=>t.next(t.store.data[e].primary.toVal())},p(t.store.data[e].getSummary()),9,ze)])))),128))])])))),128))],2)},Ie.__file="presstojam/src/components/ptj-list.vue";var He=s({name:"ptj-repo",setup:()=>({store:_t.getStore(),Class:ft}),components:{"ptj-repo-header":we,"ptj-tree":Ae,"ptj-table":Pe,"ptj-list":Ie}});jt("\n.table[data-v-1c7fb47e], .thead[data-v-1c7fb47e], .tbody[data-v-1c7fb47e], .tr[data-v-1c7fb47e] {\r\n    width : 100%;\n}\n.ptj-data-row[data-v-1c7fb47e]:nth-child(odd) {background : #CCC}\r\n\r\n"),He.render=function(t,e,s,i,o,n){const p=d("ptj-repo-header");return a(),r("div",{class:l(t.Class.getClass("ptj-repo")+" "+t.store.classes)},[m(p),(a(),k(E(t.store.rawcomponent),{key:t.store.key}))],2)},He.__scopeId="data-v-1c7fb47e",He.__file="presstojam/src/components/ptj-repo.vue";var Je=s({name:"ptj-single-item",props:{active:{type:Boolean,default:!1}},setup:()=>({store:_t.getStore(),Class:ft}),computed:{editnav(){return this.store.actions.put},delnav(){return this.store.actions.delete},title(){return this.store.title+" "+this.store.summary()}},methods:{runDel(){this.store.runDelete()}},components:{"ptj-nav":he,"ptj-widget":me,"ptj-string":le,"ptj-time":It,"ptj-asset":oe,"ptj-id":At,"ptj-form-row":yt,"ptj-flag":Rt,"ptj-number":vt}});Je.render=function(t,e,s,i,n,h){const c=d("ptj-nav"),_=d("ptj-asset"),u=d("ptj-number"),g=d("ptj-flag"),j=d("ptj-id"),b=d("ptj-time"),y=d("ptj-string"),C=d("ptj-form-row");return a(),r(v,null,[o("div",{class:l(t.Class.getClass("ptj-single-item")+" "+t.store.classes)},[o("h1",null,p(t.store.title),1),m(c,{actions:t.store.actions,class:l(t.Class.getClass("ptj-single-item-actions"))},null,8,["actions","class"]),(a(!0),r(v,null,w(t.store.data.cells,((e,s)=>(a(),k(C,{key:s,field:e,class:l(t.Class.getClass("ptj-single-item-row")+" "+e.name)},{default:S((()=>["asset"==e.meta.type?(a(),k(_,{key:0,field:e},null,8,["field"])):"number"==e.meta.type?(a(),k(u,{key:1,field:e},null,8,["field"])):"flag"==e.meta.type?(a(),k(g,{key:2,field:e},null,8,["field"])):"id"==e.meta.type?(a(),k(j,{key:3,field:e},null,8,["field"])):"time"==e.meta.type?(a(),k(b,{key:4,field:e},null,8,["field"])):"string"==e.meta.type?(a(),k(y,{key:5,field:e},null,8,["field"])):f("v-if",!0)])),_:2},1032,["field","class"])))),128))],2),m(c,{actions:t.store.children,class:l(t.Class.getClass("ptj-single-item-children"))},null,8,["actions","class"])],64)},Je.__file="presstojam/src/components/ptj-single-item.vue";var Xe=s({name:"ptj-login",setup(){let t=_t.getStore();return t.next=()=>{_t.reloadFromBase()},{store:t,Class:ft}},components:{"ptj-form":de,"ptj-nav":he}});Xe.render=function(t,e,s,i,n,h){const c=d("ptj-form"),_=d("ptj-nav");return a(),r("div",{class:l(t.Class.getClass("ptj-accounthandler"))},[o("h1",null,p(t.store.title),1),m(c),m(_,{action:t.store.actions},null,8,["action"])],2)},Xe.__file="presstojam/src/components/ptj-accounthandler.vue";var qe=s({name:"ptj-card",props:{store:Object,active:{type:Boolean,default:!1}},methods:{next(){this.store.next(),_t.buildLink()}},computed:{title(){return this.store.title},classes(){return ft.getClass("ptj-card")+" "+this.store.classes},rowclass:()=>ft.getClass("ptj-card-row"),labelclass:()=>ft.getClass("ptj-card-label"),valueclass:()=>ft.getClass("ptj-card-value")},components:{"ptj-widget":me}});const We=[o("span",{class:"material-icons"},"view_carousel",-1)],$e=g(" ");qe.render=function(t,e,s,i,n,h){const c=d("ptj-widget");return a(),k(c,{title:t.title,active:t.active},{default:S((()=>[o("div",{class:l(t.classes)},[o("a",{onClick:e[0]||(e[0]=(...e)=>t.next&&t.next(...e))},We),(a(!0),r(v,null,w(t.store.fields,((e,s)=>(a(),r("div",{key:s,class:l(t.rowclass+" "+e.name)},[o("span",{class:l(t.labelclass)},p(e.label),3),$e,o("span",{class:l(t.rowclass)},p(e.val),3)],2)))),128))],2)])),_:1},8,["title","active"])},qe.__file="presstojam/src/components/ptj-card.vue";var Ke=s({props:{index:{type:Boolean}},setup:t=>(t.index&&_t.next(),{store:_t.getStore(),Class:ft}),computed:{parents:()=>[]},components:{"ptj-form":de,"ptj-nav":he,"ptj-single-item":Je,"ptj-account-handler":Xe,"ptj-repo":He,"ptj-card":qe}});Ke.render=function(t,e,s,i,n,p){return a(),r("div",{class:l(t.Class.getClass("ptj-tabs"))},[o("div",{class:l(t.Class.getClass("ptj-tabs-tab"))},[(a(),k(E(t.store.component),{key:t.store.index}))],2)],2)},Ke.__file="presstojam/src/components/ptj-tabs.vue";var Ye=s({setup:()=>({Class:ft}),methods:{logout(){F.post("/core-logout").then((()=>{_t.reloadFromBase()}))}}});Ye.render=function(t,e,s,r,i,n){return a(),k(O,{to:"#ptj-accountdetails"},[o("a",{class:l(t.Class.getClass("ptj-account-details-logout")),onClick:e[0]||(e[0]=(...e)=>t.logout&&t.logout(...e))},"Logout",2)])},Ye.__file="presstojam/src/components/ptj-account-details.vue";var Ze=s({name:"ptj-root",setup:()=>({Class:ft}),computed:{groups:()=>_t.store.models,isaccount:()=>"public"!=_t.store.profile},components:{"ptj-tabs":Ke,"ptj-account-details":Ye}});Ze.render=function(t,e,s,i,o,n){const p=d("ptj-account-details"),h=d("ptj-tabs");return a(),r(v,null,[t.isaccount?(a(),k(p,{key:0})):f("v-if",!0),(a(!0),r(v,null,w(t.groups,(e=>(a(),r("div",{class:l(t.Class.getClass("ptj-root")),key:e.index},[m(h,{index:!0})],2)))),128))],64)},Ze.__file="presstojam/src/components/ptj-root.vue";var Ge={Ctrl:_t,runApp:function(t){const e=A(Ze);return e.mount(t),e}};export{Ge as default};
//# sourceMappingURL=ptj.esm.js.map
