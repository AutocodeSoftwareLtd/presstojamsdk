{"version":3,"file":"ptj.cjs.js","sources":["../presstojam/src/js/client.js","../presstojam/src/js/validator.js","../presstojam/src/js/error.js","../presstojam/src/js/field.js","../presstojam/src/js/asset.js","../presstojam/src/js/model.js","../presstojam/src/js/params.js","../presstojam/src/js/ctrlmap.js","../presstojam/src/js/router.js","../presstojam/src/js/controller.js","../presstojam/src/js/classinjection.js","../presstojam/src/components/ptj-error.vue","../node_modules/style-inject/dist/style-inject.es.js","../presstojam/src/components/ptj-error.vue?vue&type=template&id=c05300a8&lang.js","../presstojam/src/components/ptj-form-input.vue","../presstojam/src/components/ptj-form-input.vue?vue&type=template&id=64b3afe6&lang.js","../presstojam/src/components/ptj-form-confirm.vue","../presstojam/src/components/ptj-form-confirm.vue?vue&type=template&id=62754d43&lang.js","../presstojam/src/components/ptj-form-select.vue","../presstojam/src/components/ptj-form-select.vue?vue&type=template&id=34644c49&lang.js","../presstojam/src/components/ptj-form-radio.vue","../presstojam/src/components/ptj-form-radio.vue?vue&type=template&id=2e1363be&lang.js","../presstojam/src/components/ptj-form-checkbox.vue","../presstojam/src/components/ptj-form-checkbox.vue?vue&type=template&id=0f4b9e50&lang.js","../presstojam/src/components/ptj-form-textarea.vue","../presstojam/src/components/ptj-form-textarea.vue?vue&type=template&id=0aa8b372&lang.js","../presstojam/src/components/ptj-form-asset.vue","../presstojam/src/components/ptj-form-asset.vue?vue&type=template&id=93648f9a&lang.js","../presstojam/src/components/ptj-progress-bar.vue","../presstojam/src/components/ptj-progress-bar.vue?vue&type=template&id=460b10ff&lang.js","../presstojam/src/components/ptj-form.vue","../presstojam/src/components/ptj-form.vue?vue&type=template&id=523d6cd0&lang.js","../presstojam/src/components/ptj-nav.vue","../presstojam/src/components/ptj-nav.vue?vue&type=template&id=262eb772&lang.js","../presstojam/src/components/ptj-filter-form-time.vue","../presstojam/src/components/ptj-filter-form-time.vue?vue&type=template&id=697f55ad&lang.js","../presstojam/src/components/ptj-filter-form-checkbox.vue","../presstojam/src/components/ptj-filter-form-checkbox.vue?vue&type=template&id=0743e0ba&lang.js","../presstojam/src/components/ptj-widget-window.vue","../presstojam/src/components/ptj-widget-window.vue?vue&type=template&id=da476e86&lang.js","../presstojam/src/components/ptj-filter-form.vue","../presstojam/src/components/ptj-filter-form.vue?vue&type=template&id=71ada21d&lang.js","../presstojam/src/components/ptj-pagination.vue","../presstojam/src/components/ptj-pagination.vue?vue&type=template&id=43dcd5a6&lang.js","../presstojam/src/components/ptj-selectfields.vue","../presstojam/src/components/ptj-selectfields.vue?vue&type=template&id=89ff5b7e&lang.js","../presstojam/src/components/ptj-repo-header.vue","../presstojam/src/components/ptj-repo-header.vue?vue&type=template&id=ba19bc28&lang.js","../presstojam/src/components/ptj-tree-node.vue","../presstojam/src/components/ptj-tree-node.vue?vue&type=template&id=1dcaa9f5&lang.js","../presstojam/src/js/dragndrop.js","../presstojam/src/components/ptj-tree.vue","../presstojam/src/components/ptj-tree.vue?vue&type=template&id=eebe52ac&lang.js","../presstojam/src/components/ptj-table.vue","../presstojam/src/components/ptj-table.vue?vue&type=template&id=15ab9672&lang.js","../presstojam/src/components/ptj-list.vue","../presstojam/src/components/ptj-list.vue?vue&type=template&id=f392d8ac&lang.js","../presstojam/src/components/ptj-repo.vue","../presstojam/src/components/ptj-repo.vue?vue&type=template&id=1c7fb47e&lang.js","../presstojam/src/components/ptj-single-item.vue","../presstojam/src/components/ptj-single-item.vue?vue&type=template&id=4f4c821c&lang.js","../presstojam/src/components/ptj-accounthandler.vue","../presstojam/src/components/ptj-accounthandler.vue?vue&type=template&id=fdfae9ee&lang.js","../presstojam/src/components/ptj-card.vue","../presstojam/src/components/ptj-card.vue?vue&type=template&id=3583d51c&lang.js","../presstojam/src/components/ptj-tabs.vue","../presstojam/src/components/ptj-tabs.vue?vue&type=template&id=00fda68a&lang.js","../presstojam/src/components/ptj-account-details.vue","../presstojam/src/components/ptj-account-details.vue?vue&type=template&id=c7cf5774&lang.js","../presstojam/src/components/ptj-root.vue","../presstojam/src/components/ptj-root.vue?vue&type=template&id=2c0fa1ee&lang.js","../import.js"],"sourcesContent":["let custom_headers  = {};\r\nlet main_url;\r\nlet status_handlers = {};\r\nlet debug = true;\r\nlet last_status;\r\nlet last_ok;\r\n\r\nexport default {\r\n\r\n    regCustomHeader(name, value) {\r\n        custom_headers[name] = value;\r\n    },\r\n\r\n    regStatusHandler(status, handler) {\r\n        status_handlers[status] = handler;\r\n    },\r\n\r\n    setURL(url) {\r\n        main_url = url;\r\n    },\r\n    regDebug(is_debug) {\r\n        debug = is_debug;\r\n    },\r\n\r\n    run(url, headers) {\r\n        \r\n        headers.mode = 'cors';\r\n        headers.cache = 'no-cache';\r\n        headers.credentials = 'include';\r\n        headers['Content-Type'] = 'application/json';\r\n        headers.headers = custom_headers;\r\n\r\n        const _self = this;\r\n\r\n        return fetch(main_url + url, headers)\r\n        .then(response => {\r\n            last_status = response.status;\r\n            last_ok = response.ok;\r\n            if (status_handlers[response.status]) {\r\n                status_handlers[response.status](response);\r\n            } else if (response.status == 401) {\r\n                return response.status;\r\n            } else {\r\n                return response.json();\r\n            }\r\n        })\r\n        .then(val => {\r\n            if (!last_ok) throw val;\r\n\r\n            if (last_status == 401) {\r\n                let omethod = headers.method;\r\n                headers.method = 'PUT';\r\n                return fetch(main_url + \"/core-switch-tokens\", headers)\r\n                .then(response => {\r\n                    if (response.ok) {\r\n                        headers.method = omethod;\r\n                        return fetch(main_url + url, headers)\r\n                        .then(response=> {\r\n                            if (response.status == 401) {\r\n                                throw new Error(\"Issue with refresh token\");\r\n                            } else if (response.ok) {\r\n                                return response.json();\r\n                            } else {\r\n                              //  profile.updateUser(\"public\", 0);\r\n                              //  throw Error(\"Logged out\");\r\n                            }\r\n                        });\r\n                    } else {\r\n                       // profile.updateUser(\"public\", 0);\r\n                       // throw Error(\"Logged out\");\r\n                    }\r\n                });\r\n            } else return val;\r\n        })\r\n        .catch(err => {\r\n            if (debug) console.log(err);\r\n            throw err;\r\n        });\r\n    }, \r\n    setDebug(data) {\r\n        if (!data) {\r\n            data = {\"__debug\" : true}\r\n        } else {\r\n            data[\"__debug\"] = true;\r\n        }\r\n        return data;\r\n    },\r\n    get(url, data) {\r\n        if (debug) data = this.setDebug(data);\r\n        if (data) {\r\n            const params = new URLSearchParams();\r\n            let graph = {};\r\n            for(let i in data) {\r\n                if (Array.isArray(data[i]) || (typeof data[i] == 'object' && data[i] !== null)) graph[i] = data[i];\r\n                else params.append(i, data[i]);\r\n            }\r\n\r\n            if (graph) {\r\n                params.append(\"graph\", JSON.stringify(graph));\r\n            }\r\n            if (url.indexOf(\"?\") == -1) url += \"?\";\r\n            else url += \"&\";\r\n            url += params.toString();\r\n        }\r\n        let headers = {};\r\n        headers.method = 'GET';\r\n        return  this.run(url, headers);\r\n    },\r\n\r\n    getprimary(url, data) {\r\n        return this.get(url, data);\r\n    },\r\n\r\n    post(url, data) {\r\n        //call our fetch response and return\r\n        if (debug) data = this.setDebug(data);\r\n        let headers = {};\r\n        headers.method = 'POST';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    put(url, data) {\r\n        if (debug) data = this.setDebug(data);\r\n        let headers = {};\r\n        headers.method = 'PUT';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    patch(url, data) {\r\n        if (debug) data = this.setDebug(data);\r\n        let headers = {};\r\n        headers.method = 'PATCH';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    },\r\n\r\n    delete(url, data) {\r\n        if (debug) data = this.setDebug(data);\r\n        let headers = {};\r\n        headers.method = 'DELETE';\r\n        headers.body = JSON.stringify(data);\r\n        return this.run(url, headers);\r\n    }\r\n}\r\n","export class Validator {\r\n\r\n    constructor() {\r\n        this._min;\r\n        this._max;\r\n        this._has = [];\r\n        this._has_not = [];\r\n        this._errors = {\r\n            'OK' : 0,\r\n            'MIN_VALUE' : 1,\r\n            'MAX_VALUE' : 2,\r\n            'HAS' : 3,\r\n            'HAS_NOT' : 4\r\n        }\r\n    }\r\n\r\n    set min(min) {\r\n        this._min = min;\r\n    }\r\n\r\n    set max(max) {\r\n        this._max = max;\r\n    }\r\n\r\n    set has(has) {\r\n        this._has.push(has);\r\n    }\r\n\r\n    set nothas(nhas) {\r\n        this._has_not.push(nhas);\r\n    }\r\n\r\n\r\n    validateSize(val) {\r\n        if (val < this._min) return this._errors.MIN_VALUE;\r\n        else if (val > this._max) return this._errors.MAX_VALUE;\r\n        else return this._errors.OK;\r\n    }\r\n\r\n\r\n    validate(val) {\r\n        let err;\r\n        if (isNaN(val)) {\r\n            const length = (val) ? val.length : 0;\r\n            err = this.validateSize(length);\r\n        } else {\r\n            err = this.validateSize(val);\r\n        }\r\n        if (err != this._errors.OK) return err;\r\n\r\n        for(let nhas of this._has_not) {\r\n            if (val.match(nhas)) return this._errors.HAS_NOT;\r\n        }\r\n\r\n        if (this._has.length == 0) return this._errors.OK;\r\n        \r\n        for(let has of this._has) {\r\n            if (val.match(this._has)) return this._errors.OK;\r\n        }\r\n        return this._errors.HAS;\r\n    }\r\n\r\n}","const error_invalid_map = {\r\n            1 : \"too small\",\r\n            2 : \"too large\",\r\n            3 : \"contains incorrect characters\",\r\n            4 : \"doesn't contain required characters\",\r\n            5 : \"not unique\"\r\n}\r\n\r\nfunction getError(code) {\r\n    return error_invalid_map[code];\r\n}\r\n\r\nexport default {\r\n    getError\r\n}","import { Validator } from \"./validator.js\"\r\nimport Errors from \"./error.js\"\r\nimport { reactive, computed, ref } from \"vue\"\r\nimport Client from \"./client.js\"\r\n\r\nexport class Field  {\r\n\r\n    constructor(name, obj = null) {\r\n        this._name = name;\r\n        this._type;\r\n        this._is_primary = false;\r\n        this._is_parent = false;\r\n        this._valid = 1;\r\n        this._atts={}\r\n        this._confirm = false;\r\n        this._readonly = false;\r\n        this._placeholder = \"\";\r\n        this._conditions;\r\n        this._link;\r\n        this._reference;\r\n        this._error = 0;\r\n        this._label = \"\";\r\n        this._on = ref(true);\r\n        this._summary = false;\r\n        this._default = null;\r\n        this._validator = new Validator();\r\n        this._value = ref(null);\r\n        this._multiple;\r\n        this._is_validate_on = false;\r\n        this._options = reactive([]);\r\n        this._asset = null;\r\n        this._display_value;\r\n\r\n        this.val = computed({ \r\n            get : () =>  {\r\n                return this._value.value;\r\n            },\r\n            set : (val) => {\r\n                this._value.value = (this._type == \"checkbox\") ? (val) ? 1 : 0 : val;\r\n                this._error = this.validate(val);\r\n            }     \r\n        });\r\n\r\n        this.on = computed({\r\n            get : () => {\r\n                return this._on.value;\r\n            },\r\n            set : (val) => {\r\n                this._on.value = val;\r\n            }\r\n        })\r\n\r\n       \r\n        if (obj) {\r\n            for (let x in obj) {\r\n                if (x == \"field\" || x == \"validator\") continue;\r\n                this[x] = obj[x];\r\n            }\r\n\r\n            if (obj.field) {\r\n                for(let x in obj.field) {\r\n                    this[x] = obj.field[x];\r\n                }\r\n            }\r\n\r\n            if (obj.validation) {\r\n                for(let x in obj.validation) {\r\n                    this._validator[x] = obj.validation[x];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    set confirm(confirm) {\r\n        this._confirm = confirm;\r\n    }\r\n\r\n    set readonly(readonly) {\r\n        this._readonly = readonly;\r\n    }\r\n\r\n    set placeholder(placeholder) {\r\n        this._placeholder = placeholder;\r\n    }\r\n\r\n    set atts(atts) {\r\n        this._atts = atts;\r\n    }\r\n\r\n    set default(def) {\r\n        this._default = def;\r\n    }\r\n\r\n    set asset(asset) {\r\n        this._asset = asset;\r\n    }\r\n\r\n\r\n    set conditions(conditions) {\r\n        this._conditions = conditions;\r\n    }\r\n\r\n    set display_value(value) {\r\n        this._display_value = value;\r\n    }\r\n\r\n    set link(link) {\r\n        this._link = link;\r\n    }\r\n\r\n    set name(name) {\r\n        this._name = name;\r\n    }\r\n\r\n    set type(type) {\r\n        this._type = type;\r\n    }\r\n\r\n    set multiple(mult) {\r\n        this._multiple = mult;\r\n    }\r\n\r\n    set is_primary(val) {\r\n        this._is_primary = val;\r\n    }\r\n\r\n    set is_parent(val) {\r\n        this._is_parent = val;\r\n    }\r\n\r\n    set reference(ref) {\r\n        this._reference = ref;\r\n    }\r\n\r\n    set error(err) {\r\n        this._error = err;\r\n    }\r\n\r\n    set label(label) {\r\n        this._label = label;\r\n    }\r\n\r\n    set summary(summary) {\r\n        this._summary = summary;\r\n    }\r\n\r\n    set validateon(on) {\r\n        this._is_validate_on = on;\r\n    }\r\n\r\n\r\n    get name() {\r\n        return this._name;\r\n    }\r\n\r\n    get type() {\r\n        return this._type;\r\n    }\r\n\r\n    get options() {\r\n        return this._options;\r\n    }\r\n\r\n    get isprimary() {\r\n        return this._is_primary;\r\n    }\r\n\r\n    get required() {\r\n        return (this._min > 0) ? true : false;\r\n    }\r\n\r\n    get summary() {\r\n        return this._summary;\r\n    }\r\n\r\n    get display_value() {\r\n        return (this._display_value) ? this._display_value : this.val;\r\n    }\r\n\r\n    get readonly() {\r\n        return this._readonly;\r\n    }\r\n\r\n    get placeholder() {\r\n        return this._placeholder;\r\n    }\r\n\r\n    get default() {\r\n        return this._default;\r\n    }\r\n\r\n    get atts() {\r\n        return this._atts;\r\n    }\r\n\r\n    get conditions() {\r\n        return this._conditions;\r\n    }\r\n\r\n    get link() {\r\n        return this._link;\r\n    }\r\n\r\n    get isparent() {\r\n        return this._is_parent\r\n    }\r\n\r\n    get multiple() {\r\n        return this._multiple;\r\n    }\r\n    \r\n    get confirm() {\r\n        return this._confirm;\r\n    }\r\n\r\n    get reference() {\r\n        return this._reference;\r\n    }\r\n\r\n    get error() {\r\n        if (!this._error) return \"\";\r\n        else if (isNaN(this._error)) return this._error;\r\n        else return Errors.getError(this._error);\r\n    }\r\n\r\n    get showError() {\r\n        return (this._is_validate_on && this._error) ? true : false;\r\n    }\r\n\r\n    get label() {\r\n        return this._label;\r\n    }\r\n\r\n\r\n    saveAsset(id) {\r\n        if (this._asset) {\r\n            let file = this.val;\r\n            if (file) return this._asset.saveFile(this.val, id);\r\n        } \r\n        return Promise.resolve();\r\n    }\r\n\r\n\r\n    setOptions(params) {\r\n        this._options.length = 0;\r\n        if (this._reference) {\r\n            Client.get(this._reference, params)\r\n                .then(response => {\r\n                    for (let i in response.__data) {\r\n                        if (i.indexOf(\"__\") === 0) continue;\r\n                        this._options.push({ key: response.__data[i].id, value: response.__data[i].value });\r\n                    }\r\n                })\r\n                .catch(e => {\r\n                    console.log(e);\r\n                });\r\n        } else {\r\n            try {\r\n                for (let opt of this._atts.options) {\r\n                    this._options.push({ key: opt, value: opt });\r\n                }\r\n            } catch (e) {\r\n                console.log(\"options not set for \", this._name);\r\n            }\r\n        }\r\n    }\r\n\r\n    clean(val) {\r\n        return (this._type == \"checkbox\") ? Boolean(val) : val;\r\n    }\r\n\r\n    validate(value) {\r\n        return this._validator.validate(value);\r\n    }\r\n\r\n    exp() {\r\n        return {\r\n            name : this._name,\r\n            type : this._type,\r\n            atts : this._atts\r\n        }\r\n    }\r\n\r\n    calcValue(value) {\r\n        if (!value) return \"\";\r\n        else return value;\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n","\r\nimport Client from \"./client.js\"\r\n\r\nexport class Asset {\r\n\r\n    constructor() {\r\n      this._size = 0;\r\n      this._blob = null;\r\n      this._uploaded = false;\r\n      this._chunk_size = 0;\r\n      this._url;\r\n      this._key = 0;\r\n      this._key_field;\r\n    }\r\n\r\n    set chunk_size(chunk) {\r\n      this._chunk_size = chunk;\r\n    }\r\n\r\n    set blob(blob) {\r\n      this._blob = blob;\r\n    }\r\n\r\n    set url(url) {\r\n        this._url = url;\r\n    }\r\n\r\n    set key(key) {\r\n        this._key = key;\r\n    }\r\n\r\n    set keyfield(field) {\r\n        this._key_field = field;\r\n    }\r\n\r\n    get blob() {\r\n      return this._blob;\r\n    }\r\n\r\n    get size() {\r\n      return this._size;\r\n    }\r\n\r\n    get uploaded() {\r\n      return this._uploaded;\r\n    }\r\n\r\n    get chunk_size() {\r\n      return this._chunk_size;\r\n    }\r\n\r\n\r\n    get url() {\r\n        return this._url;\r\n    }\r\n\r\n\r\n    getChunk(index) {\r\n      const start = (this._chunk_size == 0) ? 0 : index * this._chunk_size;\r\n      let end = (this._chunk_size == 0) ? this._size : (index + 1) * this._chunk_size;\r\n      if (end > this._size) end = this._size;\r\n      const view = new DataView(this._blob, start, end - start);\r\n      let buffer = [];\r\n      for(let i = 0, n=view.byteLength; i<n; ++i) {\r\n        buffer.push(view.getInt8(i));\r\n      }\r\n      return buffer.join('');\r\n    }\r\n\r\n\r\n    loadFile(id) {\r\n        let data = {};\r\n        data[this._key_field] = id;\r\n        return Client.get(this._url, data)\r\n        .catch(e => {\r\n            alert(e);\r\n        });\r\n    }\r\n\r\n    delFile(id) {\r\n        let data = {};\r\n        data[this._key_field] = id;\r\n        return Client.delete(this._url, data)\r\n        .catch(e => {\r\n            alert(e);\r\n        });\r\n    }\r\n\r\n    saveFile(file, id) {\r\n        //this needs to be a promise\r\n        this._size = file.size;\r\n        return new Promise(( resolve, reject) => {\r\n          const fr = new FileReader();\r\n          let _self = this;\r\n          fr.onload = function(e) {\r\n            _self.blob = e.target.result;\r\n            resolve(fr.result);\r\n          }\r\n          fr.onerror = reject;\r\n          fr.readAsArrayBuffer(file);  \r\n        })\r\n        .then(() => {\r\n          let promises = [];\r\n          //else, do we have any assets?\r\n          let chunks = (this.chunk_size == 0) ? 1 : Math.ceil(this.size / this.chunk_size);\r\n          for(let i=0; i<chunks; ++i) {\r\n              const data = {};\r\n              data.__chunk = i;\r\n              data.__blob = this.getChunk(i);\r\n              data.id = id;\r\n              promises.push(Client.put(this._url, data));\r\n          }\r\n          return Promise.all(promises);\r\n        });\r\n      }\r\n\r\n}","import client from \"./client.js\"\r\nimport { Field } from \"./field.js\"\r\nimport { reactive } from \"vue\"\r\nimport { Asset } from \"./asset.js\"\r\n\r\n\r\nexport class Model {\r\n    constructor() {\r\n        this._active_children = [];\r\n        this._active_state;\r\n        this._change_intention;\r\n        this._children = [];\r\n        this._circular;\r\n        this._default_state;\r\n        this._key_states = { parent_key : null, primary_key : null };\r\n        this._name;\r\n        this._parent_key;\r\n        this._primary_key;\r\n        this._settings = {};\r\n        this._states = {};\r\n        this._main_model;\r\n        this._to;\r\n    \r\n        this.store = reactive({\r\n            fields : {},\r\n            parent_models : [],\r\n            label : '',\r\n            title : '',\r\n            data : [],\r\n            component : '',\r\n            rawcomponent : '',\r\n            actions : [],\r\n            next : null,\r\n            index : '',\r\n            primarykeyname : '',\r\n            parentkeyname : '',\r\n            circular : '',\r\n            model :  this._name,\r\n            siblings : [],\r\n            children : [],\r\n            stage : 0,\r\n            groups : [],\r\n            classes : \"\"\r\n        });\r\n    }\r\n\r\n    get name() {\r\n        return this._name;\r\n    }\r\n\r\n    get currentstate() {\r\n        return (this._active_state) ? this._active_state : this._default_state;\r\n    }\r\n\r\n\r\n    get children() {\r\n        return this._children;\r\n    }\r\n\r\n    get siblings() {\r\n        if (this._siblings.length > 1) return this._siblings;\r\n        else return [];\r\n    }\r\n\r\n    set state(state) {\r\n        this._active_state = (state) ? state : this._default_state;\r\n        this._change_intention = null;\r\n        if (this._settings[this._active_state]) this.store.settings = this._settings[this._active_state];\r\n        this.applySettings();\r\n        this.loadState();\r\n    }\r\n\r\n    set groups(groups) {\r\n        this.store.groups = groups;\r\n    }\r\n\r\n    get main_model() {\r\n        return this._main_model;\r\n    }\r\n\r\n    set main_model(model) {\r\n        this._main_model = model;\r\n    }\r\n\r\n    get key() {\r\n        if (this._active_state == \"post\" || this._active_state == \"get\") {\r\n            return this._key_states.parent_key;\r\n        } else {\r\n            return this._key_states.primary_key;\r\n        }\r\n    }\r\n\r\n    set to(to) {\r\n        this._to = to;\r\n    }\r\n\r\n    set key(key) {\r\n        if (this._active_state == \"get\" || this._active_state == \"post\") {\r\n            this._key_states.parent_key = key;\r\n        } else {\r\n            this._key_states.primary_key = key;\r\n        }\r\n\r\n        if (this._active_state == \"post\" || this._active_state == \"put\") {\r\n            for(let name in this.store.fields) {\r\n                if (this.store.fields[name].on && this.store.fields[name].type == \"select\") {\r\n                    this.store.fields[name].setOptions(this.params);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    set stage(stage) {\r\n        this.store.stage = stage;\r\n    }\r\n\r\n    set name(name) {\r\n        this._name = name;\r\n    }\r\n\r\n    set change_intention(intention) {\r\n        this._change_intention = intention;\r\n    }\r\n\r\n    injectCustomSettings(settings) {\r\n        this._settings = settings;\r\n    }\r\n\r\n    snakeCase(name) {\r\n        return name.replace(\"-\", \"_\");\r\n    }\r\n\r\n \r\n    get loadurl() {\r\n        let url = \"/\" + this._name;\r\n        if (this._active_state == \"getprimary\" ||  this._active_state == \"put\") url += \"-primary\";\r\n        return url;\r\n    }\r\n\r\n    get saveurl() {\r\n        let url = \"/\" + this._name;\r\n        return url;\r\n    }\r\n\r\n    get params() {\r\n        let params = {};\r\n        if (this._active_state == \"get\" || this._active_state == \"post\") {\r\n            if (this._key_states.parent_key) {\r\n                params[this._parent_key] = this._key_states.parent_key;\r\n            }\r\n        } else if (this._active_state == \"put\" || this._active_state == \"getprimary\" || this._active_state == \"delete\") {\r\n            params[this._primary_key] = this._key_states.primary_key;\r\n        }\r\n        if (this.to) params.__to = this.to;\r\n        return params;\r\n    }\r\n\r\n    get classes() {\r\n        return this._name.replace(\"_\", \"-\") + \" \" + this._state;\r\n    }\r\n\r\n    get to() {\r\n        return this._to;\r\n    }\r\n\r\n    get state() {\r\n        return this._active_state;\r\n    }\r\n\r\n    get parentkey() {\r\n        return this._parent_key;\r\n    }\r\n\r\n    get primarykey() {\r\n        return this._primary_key;\r\n    }\r\n\r\n    get index() {\r\n        return this._name + \"-\" + this._active_state;\r\n    }\r\n\r\n    get stage() {\r\n        return this.store.stage;\r\n    }\r\n\r\n    get change_intention() {\r\n        return this._change_intention;\r\n    }\r\n\r\n    get map() {\r\n        return {\r\n            model : this._name,\r\n            key : this.key,\r\n            state : this._active_state,\r\n            to : this.to,\r\n            stage : this.stage\r\n        }\r\n    }\r\n\r\n    getSummary(field = null, row = null) {\r\n        if (!field) {\r\n            let sum = [];\r\n            for(let field in this.store.fields) {\r\n                if (this.store.fields[field].summary) sum.push(field.val);\r\n            }\r\n            return sum.join(\" \");\r\n        } else if (field == this.snakeCase(this._parent_key)) {\r\n            return this.store.parent_models[0].getSummary();\r\n        } else {\r\n            let sum = [];\r\n            for(let tb of row[field.reference]) {\r\n                sum.push(tb);\r\n            }\r\n            return sum.join(\" \");\r\n        }\r\n    }\r\n\r\n    applySettings() {\r\n        if (this.store.settings) {\r\n            if (this.store.settings.fields) {\r\n                for(let field of this.store.settings.fields) {\r\n                    this.store.fields[field].on = false;\r\n                }\r\n\r\n                for(let field of this.store.settings.fields) {\r\n                    this.store.fields[field].on = true;\r\n                }\r\n            }\r\n\r\n            if (this.store.settings.groups) {\r\n                this.store.groups = this.store.settings.groups;\r\n            }\r\n\r\n            if (this.store.settings.disable_filter) {\r\n                this.store.disable_filter = true;\r\n            }\r\n\r\n            if (this.store.settings.disable_selectfields) {\r\n                this.store.disable_selectfields = true;\r\n            }\r\n        }\r\n    }\r\n\r\n    buildIntention(state, key = null) {\r\n        if (!key) key = this._key;\r\n        this._change_intention = {state : state, key : key, target : 0};\r\n        if (this.store.settings && this.store.settings.change_intention) {\r\n            for(let setting in this.store.settings.change_intention) {\r\n                this._change_intention[setting] = this.store.settings.change_intention[setting];\r\n            }\r\n        }\r\n    }\r\n\r\n    mapResponse(response) {\r\n        this._name = response.model;\r\n        this.store.model = this._name;\r\n        this._primary_key = response.primarykey;\r\n        this._parent_key = response.parentkey;\r\n        this._children = response.children;\r\n        this.store.children = [];\r\n        for(let child of response.children) {\r\n            this.store.children.push({ r : () => {\r\n                this.buildIntention(\"get\", this._key_states.primary_key);\r\n                this._change_intention.model = child.name;\r\n            }, n : child.label });\r\n        }\r\n\r\n        this.store.siblings = [];\r\n        for(let sibling of response.siblings) {\r\n            this.store.siblings.push({ r : () => {\r\n                this.buildIntention(\"get\", this._key_states.parent_key);\r\n                this._change_intention.model = sibling.name;\r\n            }, n : sibling.label });\r\n        }\r\n\r\n        this._circular = response.circular;\r\n\r\n        this.store.primarykeyname = response.primarykey;\r\n        this.store.parentkeyname = response.parentkey;\r\n        this.store.circular = response.circular;\r\n\r\n        //build parent states\r\n        this.store.fields = {};\r\n        for (let i in response.fields) {\r\n            this.store.fields[i] = new Field(i, response.fields[i]);\r\n            if (this.store.fields[i].type == \"asset\") {\r\n                let asset = new Asset();\r\n                asset.url = this._name + \"-\" + i;\r\n                asset.keyfield = this.store.primarykeyname; \r\n                this.store.fields[i].asset = asset;\r\n            } \r\n        }\r\n\r\n        this._states = response.states;\r\n        this._default_state = response.default_state;\r\n\r\n        let par = response.to;\r\n        while(par) {\r\n            let pmodel = new Model({ model : par.model, key : 0 });\r\n            pmodel.mapResponse(par);\r\n            pmodel.main_model = this;\r\n            pmodel.state = \"getprimary\";\r\n            this.store.parent_models.push(pmodel);\r\n            par = par.to;\r\n        }\r\n    }\r\n\r\n\r\n    load() {\r\n        this.store.data = [];\r\n        for(let field in this.store.fields) {\r\n            this.store.fields[field].val = null;\r\n        }\r\n        if (this._active_state == \"get\") {\r\n            return client.get(this.loadurl, this.params)\r\n            .then(response => {\r\n                if (response.__status != \"SUCCESS\") throw new Error(response);\r\n                this.mapRepoData(response);\r\n            })\r\n            .then(() => {\r\n                if (this.store.parent_models.length > 0) {\r\n                    let parent = this.store.parent_models[0];\r\n                    parent.key = this.key;\r\n                    parent.to = this.to;\r\n                    return client.get(parent.loadurl, parent.params)\r\n                    .then(response => {\r\n                        if (response.__status != \"SUCCESS\") throw new Error(response);\r\n                        parent.mapData(response);\r\n                        for(let i =1, n=this.store.parent_models.length; i<n; ++i) {\r\n                            let parent = this.store.parent_models[i];\r\n                            parent.mapData(response[parent.name]);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n\r\n        } else if (this._active_state == \"getprimary\" || this._active_state == \"put\") {\r\n            return client.get(this.loadurl, this.params)\r\n            .then(response => {\r\n                if (response.__status != \"SUCCESS\") throw new Error(response);\r\n                \r\n                    this.mapData(response);\r\n\r\n                    for(let parent of this.store.parent_models) {\r\n                        if (response[parent.name]) {\r\n                                //need to set the field data for this\r\n                            parent.mapData(response[parent.name]);\r\n                        }\r\n                    }\r\n            });\r\n        } else if (this._active_state == \"post\" && this.store.parent_models.length > 0) {\r\n            let parent = this.store.parent_models[0];\r\n            parent.keymanager = this._key_states.parent_key;\r\n            parent.to = this.to;\r\n            return client.get(parent.loadurl, parent.params)\r\n            .then(response => {\r\n                if (response.__status != \"SUCCESS\") throw new Error(response);\r\n                let parent = this.store.parent_models[this.store.parent_models.length - 1];\r\n                parent.mapData(response);\r\n                for(let parent of this.store.parent_models) {\r\n                    parent.mapData(response[parent.name]);\r\n                }\r\n            })\r\n            .catch(e => {\r\n                console.log(e);\r\n            });\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n\r\n    rLoadObj(data) {\r\n        let obj={};\r\n        for(const field in this.store.fields) {\r\n            obj[field] =  data[field];\r\n        }\r\n        if (this._circular && data[this._name]) {\r\n            if (data[this._name]) {\r\n                obj[this._name] = [];\r\n                for(const i in data[this._name]) {\r\n                    obj[this._name].push(this.rLoadObj(data[this._name][i]));\r\n                }\r\n            }\r\n        }\r\n\r\n        for(const i in this._active_children) {\r\n            const name = this._active_children[i];\r\n            if (data[name]) {\r\n                obj[name] = [];\r\n                for(const x in data[name]) {\r\n                    obj[name].push(this.rLoadObj(data[name][x]));\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n\r\n    indexData(data) {\r\n        let indexes = {};\r\n        for(const key in data) {\r\n            const row = data[key];\r\n            for(let group of this.store.groups) {\r\n                group = this.snakeCase(group);\r\n                if (!indexes[group]) indexes[group] = {};\r\n                let ckey = row[group];\r\n                if (!indexes[group][ckey]) {\r\n                    indexes[group][ckey] = {\"display\": \"\", \"contains\":[]};\r\n                    indexes[group][ckey].display=this.getSummary(group, row);\r\n                }\r\n                indexes[group][ckey].contains.push(key);\r\n            }\r\n        }\r\n        return indexes;\r\n    }\r\n\r\n    mapRepoData(response) {\r\n        this.store.data = [];\r\n        for (const i in response.__data) {\r\n            const data = this.rLoadObj(response.__data[i]);\r\n            this.store.data.push(data);\r\n        }\r\n\r\n        \r\n        //now we need to group the data by\r\n        this.store.indexes = this.indexData(this.store.data);\r\n    }\r\n\r\n    mapData(data) {\r\n        for(const i in this.store.fields) {\r\n            this.store.fields[i].val = (data[i]) ? data[i] : null;\r\n        }\r\n    }\r\n\r\n    buildlink = (state) => {\r\n        return () => {\r\n            this.buildIntention(state);\r\n        }\r\n    }\r\n\r\n\r\n    loadState() {\r\n        this.store.actions = [];\r\n        this.store.component = \"\";\r\n        this.store.rawcomponent = \"\";\r\n        this.store.data = [];\r\n        this.store.title = this._states[this._active_state].title;\r\n        this.store.label = this._states[this._active_state].label;\r\n        this.store.action = this._active_state;\r\n        this.store.method = this.store.action;\r\n        this.store.submiturl = this.saveurl;\r\n        this.store.classes = this._name + \" \" + this._active_state;\r\n        if (!this.store.settings) this.store.settings = {};\r\n        this.store.primarykey = () => {\r\n            return this._key_states.primary_key;\r\n        }\r\n\r\n        this.store.addKeys = () => {};\r\n        this.store.resolveKeys = () => {};\r\n    \r\n        let states = {\r\n            'get': () => {\r\n                this.store.actions = [];\r\n                if (this._states.post) {\r\n                    this.store.actions.push({ r: this.buildlink(\"post\"), n: this._states.get.actions.post });\r\n                }\r\n\r\n                this.store.rawcomponent = (this.store.groups.length > 0) ? \"ptj-list\" : (this._circular || this._active_children.length > 0) ? \"ptj-tree\" : \"ptj-table\";\r\n                /*\r\n                if (this._states.getprimary) {\r\n                    actions.getprimary = { r : this.buildlink(\"getprimary\", params), n : this._states.getprimary.label };\r\n                } else {\r\n                    if (this._states.put) {\r\n                        actions.push({ r : this.buildlink(\"put\", params), n : this._states.put.label });\r\n                    }\r\n                    if (this._states.delete) {\r\n                        actions.push({ r : this.buildlink(\"delete\", params), n : this._states.delete.label });\r\n                    }\r\n                }\r\n                */\r\n               this.store.component = \"ptj-repo\";\r\n               this.store.index = this._name + \"-get\";\r\n               this.store.reload = () => { this.load(); };\r\n\r\n               this.store.next = (key) => {\r\n                    if (this._states.getprimary) {\r\n                        this.buildIntention(\"getprimary\", key);\r\n                    } else if (this._states.put) {\r\n                        this.buildIntention(\"put\", key);\r\n                    }\r\n                    this.store.active_repo = [];\r\n                }\r\n\r\n                this.store.addKeys = data => {\r\n\r\n                };\r\n\r\n                if (!this.store.settings.fields) {\r\n                    this.store.settings.fields = [];\r\n                    for(let i in this.store.fields) {\r\n                        if (i == this.primarykey || this.store.fields[i].summary) {\r\n                            this.store.settings.fields.push(i);\r\n                        }\r\n                    }\r\n                }\r\n\r\n\r\n                this.store.submiturl = this.loadurl;\r\n            },\r\n            'getprimary': () => {\r\n                this.store.actions = [];\r\n                this.store.index = this._name + \"-getprimary\";\r\n                if (this._states.put) {\r\n                    this.store.actions.push({ r: this.buildlink(\"put\"), n: this._states.getprimary.actions.put });\r\n                }\r\n                if (this._states.delete) {\r\n                    this.store.actions.push({ r: async () => {\r\n                        if (confirm(\"Are you sure you want to delete this record and all associated children?\")) {\r\n                            let data = {};\r\n                            data[this._primary_key] = this._key_states.primary_key;\r\n                            await client.delete(\"/\" + this._name, data);\r\n                            this.buildIntention(\"get\", this._key_states.parent_key);\r\n                        }\r\n                    }, n: this._states.getprimary.actions.delete });\r\n                }\r\n                this.store.component = \"ptj-single-item\";\r\n\r\n                if (!this.store.settings.fields) {\r\n                    this.store.settings.fields = [];\r\n                    for(let i in this.store.fields) {\r\n                        this.store.settings.fields.push(i);\r\n                    }\r\n                }\r\n\r\n                if (this._main_model) {\r\n                    this.store.next = () => {\r\n                        this._main_model.change_intention = {state : \"getprimary\", key : this.key, target : 0, model : this._name };\r\n                    }\r\n                }\r\n            },\r\n            'post': () => {\r\n                this.store.component = (this._states.login) ? \"ptj-account-handler\" : \"ptj-form\";\r\n                this.store.index = this._name + \"-post\";\r\n                this.store.actions = [];\r\n                if (this._states.login) {\r\n                    this.store.actions.push({ r: this.buildlink(\"login\"), n: this._states.post.actions.login });\r\n                }\r\n\r\n                this.store.next = () => {\r\n                    this.buildIntention(\"get\");\r\n                };\r\n\r\n                if (!this.store.settings.fields) {\r\n                    this.store.settings.fields = [];\r\n                    for(let i of this._states.post.fields) {\r\n                        this.store.settings.fields.push(i);\r\n                    }\r\n                }\r\n\r\n\r\n                this.store.addKeys = data => {\r\n                    data[this._parent_key] = this._key_states.parent_key;\r\n                };\r\n\r\n                this.store.resolveKeys = data => {\r\n                    this._key_states.primary_key = data[this._primary_key];\r\n                }\r\n            },\r\n            'put': () => {\r\n                this.store.component = \"ptj-form\";\r\n                this.store.index = this._name + \"-put\";\r\n                this.store.actions = [];\r\n                this.store.next = () => {\r\n                    if (this._states.getprimary) {\r\n                        this.buildIntention(\"getprimary\");\r\n                    } else {\r\n                        this.buildIntention(\"get\");\r\n                    }\r\n                }\r\n\r\n\r\n                if (!this.store.settings.fields) {\r\n                    this.store.settings.fields = [];\r\n                    for(let i of this._states.put.fields) {\r\n                        this.store.settings.fields.push(i);\r\n                    }\r\n                }\r\n               \r\n\r\n                this.store.addKeys = data => {\r\n                    data[this._primary_key] = this._key_states.primary_key;\r\n                };\r\n            },\r\n            'login': () => {\r\n                this.store.component = \"ptj-account-handler\";\r\n                this.store.index = this._name + \"-login\";\r\n                this.store.actions = [];\r\n                if (this._states.post) {\r\n                    this.store.actions.push({ r: this.buildlink(\"post\"), n: this._states.login.actions.post });\r\n                }\r\n\r\n                if (!this.store.settings.fields) {\r\n                    this.store.settings.fields = [];\r\n                    for(let i of this._states.login.fields) {\r\n                        this.store.settings.fields.push(i);\r\n                    }\r\n                }\r\n\r\n                this.store.method = \"post\";\r\n                this.store.submiturl += \"-login\";\r\n                this.store.next = null;\r\n            }\r\n        }\r\n\r\n        states[this._active_state]();\r\n\r\n        for(let i in this.store.fields) {\r\n            this.store.fields[i].on = false;\r\n        }\r\n\r\n        for(let field of this.store.settings.fields) {\r\n            this.store.fields[field].on = true;\r\n        }\r\n    }\r\n    \r\n}","function decodeParams() {\r\n    const params = new URLSearchParams(window.location.search);\r\n    let param_obj = {};\r\n    params.forEach(function(value, key) {\r\n        if (key == \"graph\") {\r\n            let graph_obj = JSON.parse(decodeURIComponent(value));\r\n            param_obj = { ...param_obj, ...graph_obj};\r\n        } else {\r\n            param_obj[key] = value;\r\n        }\r\n    });\r\n    return param_obj;\r\n} \r\n\r\n\r\nfunction encodeParams(params) {\r\n    let graph = {};\r\n    let cstr = [];\r\n    for(let i in params) {\r\n        if (typeof params[i] === 'object' && params[i]) {\r\n            graph[i] = params[i];\r\n        } else if (Array.isArray(params[i])) {\r\n            graph[i] = params[i];\r\n        } else {\r\n            cstr.push(i + \"=\" + encodeURIComponent(params[i]));\r\n        }\r\n    }\r\n\r\n    if (Object.keys(graph).length > 0) cstr.push( \"graph=\" + encodeURIComponent(JSON.stringify(graph)));\r\n    return cstr.join(\"&\");\r\n}\r\n\r\nfunction mapParams(url, params) {\r\n    for(let i in params) {\r\n        const key = \"${\" + i + \"}\";\r\n        const regex = new RegExp(key, \"g\");\r\n        url = url.replace(regex, params[i]);\r\n    }\r\n    return url;\r\n}\r\n\r\nexport default {\r\n    encodeParams,\r\n    decodeParams,\r\n    mapParams\r\n}","import Params from \"./params.js\"\r\n\r\n\r\nconst action_map = {\r\n    'post' : '-create',\r\n    'put' : '-update',\r\n    'delete' : '-delete',\r\n    'login' : '-login',\r\n    'logout' : '-logout',\r\n    'getprimary' : '-primary',\r\n    'get' : ''\r\n};\r\n\r\nclass CtrlGroupMap {\r\n\r\n    constructor() {\r\n        this._model;\r\n        this._state = \"\";\r\n        this._key = 0;\r\n        this._to;\r\n    }\r\n\r\n    set model(model) {\r\n        this._model = model;\r\n    }\r\n\r\n    set state(state) {\r\n        this._state = state;\r\n    }\r\n\r\n    set key(key) {\r\n        this._key = key;\r\n    }\r\n\r\n    set to(to) {\r\n        this._to = to;\r\n    }\r\n\r\n    get model() {\r\n        return this._model;\r\n    }\r\n\r\n    get state() {\r\n        return this._state;\r\n    }\r\n\r\n    get key() {\r\n        return this._key;\r\n    }\r\n\r\n    get to() {\r\n        return this._to;\r\n    }\r\n\r\n    swap(map) {\r\n        this._model = map.model;\r\n        this._state = map.state;\r\n        this._key = map.key;\r\n        this._to = map.to;\r\n    }\r\n\r\n\r\n    convertToURL() {\r\n        let model = this._model;\r\n        let state = this._state;\r\n        let key = this._key;\r\n        let to = this._to;\r\n\r\n        let url = model + action_map[state];\r\n        if (key) url += \"-\" + key;\r\n        if (to) url += \"-to-\" + to;\r\n        return url;\r\n    }\r\n\r\n    convertFromURL(url) {\r\n        if (!url) return;\r\n        let parts = url.split(\"-to-\");\r\n        if (parts.length > 1) {\r\n            this._to = parts[1];\r\n            url = parts[0];\r\n        }\r\n        parts = url.split(\"-\");\r\n        let key = parseInt(parts[parts.length - 1]);\r\n        if (isNaN(key)) this._key = 0;\r\n        else {\r\n            parts.pop();\r\n            this._key = key;\r\n        }\r\n        \r\n        if (parts.length == 0) {\r\n            throw new Error(\"Can't convert this url string: \" + url);\r\n        }\r\n        for(let i in action_map) {\r\n            if (action_map[i] == \"-\" + parts[parts.length - 1]) {\r\n                this._state = i\r\n                parts.pop();\r\n                break;\r\n            }\r\n        }\r\n        this._model = parts.join(\"-\");\r\n    }\r\n}\r\n\r\nlet maps = [];\r\nlet trigger_cb = null;\r\nlet route_base = \"\";\r\nlet params = {};\r\n\r\nfunction regParam(name, val) {\r\n    params[name] = val;\r\n}\r\n\r\nfunction removeParam(name) {\r\n    delete params[name];\r\n}\r\n\r\n\r\nfunction resetMaps() {\r\n    maps = [];\r\n}\r\n\r\nfunction trigger(trig) {\r\n    trigger_cb = trig;\r\n}\r\n\r\nfunction createMap() {\r\n    let map = new CtrlGroupMap();\r\n    maps.push(map);\r\n    return map;\r\n}\r\n\r\nfunction convertToURL() {\r\n    let str_parts = [];\r\n    for(let map of maps) {\r\n        str_parts.push(map.convertToURL());\r\n    }\r\n    let url = route_base + \"/\" + str_parts.join(\"/\");\r\n\r\n    const param_str = Params.encodeParams(params);\r\n    if (param_str) url += \"?\" + param_str;\r\n\r\n    return url;\r\n}\r\n\r\nfunction convertFromURL(url) {\r\n    url = url.replace(route_base, \"\");\r\n    url = url.replace(/^\\/+|\\/+$/g, '');\r\n    let parts = url.split(\"/\");\r\n    maps = [];\r\n    for(let i in parts) {\r\n        let map = createMap();\r\n        map.convertFromURL(parts[i]);\r\n    }\r\n    if (trigger_cb) trigger_cb();\r\n}\r\n\r\n\r\nfunction setBase(base) {\r\n    //trim any leading or trailing / so we can be sure we are dealing with the correct format\r\n    base = base.replace(/^\\/+|\\/+$/g, '');\r\n    route_base = \"/\" + base;\r\n}\r\n\r\nfunction getMaps() {\r\n    return maps;\r\n}\r\n\r\n\r\n\r\n\r\nexport default {\r\n    trigger,\r\n    resetMaps,\r\n    createMap,\r\n    convertToURL,\r\n    convertFromURL,\r\n    setBase,\r\n    getMaps\r\n}","\r\nconst history = [];\r\nlet cb;\r\n\r\n\r\n\r\nfunction setRoute(uri, title = '') {\r\n    history.push({ r : uri, label : title });\r\n    window.history.pushState({'name' : uri}, document.title, uri);\r\n    runRoute(uri);\r\n}\r\n\r\n\r\nfunction hardSetRoute(route) {\r\n    window.location = route;\r\n}\r\n\r\n\r\nwindow.onpopstate = function() {\r\n    runRoute(document.location.pathname);\r\n}\r\n\r\n\r\nfunction runRoute(uri) {\r\n    if (!uri) uri = window.location.pathname;\r\n    if (cb) cb(uri);\r\n}\r\n\r\nfunction regCallback(callback) {\r\n    cb = callback;\r\n}\r\n\r\n\r\n\r\n\r\nexport default {\r\n    setRoute,\r\n    hardSetRoute,\r\n    runRoute,\r\n    regCallback\r\n}","import { reactive } from \"vue\"\r\nimport { Model } from \"./model.js\"\r\nimport Map from \"./ctrlmap.js\"\r\nimport Client from \"./client.js\"\r\nimport Router from \"./router.js\"\r\n\r\nlet _store = reactive({ 'models' : [], profile : null });\r\nlet _settings = {};\r\nlet _models = [];\r\nlet _seeker = -1;\r\n\r\n\r\nfunction setSettings(settings) {\r\n    if (settings.client) {\r\n        Client.setURL(settings.client.url);\r\n        if (settings.client.custom_headers) {\r\n            for(let i in settings.client.custom_headers) {\r\n                Client.regCustomHeader(i, settings.client.custom_headers[i]);\r\n            }\r\n        }\r\n    \r\n        if (settings.client.debug) {\r\n            Client.regDebug(true);\r\n        }\r\n    \r\n        Client.regStatusHandler(403, function() {\r\n            alert(\"Page not found\");\r\n        });\r\n    }\r\n    \r\n    if (settings.mapper) {\r\n        if (settings.mapper.base) Map.setBase(settings.mapper.base);\r\n    }\r\n\r\n    if (settings.models) _settings = settings.models;\r\n}\r\n\r\n\r\nfunction initProfile() {\r\n    return Client.get(\"/core-check-user\")\r\n    .then(response => {\r\n        _store.profile = response.__profile;\r\n        return _store.profile;\r\n    });\r\n}\r\n\r\nfunction assumeRole(role) {\r\n    return Client.post('/core-assume-role', { 'role' : role })\r\n    .then(request => {\r\n        _store.profile = request.__profile;\r\n        return _store.profile;\r\n    });\r\n}\r\n\r\nfunction removeRole() {\r\n    return Client.post('/core-remove-role')\r\n    .then(request => {\r\n        _store.profile = request.__profile;\r\n        return _store.profile;\r\n    });\r\n}\r\n\r\nfunction buildModel(map, stage) {\r\n    let url = (!map.model) ? \"/route-core-default\" : \"/route-\" + map.model;\r\n    let data = {};\r\n    if (map.to) data.__to = map.to;\r\n    return Client.get(url, data)\r\n    .then(response => {\r\n        if (response.__status != \"SUCCESS\") {\r\n            throw new Error(response);\r\n        }\r\n        let model_name = response.model;\r\n        let model = new Model();\r\n        model.to = map.to;\r\n        if (_settings[model_name]) model.injectCustomSettings(_settings[model_name]);\r\n        model.mapResponse(response);\r\n        model.state = map.state;\r\n        model.key = map.key;\r\n        \r\n        model.stage = stage;\r\n        _models[stage] = model;\r\n        return model;\r\n    })\r\n    .then(model=> {\r\n        return model.load();\r\n    });\r\n    \r\n}\r\n\r\nfunction run() {\r\n    _seeker = -1;\r\n    let maps = Map.getMaps();\r\n    if (maps.length == 0) {\r\n        throw new Error(\"Error with controller run, no maps created\");\r\n    }\r\n    _store.models = [];\r\n    let promises = [];\r\n\r\n    if (_models.length > maps.length) _models.splice(maps.length, _models.length - maps.length);\r\n    for (let i in maps) {\r\n        const map = maps[i];\r\n        let model, promise;\r\n        if (i >= _models.length || _models[i].name != map.model) {\r\n            promise = buildModel(map, i);\r\n        } else {\r\n            model = _models[i];\r\n            if (model.state != map.state || model.key != map.key) {\r\n                model.state = map.state;\r\n                model.key = map.key;\r\n            }\r\n            promise = _models[i].load()\r\n            .catch(e => console.log(e));\r\n        }\r\n        promises.push(promise);\r\n    }\r\n\r\n    //check the last map to see if it needs a child group\r\n    //omap will be one before last\r\n    Promise.all(promises)\r\n    .then(() => {\r\n        for(let model of _models) {\r\n            _store.models.push(model);\r\n        }\r\n    })\r\n    .catch(e => {\r\n        console.log(e);\r\n    })    \r\n}\r\n\r\nfunction buildLink() {\r\n    Map.resetMaps();\r\n    let omaps = [];\r\n    let changes = [];\r\n    for(let i in _models) {\r\n        let model = _models[i];\r\n        omaps.push(model.map);\r\n        changes.push(model.change_intention);\r\n    }\r\n\r\n    for (let i =0,n=changes.length; i<n; ++i) {\r\n        let change = changes[i];\r\n        if (!change) continue;\r\n        let ni = i + change.target;\r\n        if (ni < 0) omaps.unshift({ ...omaps[i] });\r\n        else if (ni >= omaps.length) omaps.push({ ... omaps[omaps.length - 1]});\r\n        if (change.model) omaps[ni].model = change.model;\r\n        if (change.state) omaps[ni].state = change.state;\r\n        if (change.to) omaps[ni].to = change.to;\r\n        if (change.key) omaps[ni].key = change.key;\r\n        if (change.end) {\r\n            omaps.splice(ni + 1, omaps.length);\r\n            break;\r\n        }\r\n    }\r\n\r\n    for(const omap of omaps) {\r\n        let cmap = Map.createMap();\r\n        for(let i in omap) {\r\n            cmap[i] = omap[i];\r\n        }\r\n    }\r\n    let url = Map.convertToURL();\r\n    Router.setRoute(url);\r\n}\r\n\r\nfunction runLink() {\r\n    Map.runRoute();\r\n}\r\n\r\n\r\nfunction runData(uri = null) {\r\n    if (!uri) uri = window.location.pathname;\r\n    Map.convertFromURL(uri);\r\n}\r\n\r\n\r\n\r\nfunction reloadFromBase() {\r\n    Map.resetMaps();\r\n    let url = Map.convertToURL();\r\n    Router.setRoute(url);\r\n}\r\n\r\n\r\nfunction getStore() {\r\n    return _store.models[_seeker].store;\r\n}\r\n\r\n\r\nfunction next() {\r\n    ++_seeker;\r\n}\r\n\r\nMap.trigger(() => {\r\n    run();\r\n});\r\n\r\nRouter.regCallback(Map.convertFromURL)\r\n\r\nexport default {\r\n    store : _store,\r\n    models : _models,\r\n    setSettings,\r\n    initProfile,\r\n    assumeRole,\r\n    removeRole,\r\n    run,\r\n    buildModel,\r\n    buildLink,\r\n    runLink,\r\n    runData,\r\n    reloadFromBase,\r\n    getStore,\r\n    next\r\n}\r\n","let classes_dict = {\r\n    'ptj-account-details-logout' : \"ptj-account-details-logout\",\r\n    'ptj-account-handler' : 'ptj-account-handler',\r\n    'ptj-breadcrumbs' : 'ptj-breadcrumbs',\r\n    'ptj-card' : 'ptj-card',\r\n    'ptj-card-row' : 'ptj-card-row',\r\n    'ptj-card-label' : 'ptj-card-label',\r\n    'ptj-card-value' : 'ptj-card-value',\r\n    'ptj-form' : 'ptj-form',\r\n    'ptj-form-title' : 'ptj-form-title',\r\n    'ptj-form-error' : 'ptj-form-error',\r\n    'ptj-form-group' : 'ptj-form-group',\r\n    'ptj-form-submit' : 'ptj-form-submit',\r\n    'ptj-root' : 'ptj-root',\r\n    'ptj-tabs' : 'ptj-tabs',\r\n    'ptj-tabs-card' : 'ptj-tabs-card',\r\n    'ptj-tabs-tab' : 'ptj-tabs-tab',\r\n    'ptj-repo' : 'ptj-repo',\r\n    'ptj-nav' : 'ptj-nav',\r\n    'ptj-nav-link' : 'ptj-nav-link',\r\n    'ptj-single-item' : 'ptj-single-item',\r\n    'ptj-single-item-row' : 'ptj-single-item-row',\r\n    'ptj-single-item-label' : 'ptj-single-item-label',\r\n    'ptj-single-item-value' : 'ptj-single-item-value',\r\n    'ptj-single-item-actions' : 'ptj-single-item-actions',\r\n    'ptj-single-item-children' : 'ptj-single-item-children',\r\n    'ptj-widget-window' : 'ptj-widget-window',\r\n    'ptj-widget-window-header' : 'ptj-widget-window-header',\r\n    'ptj-widget-window-title' : 'ptj-widget-window-title',\r\n    'ptj-widget-window-toggle' : 'ptj-widget-window-toggle',\r\n    'ptj-widget-window-body' : 'ptj-widget-window-body',\r\n    'ptj-repo-header-title' : 'ptj-repo-header-title',\r\n    'ptj-repo-header-actions' : 'ptj-repo-header-actions',\r\n    'ptj-tree' : 'ptj-tree',\r\n    'ptj-form-row' : 'ptj-form-row',\r\n    'ptj-form-input-row' : 'ptj-form-input-row',\r\n    'ptj-form-input-label' : 'ptj-form-input-label',\r\n    'ptj-form-input' : 'ptj-form-input',\r\n    'ptj-table' : 'ptj-table',\r\n    'ptj-table-header' : 'ptj-table-header',\r\n    'ptj-table-header-cell' : 'ptj-table-header-cell',\r\n    'ptj-table-row' : 'ptj-table-row',\r\n    'ptj-table-cell' : 'ptj-table-cell',\r\n    'ptj-table-cell-sortable' : 'ptj-table-cell-sortable',\r\n    'ptj-form-confirm-row' : 'ptj-form-confirm-row',\r\n    'ptj-form-confirm-label' : 'ptj-form-confirm-label',\r\n    'ptj-form-confirm' : 'ptj-form-confirm',\r\n    'ptj-pagination' : 'ptj-pagination',\r\n    'ptj-filter-form' : 'ptj-filter-form',\r\n    'ptj-filter-form-group' : 'ptj-filter-form-group',\r\n    'ptj-filter-form-submit' : 'ptj-filter-form-submit',\r\n    'ptj-form-select-row' : 'ptj-form-select-row',\r\n    'ptj-form-select-label' : 'ptj-form-select-label',\r\n    'ptj-form-select' : 'ptj-form-select',\r\n    'ptj-tree-node' : 'ptj-tree-node',\r\n    'ptj-tree-node-row' : 'ptj-tree-node-row',\r\n    'ptj-selectfields' : 'ptj-selectfields',\r\n    'ptj-selectfields-checkbox' : 'ptj-selectfields-checkbox',\r\n    'ptj-selectfields-label' : 'ptj-selectfields-label',\r\n    'ptj-form-radio-row' : 'ptj-form-radio-row',\r\n    'ptj-form-radio-label' : 'ptj-form-radio-label',\r\n    'ptj-form-radio-option-label' : 'ptj-form-radio-option-label',\r\n    'ptj-checkbox-row' : 'ptj-checkbox-row',\r\n    'ptj-checkbox-label' : 'ptj-checkbox-label',\r\n    'ptj-checkbox' : 'ptj-checkbox',\r\n    'ptj-form-textarea-row' : 'ptj-form-textarea-row',\r\n    'ptj-form-textarea-label' : 'ptj-form-textarea-label',\r\n    'ptj-form-textarea' : 'ptj-form-textarea',\r\n    'ptj-form-asset-row' : 'ptj-form-asset-row',\r\n    'ptj-form-asset-label' : 'ptj-form-asset-label',\r\n    'ptj-form-asset' : 'ptj-form-asset',\r\n    'ptj-progress-bar-wrapper' : 'ptj-progress-bar-wrapper',\r\n    'ptj-progress-bar-holder' : 'ptj-progress-bar-holder',\r\n    'ptj-progress-bar' : 'ptj-progress-bar',\r\n    'ptj-error' : 'ptj-error',\r\n    'ptj-filter-form-time-row' : 'ptj-filter-form-time-row',\r\n    'ptj-filter-form-time-label' : 'ptj-filter-form-time-label',\r\n    'ptj-filter-form-time-1' : 'ptj-filter-form-time-1',\r\n    'ptj-filter-form-time-2' : 'ptj-filter-form-time-2',\r\n    'ptj-filter-form-checkbox-row' : 'ptj-filter-form-checkbox-row',\r\n    'ptj-filter-form-checkbox-label' : 'ptj-filter-form-checkbox-label',\r\n    'ptj-filter-form-checkbox' : 'ptj-filter-form-checkbox',\r\n    'ptj-account-details-logout' : 'ptj-account-details-logout',\r\n    'ptj-accounthandler' : 'ptj-accounthandler',\r\n    'ptj-list' : 'ptj-list'\r\n};\r\n\r\nfunction regClass(name, value) {\r\n    classes_dict[name] = value;\r\n}\r\n\r\nfunction getClass(name) {\r\n    return classes_dict[name];\r\n} \r\n\r\nexport default {\r\n    regClass,\r\n    getClass\r\n}","<template>\r\n    <p :class=\"Class.getClass('ptj-error')\">{{ error }}</p>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    name : 'ptj-error',\r\n    props : {\r\n        'error' : String\r\n    },\r\n    setup() { \r\n        return { Class }\r\n    }\r\n});\r\n\r\n</script>\r\n\r\n<style>\r\n.error {\r\n  color : red;\r\n}\r\n</style>","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","<template>\r\n    <p :class=\"Class.getClass('ptj-error')\">{{ error }}</p>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    name : 'ptj-error',\r\n    props : {\r\n        'error' : String\r\n    },\r\n    setup() { \r\n        return { Class }\r\n    }\r\n});\r\n\r\n</script>\r\n\r\n<style>\r\n.error {\r\n  color : red;\r\n}\r\n</style>","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-input-row') + ' ' + field.name\">\r\n    <label v-if=\"field.atts.type != 'hidden'\" :class=\"Class.getClass('ptj-form-input-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-form-input')\" :name=\"field.name\" :type=\"field.atts.type\" v-model=\"field.val\" @blur=\"field.validateon = true\" :readonly=\"field.readonly\">\r\n    <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-input',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-input-row') + ' ' + field.name\">\r\n    <label v-if=\"field.atts.type != 'hidden'\" :class=\"Class.getClass('ptj-form-input-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-form-input')\" :name=\"field.name\" :type=\"field.atts.type\" v-model=\"field.val\" @blur=\"field.validateon = true\" :readonly=\"field.readonly\">\r\n    <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-input',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-confirm-row')\">\r\n    <label :class=\"Class.getClass('ptj-form-confirm-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-form-confirm')\" :name=\"name\" :type=\"field.atts.type\" v-model=\"cval\" @blur=\"field.setValidateOn()\">\r\n    <ptj-error v-show=\"error\" :error=\"error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-confirm',\r\n  props : {\r\n    field : Object\r\n  },\r\n  data() {\r\n      return {\r\n          cval : \"\"\r\n      }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  computed : {\r\n    name() {\r\n        return this.field.name + \"_confirm\";\r\n    },\r\n    error() {\r\n        if (this.isvalidateon) {\r\n            if (this.field.val == this.cval) return \"\";\r\n            else return \"Doesn't match \" + this.field.name; \r\n        }      \r\n    }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-confirm-row')\">\r\n    <label :class=\"Class.getClass('ptj-form-confirm-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-form-confirm')\" :name=\"name\" :type=\"field.atts.type\" v-model=\"cval\" @blur=\"field.setValidateOn()\">\r\n    <ptj-error v-show=\"error\" :error=\"error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-confirm',\r\n  props : {\r\n    field : Object\r\n  },\r\n  data() {\r\n      return {\r\n          cval : \"\"\r\n      }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  computed : {\r\n    name() {\r\n        return this.field.name + \"_confirm\";\r\n    },\r\n    error() {\r\n        if (this.isvalidateon) {\r\n            if (this.field.val == this.cval) return \"\";\r\n            else return \"Doesn't match \" + this.field.name; \r\n        }      \r\n    }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-select-row')\">\r\n  <label :class=\"Class.getClass('ptj-form-select-label')\">{{ field.label }}</label>\r\n  <select :class=\"Class.getClass('ptj-form-select')\" v-model=\"field.val\" :readonly=\"field.readonly\" :name=\"field.name\" :multiple=\"field.multiple\">\r\n    <option value=\"0\">Select Option</option>\r\n    <option v-for=\"option in field.options\" :key=\"option.key\" :value=\"option.key\">{{ option.value }}</option>\r\n  </select>\r\n  <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup(props) {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-select-row')\">\r\n  <label :class=\"Class.getClass('ptj-form-select-label')\">{{ field.label }}</label>\r\n  <select :class=\"Class.getClass('ptj-form-select')\" v-model=\"field.val\" :readonly=\"field.readonly\" :name=\"field.name\" :multiple=\"field.multiple\">\r\n    <option value=\"0\">Select Option</option>\r\n    <option v-for=\"option in field.options\" :key=\"option.key\" :value=\"option.key\">{{ option.value }}</option>\r\n  </select>\r\n  <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, ref } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup(props) {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n    <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-radio-row')\">\r\n      <label :class=\"Class.getClass('ptj-form-radio-label')\">{{ field.label }}</label>\r\n        <div v-for=\"option in field.options\" :key=\"option\">\r\n            <label :class=\"Class.getClass('ptj-form-radio-option-label')\">{{ option.option }}</label>\r\n            <input :name=\"cfield.name\" type=\"radio\" :value=\"option.value\" v-model=\"field.val\">\r\n        </div>\r\n        <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-radio',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  data() {\r\n      return {\r\n          isvalidateon : false\r\n      }\r\n  },\r\n  methods : {\r\n      setValidateOn() {\r\n          this.isvalidateon = true;\r\n      }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n    <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-radio-row')\">\r\n      <label :class=\"Class.getClass('ptj-form-radio-label')\">{{ field.label }}</label>\r\n        <div v-for=\"option in field.options\" :key=\"option\">\r\n            <label :class=\"Class.getClass('ptj-form-radio-option-label')\">{{ option.option }}</label>\r\n            <input :name=\"cfield.name\" type=\"radio\" :value=\"option.value\" v-model=\"field.val\">\r\n        </div>\r\n        <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-radio',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  data() {\r\n      return {\r\n          isvalidateon : false\r\n      }\r\n  },\r\n  methods : {\r\n      setValidateOn() {\r\n          this.isvalidateon = true;\r\n      }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-checkbox-row')\">\r\n    <label :class=\"Class.getClass('ptj-checkbox-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-checkbox')\" type=\"checkbox\" :true-value=\"1\" :false-value=\"0\" :name=\"field.name\" v-model=\"field.val\">\r\n    <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-checkbox',\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-checkbox-row')\">\r\n    <label :class=\"Class.getClass('ptj-checkbox-label')\">{{ field.label }}</label>\r\n    <input :class=\"Class.getClass('ptj-checkbox')\" type=\"checkbox\" :true-value=\"1\" :false-value=\"0\" :name=\"field.name\" v-model=\"field.val\">\r\n    <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-checkbox',\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n    <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-textarea-row') + ' ' + field.name.replace('_', '-')\">\r\n       <label :class=\"Class.getClass('ptj-form-textarea-label')\">{{ field.label }}</label>\r\n       <textarea :class=\"Class.getClass('ptj-form-textarea')\" :name=\"field.name\" v-model=\"field.val\" :readonly=\"field.readonly\" :data-html=\"field.atts.html\"></textarea>        \r\n       <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-textarea',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n    <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-textarea-row') + ' ' + field.name.replace('_', '-')\">\r\n       <label :class=\"Class.getClass('ptj-form-textarea-label')\">{{ field.label }}</label>\r\n       <textarea :class=\"Class.getClass('ptj-form-textarea')\" :name=\"field.name\" v-model=\"field.val\" :readonly=\"field.readonly\" :data-html=\"field.atts.html\"></textarea>        \r\n       <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-textarea',\r\n  props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-asset-row')\">\r\n  <label :class=\"Class.getClass('ptj-form-asset-label')\">{{ field.label }}</label>\r\n  <input :class=\"Class.getClass('ptj-form-asset')\" ref=\"input\" @change=\"setFile\" :name=\"field.name\" type=\"file\" >\r\n  <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-asset-field',\r\n  props : {\r\n    field : {\r\n        type : Object,\r\n        required : true\r\n    }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  methods : {\r\n      setFile(e) {\r\n          if (e.target.files.length > 0) {\r\n            this.field.val = e.target.files[0];\r\n          } else {\r\n            this.field.val = null;\r\n          }\r\n          this.field.validateon = true;\r\n      }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-form-asset-row')\">\r\n  <label :class=\"Class.getClass('ptj-form-asset-label')\">{{ field.label }}</label>\r\n  <input :class=\"Class.getClass('ptj-form-asset')\" ref=\"input\" @change=\"setFile\" :name=\"field.name\" type=\"file\" >\r\n  <ptj-error v-show=\"field.showError\" :error=\"field.error\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCError from \"./ptj-error.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-asset-field',\r\n  props : {\r\n    field : {\r\n        type : Object,\r\n        required : true\r\n    }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  methods : {\r\n      setFile(e) {\r\n          if (e.target.files.length > 0) {\r\n            this.field.val = e.target.files[0];\r\n          } else {\r\n            this.field.val = null;\r\n          }\r\n          this.field.validateon = true;\r\n      }\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>","<template>\r\n    <div :class=\"Class.getClass('ptj-progress-bar-wrapper')\">\r\n        <div :class=\"Class.getClass('ptj-progress-bar-holder') + ' ptj-progress-holder'\">\r\n            <div :class=\"Class.getClass('ptj-progress-bar') + ' ptj-bar'\" :style=\"style\">&nbsp;</div> \r\n        </div>   \r\n        <span>{{ num }}%</span>\r\n    </div> \r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent} from \"vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-progress-bar',\r\n  props : {\r\n      total : Number,\r\n      progress : Number\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  computed : {\r\n      num() {\r\n          let num = Math.floor((this.progress / this.total) * 100);\r\n          return (isNaN(num)) ? 0 : num;\r\n      },\r\n      style() {\r\n          return \"width:\" +  this.num + \"%;\";\r\n      }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n .ptj-progress-holder {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\r\n }\r\n\r\n .ptj-bar {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\r\n }\r\n\r\n\r\n</style>\r\n","<template>\r\n    <div :class=\"Class.getClass('ptj-progress-bar-wrapper')\">\r\n        <div :class=\"Class.getClass('ptj-progress-bar-holder') + ' ptj-progress-holder'\">\r\n            <div :class=\"Class.getClass('ptj-progress-bar') + ' ptj-bar'\" :style=\"style\">&nbsp;</div> \r\n        </div>   \r\n        <span>{{ num }}%</span>\r\n    </div> \r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent} from \"vue\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-progress-bar',\r\n  props : {\r\n      total : Number,\r\n      progress : Number\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  computed : {\r\n      num() {\r\n          let num = Math.floor((this.progress / this.total) * 100);\r\n          return (isNaN(num)) ? 0 : num;\r\n      },\r\n      style() {\r\n          return \"width:\" +  this.num + \"%;\";\r\n      }\r\n  }\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n .ptj-progress-holder {\r\n     width : 100%;\r\n     min-height : 10px;\r\n     position : relative;\r\n     display : flex;\r\n     align-items: stretch;\r\n     padding : 2px;\r\n }\r\n\r\n .ptj-bar {\r\n     width : 0;\r\n     height : 100%;\r\n     position : relative;\r\n     line-height : 100%;\r\n }\r\n\r\n\r\n</style>\r\n","<template>\r\n <form @submit.prevent=\"submit\" v-show=\"fstate==0\" :class=\"Class.getClass('ptj-form') + ' ' + store.classes\">\r\n    <div :class=\"Class.getClass('ptj-form-error')\" v-show=\"globalerror\">{{ globalerror }}</div>\r\n    <div v-for=\"field in store.fields\" v-show=\"field.on\" :key=\"field.name\" :class=\"Class.getClass('ptj-form-group')\">\r\n          <ptj-select v-if=\"field.type=='select'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-radio v-else-if=\"field.type=='radio'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-checkbox v-else-if=\"field.type=='checkbox'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-textarea v-else-if=\"field.type=='textarea'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-asset-field v-else-if=\"field.type=='asset'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-input v-else :field=\"field\" :stores=\"store\" />\r\n          <div v-if=\"field.confirm\">\r\n            <ptj-confirm :field=\"field\" :stores=\"store\"/> \r\n          </div>\r\n          <!-- REMOVED: -->\r\n    </div>\r\n    <input type=\"submit\" value=\"Submit\" :class=\"Class.getClass('ptj-form-submit')\">\r\n\r\n  </form>\r\n  <ptj-progress-bar v-show=\"fstate == 1\" :total=\"total\" :progress=\"progress\" />\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCInput from \"./ptj-form-input.vue\"\r\nimport GCConfirm from \"./ptj-form-confirm.vue\"\r\nimport GCSelect from \"./ptj-form-select.vue\"\r\nimport GCRadio from \"./ptj-form-radio.vue\"\r\nimport GCCheckbox from \"./ptj-form-checkbox.vue\"\r\nimport GCTextarea from \"./ptj-form-textarea.vue\"\r\nimport GCAssetField from \"./ptj-form-asset.vue\"\r\nimport GCProgressBar from \"./ptj-progress-bar.vue\"\r\nimport Errors from \"../js/error.js\"\r\nimport Client from \"../js/client.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-form',\r\n  data() {\r\n      return {\r\n          fstate : 0,\r\n          progress : 0,\r\n          globalerror : ''\r\n      }\r\n  },\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  methods : {\r\n    clearErrors() {\r\n        this.globalerror = \"\";\r\n        for(let i in this.store.fields) {\r\n            this.store.fields[i].error = 0;\r\n        }\r\n    },\r\n    saveAsset(field) {\r\n        const val = this.store.data[field.name];\r\n        if (!val) return Promise.resolve();\r\n        asset.saveFile(val, this._key, () => ++this.progress);\r\n        this.total += asset.num_chunks;\r\n    },\r\n    submit(e) {\r\n        this.fstate = (this.total > 0) ? 1 : 2;\r\n        this.clearErrors();\r\n        let data = {};\r\n        for(let i in this.store.fields) {\r\n            if (this.store.fields[i].on) data[i] = this.store.fields[i].val;\r\n        }\r\n        this.store.addKeys(data);\r\n        return Client[this.store.method](this.store.submiturl, data)\r\n        .then(request=>{\r\n            if (request.__status!= \"SUCCESS\") {\r\n                throw { message : request.statusText }\r\n            }\r\n            this.store.resolveKeys(request);\r\n        })\r\n        .then(() => {\r\n            let promises = [];\r\n            for(let i in this.store.fields) {\r\n                if (this.store.fields[i].type == \"asset\") {\r\n                    let promise = this.store.fields[i].saveAsset(this.store.primarykey())\r\n                    .then(() => {\r\n                        ++this.progress;\r\n                    })\r\n                    .catch(err => {\r\n                        this.fstate = 0;\r\n                        this.progress = 0;\r\n                        this.store.fields[i].error = err;\r\n                    });\r\n                    promises.push(promise);\r\n                }\r\n            }\r\n            return Promise.all(promises);\r\n        })\r\n        .then(() => {\r\n            this.store.next();\r\n            Ctrl.buildLink();\r\n        })\r\n        .catch(err => {\r\n            //show error fields, mark fields as invalidated\r\n            this.fstate = 0;\r\n            console.log(err);\r\n            if (typeof err == \"string\") {\r\n                this.globalerror = err;\r\n            } else {\r\n                for(let i in err) {\r\n                    if (i.indexOf(\"__\") === 0) continue;\r\n                    else if (this.store.fields[i]) {\r\n                        this.store.fields[i].error = Errors.getError(err[i]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n  },\r\n  computed : {\r\n      total() {\r\n          let total = 0;\r\n          for(let i in this.store.fields) {\r\n            if (this.store.fields[i].type == \"asset\") {\r\n                ++total;\r\n            }\r\n          }\r\n          return total;\r\n      }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-input\" : GCInput,\r\n      \"ptj-confirm\" : GCConfirm,\r\n      \"ptj-select\" : GCSelect,\r\n      \"ptj-radio\" : GCRadio,\r\n      \"ptj-checkbox\" : GCCheckbox,\r\n      \"ptj-textarea\": GCTextarea,\r\n      \"ptj-asset-field\" : GCAssetField,\r\n      \"ptj-progress-bar\" : GCProgressBar\r\n    }\r\n       \r\n  \r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n <form @submit.prevent=\"submit\" v-show=\"fstate==0\" :class=\"Class.getClass('ptj-form') + ' ' + store.classes\">\r\n    <div :class=\"Class.getClass('ptj-form-error')\" v-show=\"globalerror\">{{ globalerror }}</div>\r\n    <div v-for=\"field in store.fields\" v-show=\"field.on\" :key=\"field.name\" :class=\"Class.getClass('ptj-form-group')\">\r\n          <ptj-select v-if=\"field.type=='select'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-radio v-else-if=\"field.type=='radio'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-checkbox v-else-if=\"field.type=='checkbox'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-textarea v-else-if=\"field.type=='textarea'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-asset-field v-else-if=\"field.type=='asset'\" :field=\"field\" :stores=\"store\" />\r\n          <ptj-input v-else :field=\"field\" :stores=\"store\" />\r\n          <div v-if=\"field.confirm\">\r\n            <ptj-confirm :field=\"field\" :stores=\"store\"/> \r\n          </div>\r\n          <!-- REMOVED: -->\r\n    </div>\r\n    <input type=\"submit\" value=\"Submit\" :class=\"Class.getClass('ptj-form-submit')\">\r\n\r\n  </form>\r\n  <ptj-progress-bar v-show=\"fstate == 1\" :total=\"total\" :progress=\"progress\" />\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCInput from \"./ptj-form-input.vue\"\r\nimport GCConfirm from \"./ptj-form-confirm.vue\"\r\nimport GCSelect from \"./ptj-form-select.vue\"\r\nimport GCRadio from \"./ptj-form-radio.vue\"\r\nimport GCCheckbox from \"./ptj-form-checkbox.vue\"\r\nimport GCTextarea from \"./ptj-form-textarea.vue\"\r\nimport GCAssetField from \"./ptj-form-asset.vue\"\r\nimport GCProgressBar from \"./ptj-progress-bar.vue\"\r\nimport Errors from \"../js/error.js\"\r\nimport Client from \"../js/client.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-form',\r\n  data() {\r\n      return {\r\n          fstate : 0,\r\n          progress : 0,\r\n          globalerror : ''\r\n      }\r\n  },\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  methods : {\r\n    clearErrors() {\r\n        this.globalerror = \"\";\r\n        for(let i in this.store.fields) {\r\n            this.store.fields[i].error = 0;\r\n        }\r\n    },\r\n    saveAsset(field) {\r\n        const val = this.store.data[field.name];\r\n        if (!val) return Promise.resolve();\r\n        asset.saveFile(val, this._key, () => ++this.progress);\r\n        this.total += asset.num_chunks;\r\n    },\r\n    submit(e) {\r\n        this.fstate = (this.total > 0) ? 1 : 2;\r\n        this.clearErrors();\r\n        let data = {};\r\n        for(let i in this.store.fields) {\r\n            if (this.store.fields[i].on) data[i] = this.store.fields[i].val;\r\n        }\r\n        this.store.addKeys(data);\r\n        return Client[this.store.method](this.store.submiturl, data)\r\n        .then(request=>{\r\n            if (request.__status!= \"SUCCESS\") {\r\n                throw { message : request.statusText }\r\n            }\r\n            this.store.resolveKeys(request);\r\n        })\r\n        .then(() => {\r\n            let promises = [];\r\n            for(let i in this.store.fields) {\r\n                if (this.store.fields[i].type == \"asset\") {\r\n                    let promise = this.store.fields[i].saveAsset(this.store.primarykey())\r\n                    .then(() => {\r\n                        ++this.progress;\r\n                    })\r\n                    .catch(err => {\r\n                        this.fstate = 0;\r\n                        this.progress = 0;\r\n                        this.store.fields[i].error = err;\r\n                    });\r\n                    promises.push(promise);\r\n                }\r\n            }\r\n            return Promise.all(promises);\r\n        })\r\n        .then(() => {\r\n            this.store.next();\r\n            Ctrl.buildLink();\r\n        })\r\n        .catch(err => {\r\n            //show error fields, mark fields as invalidated\r\n            this.fstate = 0;\r\n            console.log(err);\r\n            if (typeof err == \"string\") {\r\n                this.globalerror = err;\r\n            } else {\r\n                for(let i in err) {\r\n                    if (i.indexOf(\"__\") === 0) continue;\r\n                    else if (this.store.fields[i]) {\r\n                        this.store.fields[i].error = Errors.getError(err[i]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    }\r\n  },\r\n  computed : {\r\n      total() {\r\n          let total = 0;\r\n          for(let i in this.store.fields) {\r\n            if (this.store.fields[i].type == \"asset\") {\r\n                ++total;\r\n            }\r\n          }\r\n          return total;\r\n      }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-input\" : GCInput,\r\n      \"ptj-confirm\" : GCConfirm,\r\n      \"ptj-select\" : GCSelect,\r\n      \"ptj-radio\" : GCRadio,\r\n      \"ptj-checkbox\" : GCCheckbox,\r\n      \"ptj-textarea\": GCTextarea,\r\n      \"ptj-asset-field\" : GCAssetField,\r\n      \"ptj-progress-bar\" : GCProgressBar\r\n    }\r\n       \r\n  \r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n  <span :class=\"Class.getClass('ptj-nav') + ' ' + classes\">\r\n  <a v-for=\"route in actions\" v-bind:key=\"route\" @click=\"setRoute(route);\" :class=\"Class.getClass('ptj-nav-link')\">\r\n    {{ route.n }}\r\n  </a> \r\n  </span>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-nav',\r\n  props: {\r\n    actions : Array,\r\n    classes : {\r\n        type : String,\r\n        default : \"\"\r\n    }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  methods : {\r\n      setRoute(route) {\r\n          route.r();\r\n          Ctrl.buildLink();\r\n      }\r\n  }   \r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n  <span :class=\"Class.getClass('ptj-nav') + ' ' + classes\">\r\n  <a v-for=\"route in actions\" v-bind:key=\"route\" @click=\"setRoute(route);\" :class=\"Class.getClass('ptj-nav-link')\">\r\n    {{ route.n }}\r\n  </a> \r\n  </span>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-nav',\r\n  props: {\r\n    actions : Array,\r\n    classes : {\r\n        type : String,\r\n        default : \"\"\r\n    }\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  methods : {\r\n      setRoute(route) {\r\n          route.r();\r\n          Ctrl.buildLink();\r\n      }\r\n  }   \r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-filter-form-time-row')\">\r\n  <label :class=\"Class.getClass('ptj-filter-form-time-label')\">{{ field.label }}</label>\r\n  <input :class=\"Class.getClass('ptj-filter-form-time-1')\" type=\"date\" v-model=\"field.val1\">\r\n  <input :class=\"Class.getClass('ptj-filter-form-time-2')\" type=\"date\" v-model=\"field.val2\">\r\n  <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport GCError from \"./ptj-error.vue\"\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-time-range',\r\n props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-filter-form-time-row')\">\r\n  <label :class=\"Class.getClass('ptj-filter-form-time-label')\">{{ field.label }}</label>\r\n  <input :class=\"Class.getClass('ptj-filter-form-time-1')\" type=\"date\" v-model=\"field.val1\">\r\n  <input :class=\"Class.getClass('ptj-filter-form-time-2')\" type=\"date\" v-model=\"field.val2\">\r\n  <ptj-error v-show=\"field.error\" :error=\"field.error\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport GCError from \"./ptj-error.vue\"\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-time-range',\r\n props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  },\r\n  components : {\r\n      'ptj-error' : GCError\r\n  }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n</style>","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-filter-form-checkbox-row')\">\r\n    <label :class=\"Class.getClass('ptj-filter-form-checkbox-label')\">{{ field.label }}</label>\r\n    <select :name=\"field.name\" v-model=\"field.val\" :class=\"Class.getClass('ptj-filter-form-checkbox')\">\r\n        <option value=''>{{ \"All\" }}</option>\r\n        <option value='1'>{{ \"Checked\" }}</option>\r\n        <option value='0'>{{ \"Unchecked\" }}</option>\r\n    </select>\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-checkbox',\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n <div :class=\"Class.getClass('ptj-form-row') + ' ' + Class.getClass('ptj-filter-form-checkbox-row')\">\r\n    <label :class=\"Class.getClass('ptj-filter-form-checkbox-label')\">{{ field.label }}</label>\r\n    <select :name=\"field.name\" v-model=\"field.val\" :class=\"Class.getClass('ptj-filter-form-checkbox')\">\r\n        <option value=''>{{ \"All\" }}</option>\r\n        <option value='1'>{{ \"Checked\" }}</option>\r\n        <option value='0'>{{ \"Unchecked\" }}</option>\r\n    </select>\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-checkbox',\r\n   props : {\r\n    field : Object\r\n  },\r\n  setup() {\r\n       return { Class };\r\n  }\r\n});\r\n</script>\r\n","<template>\r\n    <div :class=\"Class.getClass('ptj-widget-window') + ' ' +  classes\">\r\n        <div :class=\"Class.getClass('ptj-widget-window-header')\">\r\n            <h1 :class=\"Class.getClass('ptj-widget-window-title')\">{{ title }}\r\n            <a :class=\"Class.getClass('ptj-widget-window-toggle')\" @click=\"toggleWidget\"><span class=\"material-icons\">more_horiz</span></a>\r\n            </h1>\r\n        </div>\r\n        <div class=\"Class.getClass('ptj-widget-window-body')\" v-show=\"show\">\r\n            <slot />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        title : String,\r\n        active : {\r\n            type : Boolean,\r\n            default : false\r\n        },\r\n        classes : {\r\n            type : String,\r\n            default : ''\r\n        }\r\n    },\r\n    setup() {\r\n       return { Class };\r\n    },\r\n    data() {\r\n        return {\r\n            show : this.active\r\n        }\r\n    },\r\n    methods : {\r\n        toggleWidget() {\r\n            this.show = (this.show) ? false : true;\r\n        }\r\n    }\r\n});\r\n\r\n</script>","<template>\r\n    <div :class=\"Class.getClass('ptj-widget-window') + ' ' +  classes\">\r\n        <div :class=\"Class.getClass('ptj-widget-window-header')\">\r\n            <h1 :class=\"Class.getClass('ptj-widget-window-title')\">{{ title }}\r\n            <a :class=\"Class.getClass('ptj-widget-window-toggle')\" @click=\"toggleWidget\"><span class=\"material-icons\">more_horiz</span></a>\r\n            </h1>\r\n        </div>\r\n        <div class=\"Class.getClass('ptj-widget-window-body')\" v-show=\"show\">\r\n            <slot />\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        title : String,\r\n        active : {\r\n            type : Boolean,\r\n            default : false\r\n        },\r\n        classes : {\r\n            type : String,\r\n            default : ''\r\n        }\r\n    },\r\n    setup() {\r\n       return { Class };\r\n    },\r\n    data() {\r\n        return {\r\n            show : this.active\r\n        }\r\n    },\r\n    methods : {\r\n        toggleWidget() {\r\n            this.show = (this.show) ? false : true;\r\n        }\r\n    }\r\n});\r\n\r\n</script>","<template>\r\n <ptj-widget title=\"search\">\r\n   <form @submit.prevent=\"submit\" :class=\"Class.getClass('ptj-filter-form')\">\r\n      <h1>Search {{ store.title }}</h1>\r\n      <div v-for=\"field in store.fields\" :key=\"field.name\" :class=\"Class.getClass('ptj-filter-form-group')\">\r\n          <ptj-select v-if=\"field.type=='select'\" :field=\"field\" :multiple=\"true\"  :stores=\"store\"/>\r\n          <ptj-filter-checkbox v-else-if=\"field.type=='checkbox'\" :field=\"field\"  :stores=\"store\"/>\r\n          <ptj-time-range v-else-if=\"field.atts.type=='datetime'\" :field=\"field\"  :stores=\"store\"/>\r\n          <ptj-input v-else :field=\"field\" :stores=\"store\" />\r\n               \r\n          <!-- REMOVED: -->\r\n      </div>\r\n      <input type=\"submit\" value=\"Submit\" :class=\"Class.getClass('ptj-filter-form-submit')\">\r\n  </form>\r\n </ptj-widget>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCInput from \"./ptj-form-input.vue\"\r\nimport GCFormSelect from \"./ptj-form-select.vue\"\r\nimport GCCheckbox from \"./ptj-form-checkbox.vue\"\r\nimport GCFilterFormTime from \"./ptj-filter-form-time.vue\"\r\nimport GCFilterFormCheckbox from \"./ptj-filter-form-checkbox.vue\"\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-filter-form',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  methods : {\r\n    submit() {\r\n      this.store.reload();\r\n    }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-input\" : GCInput,\r\n      \"ptj-select\" : GCFormSelect,\r\n      \"ptj-checkbox\" : GCCheckbox,\r\n      \"ptj-time-range\" : GCFilterFormTime,\r\n      \"ptj-filter-checkbox\" : GCFilterFormCheckbox,\r\n      \"ptj-widget\" : GCWidget\r\n    }\r\n       \r\n  \r\n});\r\n</script>\r\n<style scoped>\r\n.error {\r\n  color : red;\r\n}\r\n\r\n</style>\r\n\r\n","<template>\r\n <ptj-widget title=\"search\">\r\n   <form @submit.prevent=\"submit\" :class=\"Class.getClass('ptj-filter-form')\">\r\n      <h1>Search {{ store.title }}</h1>\r\n      <div v-for=\"field in store.fields\" :key=\"field.name\" :class=\"Class.getClass('ptj-filter-form-group')\">\r\n          <ptj-select v-if=\"field.type=='select'\" :field=\"field\" :multiple=\"true\"  :stores=\"store\"/>\r\n          <ptj-filter-checkbox v-else-if=\"field.type=='checkbox'\" :field=\"field\"  :stores=\"store\"/>\r\n          <ptj-time-range v-else-if=\"field.atts.type=='datetime'\" :field=\"field\"  :stores=\"store\"/>\r\n          <ptj-input v-else :field=\"field\" :stores=\"store\" />\r\n               \r\n          <!-- REMOVED: -->\r\n      </div>\r\n      <input type=\"submit\" value=\"Submit\" :class=\"Class.getClass('ptj-filter-form-submit')\">\r\n  </form>\r\n </ptj-widget>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCInput from \"./ptj-form-input.vue\"\r\nimport GCFormSelect from \"./ptj-form-select.vue\"\r\nimport GCCheckbox from \"./ptj-form-checkbox.vue\"\r\nimport GCFilterFormTime from \"./ptj-filter-form-time.vue\"\r\nimport GCFilterFormCheckbox from \"./ptj-filter-form-checkbox.vue\"\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-filter-form',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  methods : {\r\n    submit() {\r\n      this.store.reload();\r\n    }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-input\" : GCInput,\r\n      \"ptj-select\" : GCFormSelect,\r\n      \"ptj-checkbox\" : GCCheckbox,\r\n      \"ptj-time-range\" : GCFilterFormTime,\r\n      \"ptj-filter-checkbox\" : GCFilterFormCheckbox,\r\n      \"ptj-widget\" : GCWidget\r\n    }\r\n       \r\n  \r\n});\r\n</script>\r\n<style scoped>\r\n.error {\r\n  color : red;\r\n}\r\n\r\n</style>\r\n\r\n","<template>\r\n <div :class=\"Class.getClass('ptj-pagination')\">\r\n     <a v-show=\"optiongroup > 0\" @click=\"showPages(-1);\">&lt;&lt;</a>\r\n     <a v-for=\"index in maxoptions\" :key=\"index\" @click=\"page(index)\">{{ firstindex + index }}</a>\r\n     <a v-show=\"current_group < groups - 1\" @click=\"showPages(1)\">&gt;&gt;</a>\r\n </div>\r\n</template>\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        max_page_limit : Number\r\n    },\r\n    setup(props) {\r\n        let groups = Math.ceil(props.pages / props.max_page_limit);\r\n        return {\r\n            groups, current_group : 0, Class\r\n        }\r\n    },\r\n    computed : {\r\n        firstindex() {\r\n            return this.current_group * this.max_options;\r\n        },\r\n        maxoptions() {\r\n            return [];\r\n        }\r\n    },\r\n    methods : {\r\n        showPages(index) {\r\n            let route = Controller.current_route.value;\r\n            let url = route + \"#\";\r\n            if (route.query) url += route.query + \"&\";\r\n            url += \"__page=\" + (this.firstindex + index);\r\n            Router.setRoute(url);\r\n        }\r\n    }\r\n});\r\n</script>","<template>\r\n <div :class=\"Class.getClass('ptj-pagination')\">\r\n     <a v-show=\"optiongroup > 0\" @click=\"showPages(-1);\">&lt;&lt;</a>\r\n     <a v-for=\"index in maxoptions\" :key=\"index\" @click=\"page(index)\">{{ firstindex + index }}</a>\r\n     <a v-show=\"current_group < groups - 1\" @click=\"showPages(1)\">&gt;&gt;</a>\r\n </div>\r\n</template>\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        max_page_limit : Number\r\n    },\r\n    setup(props) {\r\n        let groups = Math.ceil(props.pages / props.max_page_limit);\r\n        return {\r\n            groups, current_group : 0, Class\r\n        }\r\n    },\r\n    computed : {\r\n        firstindex() {\r\n            return this.current_group * this.max_options;\r\n        },\r\n        maxoptions() {\r\n            return [];\r\n        }\r\n    },\r\n    methods : {\r\n        showPages(index) {\r\n            let route = Controller.current_route.value;\r\n            let url = route + \"#\";\r\n            if (route.query) url += route.query + \"&\";\r\n            url += \"__page=\" + (this.firstindex + index);\r\n            Router.setRoute(url);\r\n        }\r\n    }\r\n});\r\n</script>","<template>\r\n    <ptj-widget title=\"select fields\" :classes=\"Class.getClass('ptj-selectfields')\">\r\n        <div v-for=\"field, name in store.fields\" :key=\"name\"> \r\n            <input \r\n                type=\"checkbox\" \r\n                v-model=\"field.on\" \r\n                :class=\"Class.getClass('ptj-selectfields-checkbox')\"> \r\n            <label :class=\"Class.getClass('ptj-selectfields-label')\">{{ field.name }}</label>\r\n        </div>\r\n    </ptj-widget>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class }\r\n    },   \r\n    components : {\r\n        \"ptj-widget\" : GCWidget\r\n    }\r\n});\r\n</script>\r\n\r\n","<template>\r\n    <ptj-widget title=\"select fields\" :classes=\"Class.getClass('ptj-selectfields')\">\r\n        <div v-for=\"field, name in store.fields\" :key=\"name\"> \r\n            <input \r\n                type=\"checkbox\" \r\n                v-model=\"field.on\" \r\n                :class=\"Class.getClass('ptj-selectfields-checkbox')\"> \r\n            <label :class=\"Class.getClass('ptj-selectfields-label')\">{{ field.name }}</label>\r\n        </div>\r\n    </ptj-widget>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class }\r\n    },   \r\n    components : {\r\n        \"ptj-widget\" : GCWidget\r\n    }\r\n});\r\n</script>\r\n\r\n","<template>\r\n    <h1 :class=\"Class.getClass('ptj-repo-header-title')\">{{ store.title }}</h1>\r\n    <ptj-nav :actions=\"store.actions\" :class=\"Class.getClass('ptj-repo-header-actions')\"/>\r\n    <ptj-filter-form  v-if=\"store.disable_filter != true\"/>\r\n    <ptj-selectfields v-if=\"store.disable_selectfields != true\" />\r\n</template>\r\n\r\n<script>\r\n\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCFilterForm from \"./ptj-filter-form.vue\"\r\nimport GCPagination from \"./ptj-pagination.vue\"\r\nimport GCSelectFields from \"./ptj-selectfields.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-header',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n    components : {\r\n        \"ptj-nav\" : GCNav,\r\n        \"ptj-filter-form\" : GCFilterForm,\r\n        \"ptj-pagination\" : GCPagination,\r\n        \"ptj-selectfields\" : GCSelectFields\r\n    }\r\n});\r\n</script>\r\n","<template>\r\n    <h1 :class=\"Class.getClass('ptj-repo-header-title')\">{{ store.title }}</h1>\r\n    <ptj-nav :actions=\"store.actions\" :class=\"Class.getClass('ptj-repo-header-actions')\"/>\r\n    <ptj-filter-form  v-if=\"store.disable_filter != true\"/>\r\n    <ptj-selectfields v-if=\"store.disable_selectfields != true\" />\r\n</template>\r\n\r\n<script>\r\n\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCFilterForm from \"./ptj-filter-form.vue\"\r\nimport GCPagination from \"./ptj-pagination.vue\"\r\nimport GCSelectFields from \"./ptj-selectfields.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-header',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n    components : {\r\n        \"ptj-nav\" : GCNav,\r\n        \"ptj-filter-form\" : GCFilterForm,\r\n        \"ptj-pagination\" : GCPagination,\r\n        \"ptj-selectfields\" : GCSelectFields\r\n    }\r\n});\r\n</script>\r\n","<template >\r\n    <div :class=\"Class.getClass('ptj-tree-node') + ' ptj-draggable' + this.getRowClass()\" :id=\"branch[store.primarykeyname]\" draggable=\"false\">\r\n        <div :class=\"Class.getClass('ptj-tree-node-row')\" @click=\"selectRow(branch[store.primarykeyname]);\">  \r\n            <div>\r\n                <a v-if=\"ischild\" data-action=\"more\" class=\"button\" @click.prevent.stop=\"toggle(branch[store.primarykeyname], false)\">\r\n                    <span class=\"material-icons\">subdirectory_arrow_right</span>\r\n                </a>\r\n                <a v-else data-action=\"more\" class=\"button\" @click.prevent.stop=\"toggle(branch[store.primarykeyname], true)\">\r\n                    <span class=\"material-icons\">keyboard_arrow_right</span>\r\n                </a>\r\n            </div>\r\n            <div v-if=\"sortable\">\r\n                <a data-action=\"more\" class=\"button\" @click=\"prevent.stop\" @mousedown=\"setDraggable\" @mouseup=\"endDraggable\">\r\n                    <span class=\"material-icons\">drag_handle</span>\r\n                </a>\r\n            </div>\r\n            <div v-for=\"(field, cindex) in store.fields\" :key=\"cindex\" v-show=\"field.on\">\r\n                <span>{{ field.label }}: {{ branch[field.name] }}</span>\r\n            </div>\r\n            \r\n        </div>\r\n        <ptj-tree-node v-for=\"(obj, index) in children\" :branch=\"obj\" :ischild=\"true\"  :key=\"index\" v-show=\"toggle_state[branch[store.primarykeyname]]\" :store=\"store\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n\tname : \"ptj-tree-node\",\r\n\tprops : {\r\n\t\tbranch : {\r\n            type : Object,\r\n            required : true\r\n        },\r\n        draggable : Boolean,\r\n        ischild : {\r\n            type : Boolean,\r\n            default : false\r\n        }\r\n\r\n\t},\r\n    data() {\r\n        return {\r\n            toggle_state : {}\r\n        }\r\n    },\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class }\r\n    },\r\n\tmethods : {\r\n        toggle(index) {\r\n            this.toggle_state[index] = (this.toggle_state[index]) ? false : true;\r\n        },\r\n        setDraggable(e) {\r\n            e.target.closest(\".ptj-draggable\").setAttribute(\"draggable\", true);\r\n        },\r\n        endDraggable(e) {\r\n            e.target.closest(\".ptj-draggable\").setAttribute(\"draggable\", false);\r\n        },\r\n        selectRow(key) {\r\n            this.store.next(key);\r\n            Ctrl.buildLink();\r\n        },\r\n        getRowClass() {\r\n            let str = [];\r\n            for(let name of this.store.groups) {\r\n                str.push(this.store.model + \"-\" + name.replace(\"_\", \"-\") + \"-\" + this.branch[name]);\r\n            }\r\n            return str.join(\" \");\r\n        }\r\n\t},\r\n    computed : {\r\n        sortable() {\r\n            return true;\r\n        },\r\n        children() {\r\n            let arr = [];\r\n            if (this.store.circular && this.branch[this.store.model]) arr = this.branch[this.store.model];\r\n            for(let i in this.store.activechildren) {\r\n                if (this.branch[this.store.activechildren[i]]) arr=arr.concat(this.branch[this.store.activechildren[i]]);\r\n            }\r\n            return arr;\r\n        }\r\n    },\r\n\tcomponents : {\r\n\t\r\n\t}\r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.model-tree.branch {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\r\n}\r\n\r\n.tree .ide-block {\r\n\tdisplay : none;\r\n}\r\n\r\n.dragArea {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\r\n}\r\n\r\n\r\n</style>","<template >\r\n    <div :class=\"Class.getClass('ptj-tree-node') + ' ptj-draggable' + this.getRowClass()\" :id=\"branch[store.primarykeyname]\" draggable=\"false\">\r\n        <div :class=\"Class.getClass('ptj-tree-node-row')\" @click=\"selectRow(branch[store.primarykeyname]);\">  \r\n            <div>\r\n                <a v-if=\"ischild\" data-action=\"more\" class=\"button\" @click.prevent.stop=\"toggle(branch[store.primarykeyname], false)\">\r\n                    <span class=\"material-icons\">subdirectory_arrow_right</span>\r\n                </a>\r\n                <a v-else data-action=\"more\" class=\"button\" @click.prevent.stop=\"toggle(branch[store.primarykeyname], true)\">\r\n                    <span class=\"material-icons\">keyboard_arrow_right</span>\r\n                </a>\r\n            </div>\r\n            <div v-if=\"sortable\">\r\n                <a data-action=\"more\" class=\"button\" @click=\"prevent.stop\" @mousedown=\"setDraggable\" @mouseup=\"endDraggable\">\r\n                    <span class=\"material-icons\">drag_handle</span>\r\n                </a>\r\n            </div>\r\n            <div v-for=\"(field, cindex) in store.fields\" :key=\"cindex\" v-show=\"field.on\">\r\n                <span>{{ field.label }}: {{ branch[field.name] }}</span>\r\n            </div>\r\n            \r\n        </div>\r\n        <ptj-tree-node v-for=\"(obj, index) in children\" :branch=\"obj\" :ischild=\"true\"  :key=\"index\" v-show=\"toggle_state[branch[store.primarykeyname]]\" :store=\"store\" />\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n\tname : \"ptj-tree-node\",\r\n\tprops : {\r\n\t\tbranch : {\r\n            type : Object,\r\n            required : true\r\n        },\r\n        draggable : Boolean,\r\n        ischild : {\r\n            type : Boolean,\r\n            default : false\r\n        }\r\n\r\n\t},\r\n    data() {\r\n        return {\r\n            toggle_state : {}\r\n        }\r\n    },\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class }\r\n    },\r\n\tmethods : {\r\n        toggle(index) {\r\n            this.toggle_state[index] = (this.toggle_state[index]) ? false : true;\r\n        },\r\n        setDraggable(e) {\r\n            e.target.closest(\".ptj-draggable\").setAttribute(\"draggable\", true);\r\n        },\r\n        endDraggable(e) {\r\n            e.target.closest(\".ptj-draggable\").setAttribute(\"draggable\", false);\r\n        },\r\n        selectRow(key) {\r\n            this.store.next(key);\r\n            Ctrl.buildLink();\r\n        },\r\n        getRowClass() {\r\n            let str = [];\r\n            for(let name of this.store.groups) {\r\n                str.push(this.store.model + \"-\" + name.replace(\"_\", \"-\") + \"-\" + this.branch[name]);\r\n            }\r\n            return str.join(\" \");\r\n        }\r\n\t},\r\n    computed : {\r\n        sortable() {\r\n            return true;\r\n        },\r\n        children() {\r\n            let arr = [];\r\n            if (this.store.circular && this.branch[this.store.model]) arr = this.branch[this.store.model];\r\n            for(let i in this.store.activechildren) {\r\n                if (this.branch[this.store.activechildren[i]]) arr=arr.concat(this.branch[this.store.activechildren[i]]);\r\n            }\r\n            return arr;\r\n        }\r\n    },\r\n\tcomponents : {\r\n\t\r\n\t}\r\n});\r\n\r\n\r\n</script>\r\n\r\n<style scoped>\r\n\r\n.model-tree.branch {\r\n  padding-left: 8px;\r\n  padding-right: 8px;\r\n  margin: 6px 0;\r\n  background-color:#111111;\r\n}\r\n\r\n.tree .ide-block {\r\n\tdisplay : none;\r\n}\r\n\r\n.dragArea {\r\n  min-height: 50px;\r\n  outline: 1px solid #777777;\r\n}\r\n\r\n\r\n</style>","class GCDragNDrop {\r\n\r\n    constructor(props = {}) {\r\n        this._handle = props.handle;\r\n        this._drop_target = props.drop_target;\r\n        this._drag_target = props.drag_target;\r\n        this._call_back = props.callback;\r\n        this._x = 0;\r\n        this._y = 0;\r\n        this._offset_x = 0;\r\n        this._offset_y = 0;\r\n        this._judder = (props.judder) ? props.judder : 5;\r\n        this._drag_node;\r\n        this._drop_node;\r\n        this._tree = props.tree;\r\n    }\r\n\r\n    isJudder(x, y) {\r\n        const dx = x - this._x;\r\n        const dy = y - this._y;\r\n      \r\n        if (dx < -5 || dx > 5) return false;\r\n        else if (dy < -5 || dy > 5) return false;\r\n        else return true;\r\n    }\r\n\r\n    getDirection(x, y) {\r\n        const dir_x = (x == this._x) ? 0 : (x > this._x) ? 1 : -1;\r\n        const dir_y = (y == this._y) ? 0 : (y > this._y) ? 1 : -1;\r\n      \r\n        return { x : dir_x, y : dir_y };\r\n    }\r\n\r\n    offset(elem) {\r\n        var rect = elem.getBoundingClientRect();\r\n        var win = elem.ownerDocument.defaultView;\r\n\r\n        return {\r\n            top: rect.top + win.pageYOffset,\r\n            left: rect.left + win.pageXOffset\r\n        };\r\n    }\r\n\r\n    insertAfter() {\r\n        let drag_id = this._drag_node.getAttribute(\"id\");\r\n        let drop_id = this._drop_node.getAttribute(\"id\");\r\n\r\n        let circular = 0;\r\n        let sort = 0;\r\n        if (this._drop_node.nextElementSibling) {\r\n            for(let i in this._tree) {\r\n                let node = this._tree[i];\r\n                if (node.id == drop_id) {\r\n                    circular = node.circular;\r\n                    sort = node.sort;\r\n                    break;\r\n                } \r\n            }\r\n\r\n            for(let i in this._tree) {\r\n                let node = this._tree[i];\r\n                if (node.id == drag_id) {\r\n                    node.circular = circular;\r\n                    node.sort = sort + 1;\r\n                } else if (node.circular == circular && node.sort > sort) {\r\n                    ++node.sort;\r\n                }\r\n            }\r\n        } else {\r\n            for(let i in this._tree) {\r\n                let node = this._tree[i];\r\n                if (node.id == drag_id) {\r\n                    node.circular = circular;\r\n                    node.sort = 0;\r\n                } \r\n            }\r\n        }\r\n    }\r\n\r\n    insertBefore() {\r\n        let drag_id = this._drag_node.getAttribute(\"id\");\r\n        let drop_id = this._drop_node.getAttribute(\"id\");\r\n\r\n        let circular = 0;\r\n        let sort = 0;\r\n        for(let i in this._tree) {\r\n            let node = this._tree[i];\r\n            if (node.id == drop_id) {\r\n                circular = node.circular;\r\n                sort = node.sort;\r\n                ++node.sort;\r\n                break;\r\n            } \r\n        }\r\n\r\n        for(let i in this._tree) {\r\n            let node = this._tree[i];\r\n            if (node.id == drag_id) {\r\n                node.circular = circular;\r\n                node.sort = sort;\r\n            } else if (node.circular == circular && node.sort > sort) {\r\n                ++node.sort;\r\n            }\r\n        }\r\n    }\r\n\r\n    dragStart(ev) {\r\n        const targ = ev.target.closest('[id]');\r\n        this._drag_node = targ;\r\n        const { top, left } = this.offset(targ);\r\n\r\n        ev.dataTransfer.dropEffect = \"move\";\r\n\r\n        this._x = ev.clientX;\r\n        this._y = ev.clientY;\r\n    \r\n        this._offset_x = ev.clientX - left;\r\n        this._offset_y = ev.clientY - top;\r\n    }\r\n\r\n    isDroppable(ev) {\r\n        let cont = ev.target.closest(this._drop_target);\r\n        return (cont) ? true : false;\r\n    }\r\n\r\n    dragEnter(ev) {\r\n        if (!this.isDroppable(ev)) return true;\r\n        ev.preventDefault();\r\n        ev.dataTransfer.dropEffect = \"move\";\r\n\r\n        this._drop_node = ev.target.closest(this._drag_target);\r\n\r\n        if (!this._drop_node || this._drop_node.getAttribute(\"id\") == this._drag_node.getAttribute(\"id\")) {\r\n            return;\r\n        }\r\n\r\n        const dir = this.getDirection(ev.clientX, ev.clientY);\r\n\r\n        if (dir.y == 1) {\r\n            this.insertAfter();\r\n        } else if (dir.y == -1) {\r\n            this.insertBefore();\r\n        }\r\n        this._x = ev.clientX;\r\n        this._y = ev.clientY;\r\n    }\r\n\r\n    dragOver(ev) {\r\n        if (!this.isDroppable(ev)) return true;\r\n        ev.preventDefault();\r\n        ev.dataTransfer.dropEffect = \"move\";\r\n    }\r\n\r\n\r\n    dragEnd() {\r\n        if (this._drag_node) this._drag_node.setAttribute(\"draggable\", false);\r\n        this._drag_node = null;\r\n    }\r\n\r\n    drop(ev) {\r\n        if (!this._drop_node) return true;\r\n        ev.preventDefault();\r\n        if (this._call_back) this._call_back(this._tree);\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nfunction initDD(props) {\r\n    let drag = new GCDragNDrop(props);\r\n    let handles = document.querySelectorAll(props.handle);\r\n    handles.forEach(el => el.addAttribute(\"draggable\", true));\r\n\r\n    if (props.handle) {\r\n\r\n        let handles = document.querySelectorAll(props.handle);\r\n\r\n        handles.forEach(el => {\r\n            el.addEventListener(\"mousedown\", e => {\r\n                let cont = e.target.closest(props.drag_target);\r\n                cont.addAttribute(\"draggable\", true);\r\n            });            \r\n        });\r\n    }\r\n\r\n    props.main.addEventListener(\"dragstart\", e => drag.dragStart(e));\r\n    props.main.addEventListener(\"dragenter\", e => drag.dragEnter(e));\r\n    props.main.addEventListener(\"dragover\", e => drag.dragOver(e));\r\n    props.main.addEventListener(\"drop\", e => drag.drop(e));\r\n    props.main.addEventListener(\"dragend\", e => drag.dragEnd(e));\r\n}\r\n\r\nexport default {\r\n    initDD\r\n}","<template >\r\n  <div :class=\"Class.getClass('ptj-tree') + ' ' + store.classes + ' ptj-drop-target'\" ref=\"treeroot\">\r\n    <ptj-tree-node v-for=\"(obj, index) in store.data\" :key=\"index\" :branch=\"obj\"  />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, defineComponent } from 'vue'\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCTreeNode from \"./ptj-tree-node.vue\"\r\nimport GCDragDrop from \"../js/dragndrop.js\"\r\nimport GCFilterForm from \"./ptj-filter-form.vue\"\r\nimport GCSelectFields from \"./ptj-selectfields.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n\tname : \"ptj-tree\",\r\n    setup(props) {\r\n        let base = { store : Ctrl.getStore(), treeroot : ref(null), Class };\r\n        onMounted(() => {\r\n           //if (ctrl.sort) {\r\n             GCDragDrop.initDD({\r\n               handle : '.ptj-drag-handle',\r\n               drag_target : '.ptj-draggable',\r\n               drop_target : '.ptj-drop-target',\r\n               main : base.treeroot.value,\r\n               tree : base.store.data,\r\n               callback : base.store.saveSort\r\n             });\r\n           //}\r\n        });\r\n\r\n       return base;\r\n   },\r\n    components : {\r\n        \"ptj-nav\" : GCNav,\r\n        \"ptj-tree-node\" : GCTreeNode,\r\n        \"ptj-filter-form\" : GCFilterForm,\r\n        \"ptj-selectfields\" : GCSelectFields\r\n    }\r\n});\r\n\r\n\r\n</script>\r\n","<template >\r\n  <div :class=\"Class.getClass('ptj-tree') + ' ' + store.classes + ' ptj-drop-target'\" ref=\"treeroot\">\r\n    <ptj-tree-node v-for=\"(obj, index) in store.data\" :key=\"index\" :branch=\"obj\"  />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, defineComponent } from 'vue'\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCTreeNode from \"./ptj-tree-node.vue\"\r\nimport GCDragDrop from \"../js/dragndrop.js\"\r\nimport GCFilterForm from \"./ptj-filter-form.vue\"\r\nimport GCSelectFields from \"./ptj-selectfields.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n\tname : \"ptj-tree\",\r\n    setup(props) {\r\n        let base = { store : Ctrl.getStore(), treeroot : ref(null), Class };\r\n        onMounted(() => {\r\n           //if (ctrl.sort) {\r\n             GCDragDrop.initDD({\r\n               handle : '.ptj-drag-handle',\r\n               drag_target : '.ptj-draggable',\r\n               drop_target : '.ptj-drop-target',\r\n               main : base.treeroot.value,\r\n               tree : base.store.data,\r\n               callback : base.store.saveSort\r\n             });\r\n           //}\r\n        });\r\n\r\n       return base;\r\n   },\r\n    components : {\r\n        \"ptj-nav\" : GCNav,\r\n        \"ptj-tree-node\" : GCTreeNode,\r\n        \"ptj-filter-form\" : GCFilterForm,\r\n        \"ptj-selectfields\" : GCSelectFields\r\n    }\r\n});\r\n\r\n\r\n</script>\r\n","<template>\r\n    <table :class=\"Class.getClass('ptj-table') + ' ' + store.classes\">\r\n    <thead>\r\n        <tr :class=\"Class.getClass('ptj-table-header')\">\r\n        <th v-for=\"(cell, index) in store.fields\" :key=\"cell.name\" :class=\"Class.getClass('ptj-table-header-cell') + ' ' + cell.name.replace('_', '-')\" v-show=\"store.fields[index].on\">{{ cell.label }}\r\n            <span v-if=\"sortable == false\" class=\"material-icons\" @click=\"orderBy(cell, false);\">keyboard_arrow_up</span>\r\n            <span v-if=\"sortable == false\" class=\"material-icons\" @click=\"orderBy(cell, true);\">keyboard_arrow_down</span>\r\n        </th>\r\n        <th v-if=\"sortable\">&nbsp;</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(obj, rindex) in store.data\" :key=\"rindex\" :class=\"Class.getClass('ptj-table-row') + ' ' + this.getRowClass(obj)\" @click=\"next(obj[store.primarykeyname]);\">\r\n        <td v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"Class.getClass('ptj-table-cell') + ' ' + field.name.replace('_', '-')\" v-show=\"store.fields[index].on\">{{ obj[field.name] }}</td>\r\n        <td :class=\"Class.getClass('ptj-table-cell-sortable')\" v-if=\"sortable\">\r\n            <a data-action=\"more\" class=\"button\" @click.prevent=\"toggle\" draggable=\"true\">\r\n                <span class=\"material-icons\">drag</span>\r\n            </a>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    </table>\r\n    <ptj-pagination v-if=\"overlimit\" />\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport GCPagination from \"./ptj-pagination.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    name: 'ptj-table',\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class}\r\n    },\r\n    methods : {\r\n        next(key) {\r\n            this.store.next(key);\r\n            Ctrl.buildLink();\r\n        },\r\n        orderBy(cell, dir) {\r\n            let order = {};\r\n            order[cell.name] = dir;\r\n            this.store.orderby = order;\r\n            if (this.store.pages > 0) {\r\n                this.store.load();\r\n            } else {\r\n                //custom sort on the table\r\n                if (dir) {\r\n                    this.store.data.sort(function(x, y) {\r\n                        let xval = x[cell.name];\r\n                        let yval = y[cell.name];\r\n                        if (xval < yval) {\r\n                            return -1;\r\n                        } else if (xval > yval) {\r\n                            return 1;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.store.data.sort(function(x, y) {\r\n                        let xval = x[cell.name];\r\n                        let yval = y[cell.name];\r\n                        if (xval < yval) {\r\n                            return 1;\r\n                        } else if (xval > yval) {\r\n                            return -1;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        getRowClass(obj) {\r\n            let str = [];\r\n            for(let name of this.store.groups) {\r\n                str.push(this.store.model + \"-\" + name.replace(\"_\", \"-\") + \"-\" + obj[name]);\r\n            }\r\n            return str.join(\" \");\r\n        }\r\n    },\r\n    computed : {\r\n        sortable() {\r\n            return (this.store.sort) ? true : false;\r\n        },\r\n        overlimit() {\r\n            return false;\r\n        },\r\n        rowclass() {\r\n\r\n        }\r\n    },\r\n    components : {\r\n        \"ptj-pagination\" : GCPagination,\r\n    }\r\n\r\n   \r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n.table, .thead, .tbody, .tr {\r\n    width : 100%;\r\n}\r\n\r\n\r\n</style>","<template>\r\n    <table :class=\"Class.getClass('ptj-table') + ' ' + store.classes\">\r\n    <thead>\r\n        <tr :class=\"Class.getClass('ptj-table-header')\">\r\n        <th v-for=\"(cell, index) in store.fields\" :key=\"cell.name\" :class=\"Class.getClass('ptj-table-header-cell') + ' ' + cell.name.replace('_', '-')\" v-show=\"store.fields[index].on\">{{ cell.label }}\r\n            <span v-if=\"sortable == false\" class=\"material-icons\" @click=\"orderBy(cell, false);\">keyboard_arrow_up</span>\r\n            <span v-if=\"sortable == false\" class=\"material-icons\" @click=\"orderBy(cell, true);\">keyboard_arrow_down</span>\r\n        </th>\r\n        <th v-if=\"sortable\">&nbsp;</th>\r\n        </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"(obj, rindex) in store.data\" :key=\"rindex\" :class=\"Class.getClass('ptj-table-row') + ' ' + this.getRowClass(obj)\" @click=\"next(obj[store.primarykeyname]);\">\r\n        <td v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"Class.getClass('ptj-table-cell') + ' ' + field.name.replace('_', '-')\" v-show=\"store.fields[index].on\">{{ obj[field.name] }}</td>\r\n        <td :class=\"Class.getClass('ptj-table-cell-sortable')\" v-if=\"sortable\">\r\n            <a data-action=\"more\" class=\"button\" @click.prevent=\"toggle\" draggable=\"true\">\r\n                <span class=\"material-icons\">drag</span>\r\n            </a>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n    </table>\r\n    <ptj-pagination v-if=\"overlimit\" />\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport GCPagination from \"./ptj-pagination.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    name: 'ptj-table',\r\n    setup() {\r\n        return { store : Ctrl.getStore(), Class}\r\n    },\r\n    methods : {\r\n        next(key) {\r\n            this.store.next(key);\r\n            Ctrl.buildLink();\r\n        },\r\n        orderBy(cell, dir) {\r\n            let order = {};\r\n            order[cell.name] = dir;\r\n            this.store.orderby = order;\r\n            if (this.store.pages > 0) {\r\n                this.store.load();\r\n            } else {\r\n                //custom sort on the table\r\n                if (dir) {\r\n                    this.store.data.sort(function(x, y) {\r\n                        let xval = x[cell.name];\r\n                        let yval = y[cell.name];\r\n                        if (xval < yval) {\r\n                            return -1;\r\n                        } else if (xval > yval) {\r\n                            return 1;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    });\r\n                } else {\r\n                    this.store.data.sort(function(x, y) {\r\n                        let xval = x[cell.name];\r\n                        let yval = y[cell.name];\r\n                        if (xval < yval) {\r\n                            return 1;\r\n                        } else if (xval > yval) {\r\n                            return -1;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        },\r\n        getRowClass(obj) {\r\n            let str = [];\r\n            for(let name of this.store.groups) {\r\n                str.push(this.store.model + \"-\" + name.replace(\"_\", \"-\") + \"-\" + obj[name]);\r\n            }\r\n            return str.join(\" \");\r\n        }\r\n    },\r\n    computed : {\r\n        sortable() {\r\n            return (this.store.sort) ? true : false;\r\n        },\r\n        overlimit() {\r\n            return false;\r\n        },\r\n        rowclass() {\r\n\r\n        }\r\n    },\r\n    components : {\r\n        \"ptj-pagination\" : GCPagination,\r\n    }\r\n\r\n   \r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n.table, .thead, .tbody, .tr {\r\n    width : 100%;\r\n}\r\n\r\n\r\n</style>","<template>\r\n  <div :class=\"Class.getClass('ptj-list') + ' ' + store.classes\">\r\n    <div v-for=\"(combinations, index) in getIndexCombinations\" :key=\"index\">\r\n      <h3><span\r\n              v-for=\"(tag, index) in combinations.tags\"\r\n              :key=\"index\"\r\n              >{{ tag }}&nbsp;</span></h3>\r\n      <ul>\r\n        <li v-for=\"ckey in combinations.data\" :key=\"ckey\">\r\n          <a @click=\"next(store.data[ckey][store.primarykeyname])\">\r\n            <span\r\n              v-for=\"field in store.fields\"\r\n              :key=\"field.name\"\r\n              v-show=\"field.on\"\r\n              >{{ store.data[ckey][field.name] }}&nbsp;</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport Ctrl from \"../js/controller.js\";\r\nimport Class from \"../js/classinjection.js\";\r\n\r\nexport default defineComponent({\r\n  name: \"ptj-list\",\r\n  setup() {\r\n    return { store: Ctrl.getStore(), Class };\r\n  },\r\n  methods: {\r\n    next(key) {\r\n      this.store.next(key);\r\n      Ctrl.buildLink();\r\n    },\r\n    getCombinations(tag, data, combos) {\r\n      const ncombos = [];\r\n      if (combos.length == 0) {\r\n          for(let d in data) {\r\n            ncombos.push({ tags : { tag : data[d].display }, data : data[d].contains});\r\n          }\r\n      } else {\r\n        for (let c of combos) {\r\n          for(let d in data) {\r\n            let tags = c.tags;\r\n            tags[tag] = d.display;\r\n            ncombos.push({ tags : tags, data : c.data.filter( value => data[d].contains.includes(value))});\r\n          }\r\n        }\r\n      }\r\n      return ncombos;\r\n    }\r\n  },\r\n  computed: {\r\n    getIndexCombinations() {\r\n      let combos = [];\r\n      for (let group in this.store.indexes) {\r\n          combos = this.getCombinations(group, this.store.indexes[group], combos);\r\n      }\r\n      return combos;\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n","<template>\r\n  <div :class=\"Class.getClass('ptj-list') + ' ' + store.classes\">\r\n    <div v-for=\"(combinations, index) in getIndexCombinations\" :key=\"index\">\r\n      <h3><span\r\n              v-for=\"(tag, index) in combinations.tags\"\r\n              :key=\"index\"\r\n              >{{ tag }}&nbsp;</span></h3>\r\n      <ul>\r\n        <li v-for=\"ckey in combinations.data\" :key=\"ckey\">\r\n          <a @click=\"next(store.data[ckey][store.primarykeyname])\">\r\n            <span\r\n              v-for=\"field in store.fields\"\r\n              :key=\"field.name\"\r\n              v-show=\"field.on\"\r\n              >{{ store.data[ckey][field.name] }}&nbsp;</span>\r\n          </a>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from \"vue\";\r\nimport Ctrl from \"../js/controller.js\";\r\nimport Class from \"../js/classinjection.js\";\r\n\r\nexport default defineComponent({\r\n  name: \"ptj-list\",\r\n  setup() {\r\n    return { store: Ctrl.getStore(), Class };\r\n  },\r\n  methods: {\r\n    next(key) {\r\n      this.store.next(key);\r\n      Ctrl.buildLink();\r\n    },\r\n    getCombinations(tag, data, combos) {\r\n      const ncombos = [];\r\n      if (combos.length == 0) {\r\n          for(let d in data) {\r\n            ncombos.push({ tags : { tag : data[d].display }, data : data[d].contains});\r\n          }\r\n      } else {\r\n        for (let c of combos) {\r\n          for(let d in data) {\r\n            let tags = c.tags;\r\n            tags[tag] = d.display;\r\n            ncombos.push({ tags : tags, data : c.data.filter( value => data[d].contains.includes(value))});\r\n          }\r\n        }\r\n      }\r\n      return ncombos;\r\n    }\r\n  },\r\n  computed: {\r\n    getIndexCombinations() {\r\n      let combos = [];\r\n      for (let group in this.store.indexes) {\r\n          combos = this.getCombinations(group, this.store.indexes[group], combos);\r\n      }\r\n      return combos;\r\n    },\r\n  },\r\n});\r\n</script>\r\n\r\n","<template>\r\n<div :class=\"Class.getClass('ptj-repo') + ' ' + store.classes\">\r\n    <ptj-repo-header  />\r\n    <component :key=\"store.key\" :is=\"store.rawcomponent\" />\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport PTJRepoHeader from \"./ptj-repo-header.vue\"\r\nimport PTJTree from \"./ptj-tree.vue\"\r\nimport PTJTable from \"./ptj-table.vue\"\r\nimport PTJList from \"./ptj-list.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-repo',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n    components : {\r\n        \"ptj-repo-header\" : PTJRepoHeader,\r\n        \"ptj-tree\" : PTJTree,\r\n        \"ptj-table\" : PTJTable,\r\n        \"ptj-list\" : PTJList\r\n    }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n.table, .thead, .tbody, .tr {\r\n    width : 100%;\r\n}\r\n\r\n\r\n\r\n.ptj-data-row:nth-child(odd) {background : #CCC}\r\n\r\n</style>","<template>\r\n<div :class=\"Class.getClass('ptj-repo') + ' ' + store.classes\">\r\n    <ptj-repo-header  />\r\n    <component :key=\"store.key\" :is=\"store.rawcomponent\" />\r\n</div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport PTJRepoHeader from \"./ptj-repo-header.vue\"\r\nimport PTJTree from \"./ptj-tree.vue\"\r\nimport PTJTable from \"./ptj-table.vue\"\r\nimport PTJList from \"./ptj-list.vue\"\r\nimport { defineComponent} from \"vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-repo',\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n    components : {\r\n        \"ptj-repo-header\" : PTJRepoHeader,\r\n        \"ptj-tree\" : PTJTree,\r\n        \"ptj-table\" : PTJTable,\r\n        \"ptj-list\" : PTJList\r\n    }\r\n});\r\n</script>\r\n\r\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\r\n<style scoped>\r\n\r\n.table, .thead, .tbody, .tr {\r\n    width : 100%;\r\n}\r\n\r\n\r\n\r\n.ptj-data-row:nth-child(odd) {background : #CCC}\r\n\r\n</style>","<template>\r\n    <div :class=\"Class.getClass('ptj-single-item') + ' ' + store.classes\">\r\n        <h1>{{ store.title }}</h1>\r\n        <ptj-nav :actions=\"store.actions\" :class=\"Class.getClass('ptj-single-item-actions')\" />\r\n        <div v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"Class.getClass('ptj-single-item-row') + ' ' + field.name\">\r\n            <span :class=\"Class.getClass('ptj-single-item-label')\">{{ field.label }}</span>&nbsp;<span :class=\"Class.getClass('ptj-single-item-value')\">{{ field.val }}</span>\r\n        </div>\r\n    </div>\r\n    <ptj-nav :actions=\"store.children\" :class=\"Class.getClass('ptj-single-item-children')\" />\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-single-item',\r\n  props : {\r\n      active : {\r\n          type : Boolean,\r\n          default : false\r\n      }\r\n  },\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  computed : {\r\n      editnav() {\r\n          return this.store.actions.put;\r\n      },\r\n      delnav() {\r\n          return this.store.actions.delete;\r\n      },\r\n      title() {\r\n          return this.store.title + \" \" + this.store.summary();\r\n      }\r\n  },\r\n  methods : {\r\n      runDel() {\r\n          this.store.runDelete();\r\n      }\r\n  },\r\n  components : {\r\n    \"ptj-nav\" : GCNav, \"ptj-widget\" : GCWidget\r\n  }\r\n});\r\n    \r\n\r\n</script>","<template>\r\n    <div :class=\"Class.getClass('ptj-single-item') + ' ' + store.classes\">\r\n        <h1>{{ store.title }}</h1>\r\n        <ptj-nav :actions=\"store.actions\" :class=\"Class.getClass('ptj-single-item-actions')\" />\r\n        <div v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"Class.getClass('ptj-single-item-row') + ' ' + field.name\">\r\n            <span :class=\"Class.getClass('ptj-single-item-label')\">{{ field.label }}</span>&nbsp;<span :class=\"Class.getClass('ptj-single-item-value')\">{{ field.val }}</span>\r\n        </div>\r\n    </div>\r\n    <ptj-nav :actions=\"store.children\" :class=\"Class.getClass('ptj-single-item-children')\" />\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-single-item',\r\n  props : {\r\n      active : {\r\n          type : Boolean,\r\n          default : false\r\n      }\r\n  },\r\n  setup() {\r\n      return { store : Ctrl.getStore(), Class }\r\n  },\r\n  computed : {\r\n      editnav() {\r\n          return this.store.actions.put;\r\n      },\r\n      delnav() {\r\n          return this.store.actions.delete;\r\n      },\r\n      title() {\r\n          return this.store.title + \" \" + this.store.summary();\r\n      }\r\n  },\r\n  methods : {\r\n      runDel() {\r\n          this.store.runDelete();\r\n      }\r\n  },\r\n  components : {\r\n    \"ptj-nav\" : GCNav, \"ptj-widget\" : GCWidget\r\n  }\r\n});\r\n    \r\n\r\n</script>","<template>\r\n <div :class=\"Class.getClass('ptj-accounthandler')\">\r\n    <h1>{{ store.title }}</h1>\r\n    <ptj-form />\r\n    <ptj-nav :action=\"store.actions\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCForm from \"./ptj-form.vue\"\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"./../js/classinjection.js\"\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-login',\r\n  setup() {\r\n      let store = Ctrl.getStore()\r\n      store.next = () => {\r\n           Ctrl.reloadFromBase();\r\n      }\r\n      return { store : store, Class }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-form\" : GCForm, \"ptj-nav\" : GCNav\r\n    }\r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n <div :class=\"Class.getClass('ptj-accounthandler')\">\r\n    <h1>{{ store.title }}</h1>\r\n    <ptj-form />\r\n    <ptj-nav :action=\"store.actions\" />\r\n </div>\r\n</template>\r\n\r\n<script>\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCForm from \"./ptj-form.vue\"\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"./../js/classinjection.js\"\r\n\r\n \r\nexport default defineComponent({\r\n  name: 'ptj-login',\r\n  setup() {\r\n      let store = Ctrl.getStore()\r\n      store.next = () => {\r\n           Ctrl.reloadFromBase();\r\n      }\r\n      return { store : store, Class }\r\n  },\r\n  components : \r\n    {\r\n      \"ptj-form\" : GCForm, \"ptj-nav\" : GCNav\r\n    }\r\n});\r\n</script>\r\n\r\n\r\n","<template>\r\n    <ptj-widget :title=\"title\" :active=\"active\">\r\n        <div :class=\"classes\">\r\n            <a @click=\"next\"><span class=\"material-icons\">view_carousel</span></a>\r\n            <div v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"rowclass + ' ' + field.name\">\r\n                <span :class=\"labelclass\">{{ field.label }}</span>&nbsp;<span :class=\"rowclass\">{{ field.val }}</span>\r\n            </div>\r\n        </div>\r\n    </ptj-widget>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-card',\r\n  props : {\r\n      store : Object,\r\n      active : {\r\n          type : Boolean,\r\n          default : false\r\n      }\r\n  },\r\n  methods : {\r\n      next() {\r\n          this.store.next();\r\n          Ctrl.buildLink();\r\n      }\r\n  },\r\n  computed : {\r\n      title() {\r\n          return this.store.title;\r\n      },\r\n      classes() {\r\n          return Class.getClass(\"ptj-card\")  + \" \" + this.store.classes;\r\n      },\r\n      rowclass() {\r\n          return Class.getClass(\"ptj-card-row\");\r\n      },\r\n      labelclass() {\r\n          return Class.getClass(\"ptj-card-label\");\r\n      },\r\n      valueclass() {\r\n          return Class.getClass(\"ptj-card-value\");\r\n      }\r\n  },\r\n  components : {\r\n    \"ptj-widget\" : GCWidget\r\n  }\r\n});\r\n    \r\n\r\n</script>","<template>\r\n    <ptj-widget :title=\"title\" :active=\"active\">\r\n        <div :class=\"classes\">\r\n            <a @click=\"next\"><span class=\"material-icons\">view_carousel</span></a>\r\n            <div v-for=\"(field, index) in store.fields\" :key=\"index\" :class=\"rowclass + ' ' + field.name\">\r\n                <span :class=\"labelclass\">{{ field.label }}</span>&nbsp;<span :class=\"rowclass\">{{ field.val }}</span>\r\n            </div>\r\n        </div>\r\n    </ptj-widget>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent  } from 'vue'\r\nimport GCWidget from \"./ptj-widget-window.vue\"\r\nimport Class from \"../js/classinjection.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\n\r\nexport default defineComponent({\r\n  name: 'ptj-card',\r\n  props : {\r\n      store : Object,\r\n      active : {\r\n          type : Boolean,\r\n          default : false\r\n      }\r\n  },\r\n  methods : {\r\n      next() {\r\n          this.store.next();\r\n          Ctrl.buildLink();\r\n      }\r\n  },\r\n  computed : {\r\n      title() {\r\n          return this.store.title;\r\n      },\r\n      classes() {\r\n          return Class.getClass(\"ptj-card\")  + \" \" + this.store.classes;\r\n      },\r\n      rowclass() {\r\n          return Class.getClass(\"ptj-card-row\");\r\n      },\r\n      labelclass() {\r\n          return Class.getClass(\"ptj-card-label\");\r\n      },\r\n      valueclass() {\r\n          return Class.getClass(\"ptj-card-value\");\r\n      }\r\n  },\r\n  components : {\r\n    \"ptj-widget\" : GCWidget\r\n  }\r\n});\r\n    \r\n\r\n</script>","<template>\r\n    <div :class=\"Class.getClass('ptj-tabs')\">\r\n        <div :class=\"Class.getClass('ptj-tabs-card')\" v-for=\"parent in parents\" :key=\"parent.name + '-parent'\">\r\n            <ptj-card :store=\"parent.store\" />\r\n        </div>\r\n      \r\n        <div :class=\"Class.getClass('ptj-tabs-tab')\" >\r\n            <component :key=\"store.index\" :is=\"store.component\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport GCForm from \"./ptj-form.vue\"\r\nimport GCRepo from \"./ptj-repo.vue\"\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCSingleItem from \"./ptj-single-item.vue\"\r\nimport GCAccountHandler from \"./ptj-accounthandler.vue\"\r\nimport GCCard from \"./ptj-card.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        index: {\r\n            type : Boolean,\r\n        }\r\n    },\r\n    setup(props) {\r\n        if (props.index) Ctrl.next();\r\n        return { store : Ctrl.getStore(), Class }\r\n    },\r\n    computed : {\r\n        parents() {\r\n            return this.store.parent_models.slice().reverse();\r\n        }\r\n    },\r\n    components : {\r\n        'ptj-form' : GCForm,\r\n        'ptj-nav' : GCNav,\r\n        'ptj-single-item' : GCSingleItem,\r\n        'ptj-account-handler' : GCAccountHandler,\r\n        'ptj-repo' : GCRepo,\r\n        'ptj-card' : GCCard\r\n    }\r\n\r\n});\r\n</script>","<template>\r\n    <div :class=\"Class.getClass('ptj-tabs')\">\r\n        <div :class=\"Class.getClass('ptj-tabs-card')\" v-for=\"parent in parents\" :key=\"parent.name + '-parent'\">\r\n            <ptj-card :store=\"parent.store\" />\r\n        </div>\r\n      \r\n        <div :class=\"Class.getClass('ptj-tabs-tab')\" >\r\n            <component :key=\"store.index\" :is=\"store.component\" />\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\n\r\nimport GCForm from \"./ptj-form.vue\"\r\nimport GCRepo from \"./ptj-repo.vue\"\r\nimport GCNav from \"./ptj-nav.vue\"\r\nimport GCSingleItem from \"./ptj-single-item.vue\"\r\nimport GCAccountHandler from \"./ptj-accounthandler.vue\"\r\nimport GCCard from \"./ptj-card.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nimport { defineComponent } from 'vue'\r\n\r\nexport default defineComponent({\r\n    props : {\r\n        index: {\r\n            type : Boolean,\r\n        }\r\n    },\r\n    setup(props) {\r\n        if (props.index) Ctrl.next();\r\n        return { store : Ctrl.getStore(), Class }\r\n    },\r\n    computed : {\r\n        parents() {\r\n            return this.store.parent_models.slice().reverse();\r\n        }\r\n    },\r\n    components : {\r\n        'ptj-form' : GCForm,\r\n        'ptj-nav' : GCNav,\r\n        'ptj-single-item' : GCSingleItem,\r\n        'ptj-account-handler' : GCAccountHandler,\r\n        'ptj-repo' : GCRepo,\r\n        'ptj-card' : GCCard\r\n    }\r\n\r\n});\r\n</script>","<template>\r\n    <Teleport to=\"#ptj-accountdetails\">\r\n    <a :class=\"Class.getClass('ptj-account-details-logout')\" @click=\"logout\">Logout</a>\r\n    </Teleport>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Client from \"./../js/client.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"./../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    setup() {\r\n        return { Class }\r\n    },\r\n    methods : {\r\n        logout() {\r\n            Client.post(\"/core-logout\")\r\n            .then(() => {\r\n                Ctrl.reloadFromBase();\r\n            });\r\n        }\r\n    }\r\n})\r\n</script>\r\n","<template>\r\n    <Teleport to=\"#ptj-accountdetails\">\r\n    <a :class=\"Class.getClass('ptj-account-details-logout')\" @click=\"logout\">Logout</a>\r\n    </Teleport>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport Client from \"./../js/client.js\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"./../js/classinjection.js\"\r\n\r\nexport default defineComponent({\r\n    setup() {\r\n        return { Class }\r\n    },\r\n    methods : {\r\n        logout() {\r\n            Client.post(\"/core-logout\")\r\n            .then(() => {\r\n                Ctrl.reloadFromBase();\r\n            });\r\n        }\r\n    }\r\n})\r\n</script>\r\n","<template>\r\n  <ptj-account-details v-if=\"isaccount\" />\r\n  <div :class=\"Class.getClass('ptj-root')\" v-for=\"group in groups\" :key=\"group.index\">\r\n    <ptj-tabs  :index=\"true\"  />\r\n </div>\r\n</template>\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCTabs from \"./ptj-tabs.vue\"\r\nimport GCAccountDetails from \"./ptj-account-details.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    name : 'ptj-root',\r\n    setup() {\r\n        return { Class }\r\n    },\r\n    computed : {\r\n        groups() {\r\n            return Ctrl.store.models;\r\n        },\r\n        isaccount() {\r\n            return Ctrl.store.profile == \"public\" ? false : true;\r\n        }\r\n    },\r\n    components : {\r\n        'ptj-tabs' : GCTabs, \"ptj-account-details\" : GCAccountDetails\r\n\r\n    }\r\n});\r\n</script>","<template>\r\n  <ptj-account-details v-if=\"isaccount\" />\r\n  <div :class=\"Class.getClass('ptj-root')\" v-for=\"group in groups\" :key=\"group.index\">\r\n    <ptj-tabs  :index=\"true\"  />\r\n </div>\r\n</template>\r\n<script>\r\n\r\nimport { defineComponent } from 'vue'\r\nimport GCTabs from \"./ptj-tabs.vue\"\r\nimport GCAccountDetails from \"./ptj-account-details.vue\"\r\nimport Ctrl from \"../js/controller.js\"\r\nimport Class from \"../js/classinjection.js\"\r\n\r\n\r\nexport default defineComponent({\r\n    name : 'ptj-root',\r\n    setup() {\r\n        return { Class }\r\n    },\r\n    computed : {\r\n        groups() {\r\n            return Ctrl.store.models;\r\n        },\r\n        isaccount() {\r\n            return Ctrl.store.profile == \"public\" ? false : true;\r\n        }\r\n    },\r\n    components : {\r\n        'ptj-tabs' : GCTabs, \"ptj-account-details\" : GCAccountDetails\r\n\r\n    }\r\n});\r\n</script>","import Ctrl from \"./presstojam/src/js/controller.js\"\r\nimport PTJRoot from \"./presstojam/src/components/ptj-root.vue\"\r\nimport { createApp } from \"vue\"\r\n\r\nfunction runApp(mount) {\r\n    const app = createApp(PTJRoot);\r\n    app.mount(mount);\r\n    return app;\r\n}\r\n\r\nexport default { \r\n    Ctrl, runApp\r\n}\r\n\r\n\r\n"],"names":["main_url","last_status","last_ok","custom_headers","status_handlers","debug","regCustomHeader","name","value","regStatusHandler","status","handler","setURL","url","regDebug","is_debug","run","headers","mode","cache","credentials","fetch","then","response","ok","json","val","omethod","method","Error","catch","err","console","log","setDebug","data","get","this","params","URLSearchParams","graph","i","Array","isArray","append","JSON","stringify","indexOf","toString","getprimary","post","body","put","patch","delete","Validator","constructor","_min","_max","_has","_has_not","_errors","min","max","has","push","nothas","nhas","validateSize","MIN_VALUE","MAX_VALUE","OK","validate","isNaN","length","match","HAS_NOT","HAS","error_invalid_map","getError","code","Field","obj","_name","_type","_is_primary","_is_parent","_valid","_atts","_confirm","_readonly","_placeholder","_conditions","_link","_reference","_error","_label","_on","ref","_summary","_default","_validator","_value","_multiple","_is_validate_on","_options","reactive","_asset","_display_value","computed","set","on","x","field","validation","confirm","readonly","placeholder","atts","default","def","asset","conditions","display_value","link","type","multiple","mult","is_primary","is_parent","reference","error","label","summary","validateon","options","isprimary","required","isparent","Errors","showError","saveAsset","id","saveFile","Promise","resolve","setOptions","Client","__data","key","e","opt","clean","Boolean","exp","calcValue","Asset","_size","_blob","_uploaded","_chunk_size","_url","_key","_key_field","chunk_size","chunk","blob","keyfield","size","uploaded","getChunk","index","start","end","view","DataView","buffer","n","byteLength","getInt8","join","loadFile","alert","delFile","file","reject","fr","FileReader","_self","onload","target","result","onerror","readAsArrayBuffer","promises","chunks","Math","ceil","__chunk","__blob","all","Model","_active_children","_active_state","_change_intention","_children","_circular","_default_state","_key_states","parent_key","primary_key","_parent_key","_primary_key","_settings","_states","_main_model","_to","store","fields","parent_models","title","component","rawcomponent","actions","next","primarykeyname","parentkeyname","circular","model","siblings","children","stage","groups","classes","currentstate","_siblings","state","settings","applySettings","loadState","main_model","to","change_intention","intention","injectCustomSettings","snakeCase","replace","loadurl","saveurl","__to","_state","parentkey","primarykey","map","getSummary","row","sum","tb","disable_filter","disable_selectfields","buildIntention","setting","mapResponse","child","r","sibling","states","default_state","par","pmodel","load","client","__status","mapRepoData","parent","mapData","keymanager","rLoadObj","indexData","indexes","group","ckey","display","contains","buildlink","action","submiturl","addKeys","resolveKeys","reload","active_repo","async","login","encodeParams","cstr","encodeURIComponent","Object","keys","decodeParams","window","location","search","param_obj","forEach","graph_obj","parse","decodeURIComponent","mapParams","regex","RegExp","action_map","CtrlGroupMap","_model","swap","convertToURL","convertFromURL","parts","split","parseInt","pop","maps","trigger_cb","route_base","createMap","trigger","trig","resetMaps","str_parts","param_str","Params","setBase","base","getMaps","cb","runRoute","uri","pathname","onpopstate","document","setRoute","history","pushState","hardSetRoute","route","regCallback","callback","_store","profile","_models","_seeker","buildModel","model_name","Map","models","splice","promise","Router","setSettings","mapper","initProfile","__profile","assumeRole","role","request","removeRole","buildLink","omaps","changes","change","ni","unshift","omap","cmap","runLink","runData","reloadFromBase","getStore","classes_dict","regClass","getClass","defineComponent","props","String","setup","Class","styleInject","css","insertAt","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","_createElementBlock","class","_ctx","components","GCError","_createElementVNode","onBlur","_createVNode","cval","isvalidateon","setValidateOn","_hoisted_2","option","methods","html","setFile","files","onChange","total","Number","progress","num","floor","fstate","globalerror","Ctrl","clearErrors","num_chunks","submit","message","statusText","GCInput","GCConfirm","GCSelect","GCRadio","GCCheckbox","GCTextarea","GCAssetField","GCProgressBar","onSubmit","_createBlock","stores","_createCommentVNode","onClick","val1","val2","active","show","toggleWidget","_hoisted_3","_renderSlot","GCFormSelect","GCFilterFormTime","GCFilterFormCheckbox","GCWidget","max_page_limit","pages","current_group","firstindex","max_options","maxoptions","showPages","Controller","current_route","query","GCNav","GCFilterForm","GCPagination","GCSelectFields","branch","draggable","ischild","toggle_state","toggle","setDraggable","closest","setAttribute","endDraggable","selectRow","getRowClass","str","sortable","arr","activechildren","concat","stop","onMousedown","onMouseup","cindex","GCDragNDrop","_handle","handle","_drop_target","drop_target","_drag_target","drag_target","_call_back","_x","_y","_offset_x","_offset_y","_judder","judder","_drag_node","_drop_node","_tree","tree","isJudder","y","dx","dy","getDirection","offset","elem","rect","getBoundingClientRect","win","ownerDocument","defaultView","top","pageYOffset","left","pageXOffset","insertAfter","drag_id","getAttribute","drop_id","sort","nextElementSibling","node","dragStart","ev","targ","dataTransfer","dropEffect","clientX","clientY","isDroppable","dragEnter","preventDefault","dir","dragOver","dragEnd","drop","initDD","drag","querySelectorAll","el","addAttribute","addEventListener","main","treeroot","onMounted","GCDragDrop","saveSort","GCTreeNode","orderBy","cell","order","orderby","xval","yval","overlimit","rowclass","rindex","getCombinations","tag","combos","ncombos","d","tags","c","filter","includes","getIndexCombinations","combinations","_Fragment","PTJRepoHeader","PTJTree","PTJTable","PTJList","editnav","delnav","runDel","runDelete","GCForm","labelclass","valueclass","parents","slice","reverse","GCSingleItem","GCAccountHandler","GCRepo","GCCard","logout","isaccount","GCTabs","GCAccountDetails","runApp","mount","app","createApp","PTJRoot"],"mappings":"yFAAA,IACIA,EAGAC,EACAC,EALAC,EAAkB,GAElBC,EAAkB,GAClBC,GAAQ,EAIZ,MAAe,CAEXC,gBAAgBC,EAAMC,GAClBL,EAAeI,GAAQC,GAG3BC,iBAAiBC,EAAQC,GACrBP,EAAgBM,GAAUC,GAG9BC,OAAOC,GACHb,EAAWa,GAEfC,SAASC,GACLV,EAAQU,GAGZC,IAAG,CAACH,EAAKI,KAELA,EAAQC,KAAO,OACfD,EAAQE,MAAQ,WAChBF,EAAQG,YAAc,UACtBH,EAAQ,gBAAkB,mBAC1BA,EAAQA,QAAUd,EAIXkB,MAAMrB,EAAWa,EAAKI,GAC5BK,MAAKC,OACFtB,EAAcsB,EAASb,OACvBR,EAAUqB,EAASC,IACfpB,EAAgBmB,EAASb,QAEtB,OAAuB,KAAnBa,EAASb,OACTa,EAASb,OAETa,EAASE,OAJhBrB,EAAgBmB,EAASb,QAAQa,MAOxCD,MAAKI,QACGxB,EAAS,MAAMwB,KAED,KAAfzB,EAAoB,KAChB0B,EAAUV,EAAQW,cACtBX,EAAQW,OAAS,MACVP,MAAMrB,EAAW,sBAAuBiB,GAC9CK,MAAKC,OACEA,EAASC,UACTP,EAAQW,OAASD,EACVN,MAAMrB,EAAWa,EAAKI,GAC5BK,MAAKC,OACqB,KAAnBA,EAASb,aACH,IAAImB,MAAM,4BACb,GAAIN,EAASC,UACTD,EAASE,aAW7B,OAAOC,KAEjBI,OAAMC,UACC1B,GAAO2B,QAAQC,IAAIF,GACjBA,MAGdG,SAASC,IACAA,EAGDA,EAAI,SAAc,EAFlBA,EAAO,UAAa,GAIjBA,GAEXC,IAAIvB,EAAKsB,MACD9B,IAAO8B,EAAOE,KAAKH,SAASC,IAC5BA,EAAM,OACAG,EAAS,IAAIC,oBACfC,EAAQ,OACR,IAAIC,KAAKN,EACLO,MAAMC,QAAQR,EAAKM,KAA0B,iBAAXN,EAAKM,IAA8B,OAAZN,EAAKM,GAAcD,EAAMC,GAAKN,EAAKM,GAC3FH,EAAOM,OAAOH,EAAGN,EAAKM,IAG3BD,GACAF,EAAOM,OAAO,QAASC,KAAKC,UAAUN,KAEjB,GAArB3B,EAAIkC,QAAQ,KAAYlC,GAAO,IAC9BA,GAAO,IACZA,GAAOyB,EAAOU,eAEd/B,EAAU,CACdA,OAAiB,cACToB,KAAKrB,IAAIH,EAAKI,IAG1BgC,WAAWpC,EAAKsB,UACLE,KAAKD,IAAIvB,EAAKsB,IAGzBe,KAAKrC,EAAKsB,GAEF9B,IAAO8B,EAAOE,KAAKH,SAASC,QAC5BlB,EAAU,CACdA,OAAiB,eACjBA,EAAQkC,KAAON,KAAKC,UAAUX,GACvBE,KAAKrB,IAAIH,EAAKI,IAGzBmC,IAAIvC,EAAKsB,GACD9B,IAAO8B,EAAOE,KAAKH,SAASC,QAC5BlB,EAAU,CACdA,OAAiB,cACjBA,EAAQkC,KAAON,KAAKC,UAAUX,GACvBE,KAAKrB,IAAIH,EAAKI,IAGzBoC,MAAMxC,EAAKsB,GACH9B,IAAO8B,EAAOE,KAAKH,SAASC,QAC5BlB,EAAU,CACdA,OAAiB,gBACjBA,EAAQkC,KAAON,KAAKC,UAAUX,GACvBE,KAAKrB,IAAIH,EAAKI,IAGzBqC,OAAOzC,EAAKsB,GACJ9B,IAAO8B,EAAOE,KAAKH,SAASC,QAC5BlB,EAAU,CACdA,OAAiB,iBACjBA,EAAQkC,KAAON,KAAKC,UAAUX,GACvBE,KAAKrB,IAAIH,EAAKI,KC/ItB,MAAMsC,EAETC,mBACSC,UACAC,UACAC,KAAO,QACPC,SAAW,QACXC,QAAU,IACJ,YACO,YACA,MACN,UACI,GAIhBC,QAAIA,QACCL,KAAOK,EAGZC,QAAIA,QACCL,KAAOK,EAGZC,QAAIA,QACCL,KAAKM,KAAKD,GAGfE,WAAOC,QACFP,SAASK,KAAKE,GAIvBC,aAAa1C,UACLA,EAAMW,KAAKoB,KAAapB,KAAKwB,QAAQQ,UAChC3C,EAAMW,KAAKqB,KAAarB,KAAKwB,QAAQS,UAClCjC,KAAKwB,QAAQU,GAI7BC,SAAS9C,OACDK,KACA0C,MAAM/C,GAAM,OACNgD,EAAUhD,EAAOA,EAAIgD,OAAS,EACpC3C,EAAMM,KAAK+B,aAAaM,QAExB3C,EAAMM,KAAK+B,aAAa1C,MAExBK,GAAOM,KAAKwB,QAAQU,GAAI,OAAOxC,MAE/B,IAAIoC,KAAQ9B,KAAKuB,YACblC,EAAIiD,MAAMR,GAAO,OAAO9B,KAAKwB,QAAQe,WAGrB,GAApBvC,KAAKsB,KAAKe,OAAa,OAAOrC,KAAKwB,QAAQU,OAE3C,IAAIP,KAAO3B,KAAKsB,QACZjC,EAAIiD,MAAMtC,KAAKsB,MAAO,OAAOtB,KAAKwB,QAAQU,UAE3ClC,KAAKwB,QAAQgB,KC3D5B,MAAMC,EAAoB,GACV,cACA,cACA,kCACA,wCACA,cAOhB,MAAe,CACXC,SALJ,SAAkBC,UACPF,EAAkBE,KCJtB,MAAMC,EAETzB,YAAYjD,EAAM2E,EAAM,cACfC,MAAQ5E,OACR6E,WACAC,aAAc,OACdC,YAAa,OACbC,OAAS,OACTC,MAAM,QACNC,UAAW,OACXC,WAAY,OACZC,aAAe,QACfC,iBACAC,WACAC,gBACAC,OAAS,OACTC,OAAS,QACTC,IAAMC,OAAI,QACVC,UAAW,OACXC,SAAW,UACXC,WAAa,IAAI9C,OACjB+C,OAASJ,MAAI,WACbK,eACAC,iBAAkB,OAClBC,SAAWC,WAAS,SACpBC,OAAS,UACTC,oBAEAlF,IAAMmF,WAAS,CAChBzE,IAAM,IACKC,KAAKiE,OAAO9F,MAEvBsG,IAAOpF,SACE4E,OAAO9F,MAAuB,YAAd6B,KAAK+C,MAAwB1D,EAAO,EAAI,EAAIA,OAC5DqE,OAAS1D,KAAKmC,SAAS9C,WAI/BqF,GAAKF,WAAS,CACfzE,IAAM,IACKC,KAAK4D,IAAIzF,MAEpBsG,IAAOpF,SACEuE,IAAIzF,MAAQkB,KAKrBwD,EAAK,KACA,IAAI8B,KAAK9B,EACD,SAAL8B,GAAqB,aAALA,SACfA,GAAK9B,EAAI8B,OAGd9B,EAAI+B,UACA,IAAID,KAAK9B,EAAI+B,WACRD,GAAK9B,EAAI+B,MAAMD,MAIxB9B,EAAIgC,eACA,IAAIF,KAAK9B,EAAIgC,gBACRb,WAAWW,GAAK9B,EAAIgC,WAAWF,IAMhDG,YAAQA,QACH1B,SAAW0B,EAGhBC,aAASA,QACJ1B,UAAY0B,EAGjBC,gBAAYA,QACP1B,aAAe0B,EAGpBC,SAAKA,QACA9B,MAAQ8B,EAGbC,YAAQC,QACHpB,SAAWoB,EAGhBC,UAAMA,QACDd,OAASc,EAIdC,eAAWA,QACN9B,YAAc8B,EAGnBC,kBAAcnH,QACToG,eAAiBpG,EAGtBoH,SAAKA,QACA/B,MAAQ+B,EAGbrH,SAAKA,QACA4E,MAAQ5E,EAGbsH,SAAKA,QACAzC,MAAQyC,EAGbC,aAASC,QACJxB,UAAYwB,EAGjBC,eAAWtG,QACN2D,YAAc3D,EAGnBuG,cAAUvG,QACL4D,WAAa5D,EAGlBwG,cAAUhC,QACLJ,WAAaI,EAGlBiC,UAAMpG,QACDgE,OAAShE,EAGdqG,UAAMA,QACDpC,OAASoC,EAGdC,YAAQA,QACHlC,SAAWkC,EAGhBC,eAAWvB,QACNP,gBAAkBO,EAIvBxG,kBACO8B,KAAK8C,MAGZ0C,kBACOxF,KAAK+C,MAGZmD,qBACOlG,KAAKoE,SAGZ+B,uBACOnG,KAAKgD,YAGZoD,sBACQpG,KAAKoB,KAAO,EAGpB4E,qBACOhG,KAAK8D,SAGZwB,2BACQtF,KAAKuE,eAAkBvE,KAAKuE,eAAiBvE,KAAKX,IAG1D0F,sBACO/E,KAAKqD,UAGZ2B,yBACOhF,KAAKsD,aAGZ4B,qBACOlF,KAAK+D,SAGZkB,kBACOjF,KAAKmD,MAGZkC,wBACOrF,KAAKuD,YAGZgC,kBACOvF,KAAKwD,MAGZ6C,sBACOrG,KAAKiD,WAGZwC,sBACOzF,KAAKkE,UAGZY,qBACO9E,KAAKoD,SAGZyC,uBACO7F,KAAKyD,WAGZqC,mBACK9F,KAAK0D,OACDtB,MAAMpC,KAAK0D,QAAgB1D,KAAK0D,OAC7B4C,EAAO5D,SAAS1C,KAAK0D,QAFR,GAKzB6C,yBACQvG,KAAKmE,kBAAmBnE,KAAK0D,QAGrCqC,mBACO/F,KAAK2D,OAIhB6C,UAAUC,MACFzG,KAAKsE,OAAQ,IACFtE,KAAKX,IACN,OAAOW,KAAKsE,OAAOoC,SAAS1G,KAAKX,IAAKoH,UAE7CE,QAAQC,UAInBC,WAAW5G,WACFmE,SAAS/B,OAAS,EACnBrC,KAAKyD,WACLqD,EAAO/G,IAAIC,KAAKyD,WAAYxD,GACvBhB,MAAKC,QACG,IAAIkB,KAAKlB,EAAS6H,OACK,IAApB3G,EAAEM,QAAQ,YACT0D,SAASxC,KAAK,CAAEoF,IAAK9H,EAAS6H,OAAO3G,GAAGqG,GAAItI,MAAOe,EAAS6H,OAAO3G,GAAGjC,WAGlFsB,OAAMwH,IACHtH,QAAQC,IAAIqH,mBAIX,IAAIC,KAAOlH,KAAKmD,MAAM+C,aAClB9B,SAASxC,KAAK,CAAEoF,IAAKE,EAAK/I,MAAO+I,IAE5C,MAAOD,GACLtH,QAAQC,IAAI,uBAAwBI,KAAK8C,QAKrDqE,MAAM9H,SACoB,YAAdW,KAAK+C,MAAuBqE,QAAQ/H,GAAOA,EAGvD8C,SAAShE,UACE6B,KAAKgE,WAAW7B,SAAShE,GAGpCkJ,YACW,CACHnJ,KAAO8B,KAAK8C,MACZ0C,KAAOxF,KAAK+C,MACZkC,KAAOjF,KAAKmD,OAIpBmE,UAAUnJ,UACDA,GAAc,ICzRpB,MAAMoJ,EAETpG,mBACOqG,MAAQ,OACRC,MAAQ,UACRC,WAAY,OACZC,YAAc,OACdC,UACAC,KAAO,OACPC,WAGHC,eAAWC,QACRL,YAAcK,EAGjBC,SAAKA,QACFR,MAAQQ,EAGXzJ,QAAIA,QACCoJ,KAAOpJ,EAGZwI,QAAIA,QACCa,KAAOb,EAGZkB,aAAStD,QACJkD,WAAalD,EAGlBqD,kBACKjI,KAAKyH,MAGVU,kBACKnI,KAAKwH,MAGVY,sBACKpI,KAAK0H,UAGVK,wBACK/H,KAAK2H,YAIVnJ,iBACOwB,KAAK4H,KAIhBS,SAASC,SACDC,EAA6B,GAApBvI,KAAK2H,YAAoB,EAAIW,EAAQtI,KAAK2H,gBACrDa,EAA2B,GAApBxI,KAAK2H,YAAoB3H,KAAKwH,OAASc,EAAQ,GAAKtI,KAAK2H,YAChEa,EAAMxI,KAAKwH,QAAOgB,EAAMxI,KAAKwH,aAC3BiB,EAAO,IAAIC,SAAS1I,KAAKyH,MAAOc,EAAOC,EAAMD,OAC/CI,EAAS,OACT,IAAIvI,EAAI,EAAGwI,EAAEH,EAAKI,WAAYzI,EAAEwI,IAAKxI,EACvCuI,EAAO/G,KAAK6G,EAAKK,QAAQ1I,WAEpBuI,EAAOI,KAAK,IAIrBC,SAASvC,OACD3G,EAAO,UACXA,EAAKE,KAAK8H,YAAcrB,EACjBK,EAAO/G,IAAIC,KAAK4H,KAAM9H,GAC5BL,OAAMwH,IACHgC,MAAMhC,MAIdiC,QAAQzC,OACA3G,EAAO,UACXA,EAAKE,KAAK8H,YAAcrB,EACjBK,EAAO7F,OAAOjB,KAAK4H,KAAM9H,GAC/BL,OAAMwH,IACHgC,MAAMhC,MAIdP,SAASyC,EAAM1C,eAENe,MAAQ2B,EAAKhB,KACX,IAAIxB,SAAQ,CAAEC,EAASwC,WACtBC,EAAK,IAAIC,eACXC,EAAQvJ,KACZqJ,EAAGG,OAAS,SAASvC,GACnBsC,EAAMtB,KAAOhB,EAAEwC,OAAOC,OACtB9C,EAAQyC,EAAGK,SAEbL,EAAGM,QAAUP,EACbC,EAAGO,kBAAkBT,MAEtBlK,MAAK,SACA4K,EAAW,GAEXC,EAA6B,GAAnB9J,KAAK+H,WAAmB,EAAIgC,KAAKC,KAAKhK,KAAKmI,KAAOnI,KAAK+H,gBACjE,IAAI3H,EAAE,EAAGA,EAAE0J,IAAU1J,EAAG,OAClBN,EAAO,GACbA,EAAKmK,QAAU7J,EACfN,EAAKoK,OAASlK,KAAKqI,SAASjI,GAC5BN,EAAK2G,GAAKA,EACVoD,EAASjI,KAAKkF,EAAO/F,IAAIf,KAAK4H,KAAM9H,WAEjC6G,QAAQwD,IAAIN,OC1GtB,MAAMO,EACTjJ,mBACSkJ,iBAAmB,QACnBC,mBACAC,uBACAC,UAAY,QACZC,eACAC,oBACAC,YAAc,CAAEC,WAAa,KAAMC,YAAc,WACjD/H,WACAgI,iBACAC,kBACAC,UAAY,QACZC,QAAU,QACVC,iBACAC,SAEAC,MAAQ/G,WAAS,CAClBgH,OAAS,GACTC,cAAgB,GAChBvF,MAAQ,GACRwF,MAAQ,GACRzL,KAAO,GACP0L,UAAY,GACZC,aAAe,GACfC,QAAU,GACVC,KAAO,KACPrD,MAAQ,GACRsD,eAAiB,GACjBC,cAAgB,GAChBC,SAAW,GACXC,MAAS/L,KAAK8C,MACdkJ,SAAW,GACXC,SAAW,GACXC,MAAQ,EACRC,OAAS,GACTC,QAAU,KAIdlO,kBACO8B,KAAK8C,MAGZuJ,0BACQrM,KAAKsK,cAAiBtK,KAAKsK,cAAgBtK,KAAK0K,eAIxDuB,sBACOjM,KAAKwK,UAGZwB,sBACIhM,KAAKsM,UAAUjK,OAAS,EAAUrC,KAAKsM,UAC/B,GAGZC,UAAMA,QACDjC,cAAiBiC,GAAiBvM,KAAK0K,oBACvCH,kBAAoB,KACrBvK,KAAKgL,UAAUhL,KAAKsK,iBAAgBtK,KAAKoL,MAAMoB,SAAWxM,KAAKgL,UAAUhL,KAAKsK,qBAC7EmC,qBACAC,YAGLP,WAAOA,QACFf,MAAMe,OAASA,EAGpBQ,wBACO3M,KAAKkL,YAGZyB,eAAWZ,QACNb,YAAca,EAGnB/E,gBAC0B,QAAtBhH,KAAKsK,eAAiD,OAAtBtK,KAAKsK,cAC9BtK,KAAK2K,YAAYC,WAEjB5K,KAAK2K,YAAYE,YAI5B+B,OAAGA,QACEzB,IAAMyB,EAGX5F,QAAIA,MACsB,OAAtBhH,KAAKsK,eAAgD,QAAtBtK,KAAKsK,mBAC/BK,YAAYC,WAAa5D,OAEzB2D,YAAYE,YAAc7D,EAGT,QAAtBhH,KAAKsK,eAAiD,OAAtBtK,KAAKsK,kBACjC,IAAIpM,KAAQ8B,KAAKoL,MAAMC,OACnBrL,KAAKoL,MAAMC,OAAOnN,GAAMwG,IAAsC,UAAhC1E,KAAKoL,MAAMC,OAAOnN,GAAMsH,WACjD4F,MAAMC,OAAOnN,GAAM2I,WAAW7G,KAAKC,QAMpDiM,UAAMA,QACDd,MAAMc,MAAQA,EAGnBhO,SAAKA,QACA4E,MAAQ5E,EAGb2O,qBAAiBC,QACZvC,kBAAoBuC,EAG7BC,qBAAqBP,QACZxB,UAAYwB,EAGrBQ,UAAU9O,UACCA,EAAK+O,QAAQ,IAAK,KAIzBC,kBACI1O,EAAM,IAAMwB,KAAK8C,YACK,cAAtB9C,KAAKsK,eAAwD,OAAtBtK,KAAKsK,gBAAwB9L,GAAO,YACxEA,EAGP2O,oBACU,IAAMnN,KAAK8C,MAIrB7C,iBACIA,EAAS,SACa,OAAtBD,KAAKsK,eAAgD,QAAtBtK,KAAKsK,cAChCtK,KAAK2K,YAAYC,aACjB3K,EAAOD,KAAK8K,aAAe9K,KAAK2K,YAAYC,YAEnB,OAAtB5K,KAAKsK,eAAgD,cAAtBtK,KAAKsK,eAAuD,UAAtBtK,KAAKsK,gBACjFrK,EAAOD,KAAK+K,cAAgB/K,KAAK2K,YAAYE,aAE7C7K,KAAK4M,KAAI3M,EAAOmN,KAAOpN,KAAK4M,IACzB3M,EAGPmM,qBACOpM,KAAK8C,MAAMmK,QAAQ,IAAK,KAAO,IAAMjN,KAAKqN,OAGjDT,gBACO5M,KAAKmL,IAGZoB,mBACOvM,KAAKsK,cAGZgD,uBACOtN,KAAK8K,YAGZyC,wBACOvN,KAAK+K,aAGZzC,mBACOtI,KAAK8C,MAAQ,IAAM9C,KAAKsK,cAG/B4B,mBACOlM,KAAKoL,MAAMc,MAGlBW,8BACO7M,KAAKuK,kBAGZiD,gBACO,CACHzB,MAAQ/L,KAAK8C,MACbkE,IAAMhH,KAAKgH,IACXuF,MAAQvM,KAAKsK,cACbsC,GAAK5M,KAAK4M,GACVV,MAAQlM,KAAKkM,OAIrBuB,WAAW7I,EAAQ,KAAM8I,EAAM,SACtB9I,EAME,CAAA,GAAIA,GAAS5E,KAAKgN,UAAUhN,KAAK8K,oBAC7B9K,KAAKoL,MAAME,cAAc,GAAGmC,aAChC,KACCE,EAAM,OACN,IAAIC,KAAMF,EAAI9I,EAAMiB,WACpB8H,EAAI/L,KAAKgM,UAEND,EAAI5E,KAAK,MAbR,KACJ4E,EAAM,OACN,IAAI/I,KAAS5E,KAAKoL,MAAMC,OACpBrL,KAAKoL,MAAMC,OAAOzG,GAAOoB,SAAS2H,EAAI/L,KAAKgD,EAAMvF,YAElDsO,EAAI5E,KAAK,MAYxB0D,mBACQzM,KAAKoL,MAAMoB,SAAU,IACjBxM,KAAKoL,MAAMoB,SAASnB,OAAQ,KACxB,IAAIzG,KAAS5E,KAAKoL,MAAMoB,SAASnB,YAC5BD,MAAMC,OAAOzG,GAAOF,IAAK,MAG9B,IAAIE,KAAS5E,KAAKoL,MAAMoB,SAASnB,YAC5BD,MAAMC,OAAOzG,GAAOF,IAAK,EAIlC1E,KAAKoL,MAAMoB,SAASL,cACff,MAAMe,OAASnM,KAAKoL,MAAMoB,SAASL,QAGxCnM,KAAKoL,MAAMoB,SAASqB,sBACfzC,MAAMyC,gBAAiB,GAG5B7N,KAAKoL,MAAMoB,SAASsB,4BACf1C,MAAM0C,sBAAuB,IAK9CC,eAAexB,EAAOvF,EAAM,SACnBA,IAAKA,EAAMhH,KAAK6H,WAChB0C,kBAAoB,CAACgC,MAAQA,EAAOvF,IAAMA,EAAKyC,OAAS,GACzDzJ,KAAKoL,MAAMoB,UAAYxM,KAAKoL,MAAMoB,SAASK,qBACvC,IAAImB,KAAWhO,KAAKoL,MAAMoB,SAASK,sBAC9BtC,kBAAkByD,GAAWhO,KAAKoL,MAAMoB,SAASK,iBAAiBmB,GAKnFC,YAAY/O,QACH4D,MAAQ5D,EAAS6M,WACjBX,MAAMW,MAAQ/L,KAAK8C,WACnBiI,aAAe7L,EAASqO,gBACxBzC,YAAc5L,EAASoO,eACvB9C,UAAYtL,EAAS+M,cACrBb,MAAMa,SAAW,OAClB,IAAIiC,KAAShP,EAAS+M,cACjBb,MAAMa,SAASrK,KAAK,CAAEuM,EAAI,UACtBJ,eAAe,MAAO/N,KAAK2K,YAAYE,kBACvCN,kBAAkBwB,MAAQmC,EAAMhQ,MACtC0K,EAAIsF,EAAMnI,aAGZqF,MAAMY,SAAW,OAClB,IAAIoC,KAAWlP,EAAS8M,cACnBZ,MAAMY,SAASpK,KAAK,CAAEuM,EAAI,UACtBJ,eAAe,MAAO/N,KAAK2K,YAAYC,iBACvCL,kBAAkBwB,MAAQqC,EAAQlQ,MACxC0K,EAAIwF,EAAQrI,aAGd0E,UAAYvL,EAAS4M,cAErBV,MAAMQ,eAAiB1M,EAASqO,gBAChCnC,MAAMS,cAAgB3M,EAASoO,eAC/BlC,MAAMU,SAAW5M,EAAS4M,cAG1BV,MAAMC,OAAS,OACf,IAAIjL,KAAKlB,EAASmM,eACdD,MAAMC,OAAOjL,GAAK,IAAIwC,EAAMxC,EAAGlB,EAASmM,OAAOjL,IACnB,SAA7BJ,KAAKoL,MAAMC,OAAOjL,GAAGoF,KAAiB,KAClCJ,EAAQ,IAAImC,EAChBnC,EAAM5G,IAAMwB,KAAK8C,MAAQ,IAAM1C,EAC/BgF,EAAM8C,SAAWlI,KAAKoL,MAAMQ,oBACvBR,MAAMC,OAAOjL,GAAGgF,MAAQA,OAIhC6F,QAAU/L,EAASmP,YACnB3D,eAAiBxL,EAASoP,kBAE3BC,EAAMrP,EAAS0N,QACb2B,GAAK,KACHC,EAAS,IAAIpE,EAAM,CAAE2B,MAAQwC,EAAIxC,MAAO/E,IAAM,IAClDwH,EAAOP,YAAYM,GACnBC,EAAO7B,WAAa3M,KACpBwO,EAAOjC,MAAQ,kBACVnB,MAAME,cAAc1J,KAAK4M,GAC9BD,EAAMA,EAAI3B,IAKlB6B,YACSrD,MAAMtL,KAAO,OACd,IAAI8E,KAAS5E,KAAKoL,MAAMC,YACnBD,MAAMC,OAAOzG,GAAOvF,IAAM,QAET,OAAtBW,KAAKsK,qBACEoE,EAAO3O,IAAIC,KAAKkN,QAASlN,KAAKC,QACpChB,MAAKC,OACuB,WAArBA,EAASyP,SAAuB,MAAM,IAAInP,MAAMN,QAC/C0P,YAAY1P,MAEpBD,MAAK,QACEe,KAAKoL,MAAME,cAAcjJ,OAAS,EAAG,KACjCwM,EAAS7O,KAAKoL,MAAME,cAAc,UACtCuD,EAAO7H,IAAMhH,KAAKgH,IAClB6H,EAAOjC,GAAK5M,KAAK4M,GACV8B,EAAO3O,IAAI8O,EAAO3B,QAAS2B,EAAO5O,QACxChB,MAAKC,OACuB,WAArBA,EAASyP,SAAuB,MAAM,IAAInP,MAAMN,GACpD2P,EAAOC,QAAQ5P,OACX,IAAIkB,EAAG,EAAGwI,EAAE5I,KAAKoL,MAAME,cAAcjJ,OAAQjC,EAAEwI,IAAKxI,EAAG,KACnDyO,EAAS7O,KAAKoL,MAAME,cAAclL,GACtCyO,EAAOC,QAAQ5P,EAAS2P,EAAO3Q,eAM5C,GAA0B,cAAtB8B,KAAKsK,eAAuD,OAAtBtK,KAAKsK,qBAC3CoE,EAAO3O,IAAIC,KAAKkN,QAASlN,KAAKC,QACpChB,MAAKC,OACuB,WAArBA,EAASyP,SAAuB,MAAM,IAAInP,MAAMN,QAE3C4P,QAAQ5P,OAET,IAAI2P,KAAU7O,KAAKoL,MAAME,cACrBpM,EAAS2P,EAAO3Q,OAEhB2Q,EAAOC,QAAQ5P,EAAS2P,EAAO3Q,UAI5C,GAA0B,QAAtB8B,KAAKsK,eAA2BtK,KAAKoL,MAAME,cAAcjJ,OAAS,EAAG,KACxEwM,EAAS7O,KAAKoL,MAAME,cAAc,UACtCuD,EAAOE,WAAa/O,KAAK2K,YAAYC,WACrCiE,EAAOjC,GAAK5M,KAAK4M,GACV8B,EAAO3O,IAAI8O,EAAO3B,QAAS2B,EAAO5O,QACxChB,MAAKC,OACuB,WAArBA,EAASyP,SAAuB,MAAM,IAAInP,MAAMN,GACvCc,KAAKoL,MAAME,cAActL,KAAKoL,MAAME,cAAcjJ,OAAS,GACjEyM,QAAQ5P,OACX,IAAI2P,KAAU7O,KAAKoL,MAAME,cACzBuD,EAAOC,QAAQ5P,EAAS2P,EAAO3Q,UAGtCuB,OAAMwH,IACHtH,QAAQC,IAAIqH,aAGTN,QAAQC,UAKvBoI,SAASlP,OACD+C,EAAI,OACJ,MAAM+B,KAAS5E,KAAKoL,MAAMC,OAC1BxI,EAAI+B,GAAU9E,EAAK8E,MAEnB5E,KAAKyK,WAAa3K,EAAKE,KAAK8C,QACxBhD,EAAKE,KAAK8C,OAAQ,CAClBD,EAAI7C,KAAK8C,OAAS,OACd,MAAM1C,KAAKN,EAAKE,KAAK8C,OACrBD,EAAI7C,KAAK8C,OAAOlB,KAAK5B,KAAKgP,SAASlP,EAAKE,KAAK8C,OAAO1C,SAK5D,MAAMA,KAAKJ,KAAKqK,iBAAkB,OAC5BnM,EAAO8B,KAAKqK,iBAAiBjK,MAC/BN,EAAK5B,GAAO,CACZ2E,EAAI3E,GAAQ,OACR,MAAMyG,KAAK7E,EAAK5B,GAChB2E,EAAI3E,GAAM0D,KAAK5B,KAAKgP,SAASlP,EAAK5B,GAAMyG,aAI7C9B,EAGXoM,UAAUnP,OACFoP,EAAU,OACV,MAAMlI,KAAOlH,EAAM,OACb4N,EAAM5N,EAAKkH,OACb,IAAImI,KAASnP,KAAKoL,MAAMe,OAAQ,CAChCgD,EAAQnP,KAAKgN,UAAUmC,GAClBD,EAAQC,KAAQD,EAAQC,GAAS,QAClCC,EAAO1B,EAAIyB,GACVD,EAAQC,GAAOC,KAChBF,EAAQC,GAAOC,GAAQ,SAAY,YAAe,IAClDF,EAAQC,GAAOC,GAAMC,QAAQrP,KAAKyN,WAAW0B,EAAOzB,IAExDwB,EAAQC,GAAOC,GAAME,SAAS1N,KAAKoF,WAGpCkI,EAGXN,YAAY1P,QACHkM,MAAMtL,KAAO,OACb,MAAMM,KAAKlB,EAAS6H,OAAQ,OACvBjH,EAAOE,KAAKgP,SAAS9P,EAAS6H,OAAO3G,SACtCgL,MAAMtL,KAAK8B,KAAK9B,QAKpBsL,MAAM8D,QAAUlP,KAAKiP,UAAUjP,KAAKoL,MAAMtL,MAGnDgP,QAAQhP,OACA,MAAMM,KAAKJ,KAAKoL,MAAMC,YACjBD,MAAMC,OAAOjL,GAAGf,IAAOS,EAAKM,GAAMN,EAAKM,GAAK,KAIzDmP,UAAahD,GACF,UACEwB,eAAexB,IAK5BG,iBACStB,MAAMM,QAAU,QAChBN,MAAMI,UAAY,QAClBJ,MAAMK,aAAe,QACrBL,MAAMtL,KAAO,QACbsL,MAAMG,MAAQvL,KAAKiL,QAAQjL,KAAKsK,eAAeiB,WAC/CH,MAAMrF,MAAQ/F,KAAKiL,QAAQjL,KAAKsK,eAAevE,WAC/CqF,MAAMoE,OAASxP,KAAKsK,mBACpBc,MAAM7L,OAASS,KAAKoL,MAAMoE,YAC1BpE,MAAMqE,UAAYzP,KAAKmN,aACvB/B,MAAMgB,QAAUpM,KAAK8C,MAAQ,IAAM9C,KAAKsK,cACxCtK,KAAKoL,MAAMoB,WAAUxM,KAAKoL,MAAMoB,SAAW,SAC3CpB,MAAMmC,WAAa,IACbvN,KAAK2K,YAAYE,iBAGvBO,MAAMsE,QAAU,YAChBtE,MAAMuE,YAAc,OAEZ,KACF,aACEvE,MAAMM,QAAU,GACjB1L,KAAKiL,QAAQpK,WACRuK,MAAMM,QAAQ9J,KAAK,CAAEuM,EAAGnO,KAAKuP,UAAU,QAAS3G,EAAG5I,KAAKiL,QAAQlL,IAAI2L,QAAQ7K,YAGhFuK,MAAMK,aAAgBzL,KAAKoL,MAAMe,OAAO9J,OAAS,EAAK,WAAcrC,KAAKyK,WAAazK,KAAKqK,iBAAiBhI,OAAS,EAAK,WAAa,iBAaxI+I,MAAMI,UAAY,gBAClBJ,MAAM9C,MAAQtI,KAAK8C,MAAQ,YAC3BsI,MAAMwE,OAAS,UAAanB,aAE5BrD,MAAMO,KAAQ3E,IACVhH,KAAKiL,QAAQrK,gBACRmN,eAAe,aAAc/G,GAC3BhH,KAAKiL,QAAQlK,UACfgN,eAAe,MAAO/G,QAE1BoE,MAAMyE,YAAc,SAGxBzE,MAAMsE,QAAU5P,OAIhBE,KAAKoL,MAAMoB,SAASnB,OAAQ,MACxBD,MAAMoB,SAASnB,OAAS,OACzB,IAAIjL,KAAKJ,KAAKoL,MAAMC,QAChBjL,GAAKJ,KAAKuN,YAAcvN,KAAKoL,MAAMC,OAAOjL,GAAG4F,eACxCoF,MAAMoB,SAASnB,OAAOzJ,KAAKxB,QAMvCgL,MAAMqE,UAAYzP,KAAKkN,oBAElB,aACL9B,MAAMM,QAAU,QAChBN,MAAM9C,MAAQtI,KAAK8C,MAAQ,cAC5B9C,KAAKiL,QAAQlK,UACRqK,MAAMM,QAAQ9J,KAAK,CAAEuM,EAAGnO,KAAKuP,UAAU,OAAQ3G,EAAG5I,KAAKiL,QAAQrK,WAAW8K,QAAQ3K,MAEvFf,KAAKiL,QAAQhK,aACRmK,MAAMM,QAAQ9J,KAAK,CAAEuM,EAAG2B,aACrBhL,QAAQ,4EAA6E,KACjFhF,EAAO,GACXA,EAAKE,KAAK+K,cAAgB/K,KAAK2K,YAAYE,kBACrC6D,EAAOzN,OAAO,IAAMjB,KAAK8C,MAAOhD,QACjCiO,eAAe,MAAO/N,KAAK2K,YAAYC,cAEjDhC,EAAG5I,KAAKiL,QAAQrK,WAAW8K,QAAQzK,cAErCmK,MAAMI,UAAY,mBAElBxL,KAAKoL,MAAMoB,SAASnB,OAAQ,MACxBD,MAAMoB,SAASnB,OAAS,OACzB,IAAIjL,KAAKJ,KAAKoL,MAAMC,YACfD,MAAMoB,SAASnB,OAAOzJ,KAAKxB,GAIpCJ,KAAKkL,mBACAE,MAAMO,KAAO,UACTT,YAAY2B,iBAAmB,CAACN,MAAQ,aAAcvF,IAAMhH,KAAKgH,IAAKyC,OAAS,EAAGsC,MAAQ/L,KAAK8C,eAIxG,aACCsI,MAAMI,UAAaxL,KAAKiL,QAAQ8E,MAAS,sBAAwB,gBACjE3E,MAAM9C,MAAQtI,KAAK8C,MAAQ,aAC3BsI,MAAMM,QAAU,GACjB1L,KAAKiL,QAAQ8E,YACR3E,MAAMM,QAAQ9J,KAAK,CAAEuM,EAAGnO,KAAKuP,UAAU,SAAU3G,EAAG5I,KAAKiL,QAAQpK,KAAK6K,QAAQqE,aAGlF3E,MAAMO,KAAO,UACToC,eAAe,SAGnB/N,KAAKoL,MAAMoB,SAASnB,OAAQ,MACxBD,MAAMoB,SAASnB,OAAS,OACzB,IAAIjL,KAAKJ,KAAKiL,QAAQpK,KAAKwK,YACtBD,MAAMoB,SAASnB,OAAOzJ,KAAKxB,QAKnCgL,MAAMsE,QAAU5P,IACjBA,EAAKE,KAAK8K,aAAe9K,KAAK2K,YAAYC,iBAGzCQ,MAAMuE,YAAc7P,SAChB6K,YAAYE,YAAc/K,EAAKE,KAAK+K,oBAG1C,aACEK,MAAMI,UAAY,gBAClBJ,MAAM9C,MAAQtI,KAAK8C,MAAQ,YAC3BsI,MAAMM,QAAU,QAChBN,MAAMO,KAAO,KACV3L,KAAKiL,QAAQrK,gBACRmN,eAAe,mBAEfA,eAAe,SAKvB/N,KAAKoL,MAAMoB,SAASnB,OAAQ,MACxBD,MAAMoB,SAASnB,OAAS,OACzB,IAAIjL,KAAKJ,KAAKiL,QAAQlK,IAAIsK,YACrBD,MAAMoB,SAASnB,OAAOzJ,KAAKxB,QAKnCgL,MAAMsE,QAAU5P,IACjBA,EAAKE,KAAK+K,cAAgB/K,KAAK2K,YAAYE,oBAG1C,aACAO,MAAMI,UAAY,2BAClBJ,MAAM9C,MAAQtI,KAAK8C,MAAQ,cAC3BsI,MAAMM,QAAU,GACjB1L,KAAKiL,QAAQpK,WACRuK,MAAMM,QAAQ9J,KAAK,CAAEuM,EAAGnO,KAAKuP,UAAU,QAAS3G,EAAG5I,KAAKiL,QAAQ8E,MAAMrE,QAAQ7K,QAGlFb,KAAKoL,MAAMoB,SAASnB,OAAQ,MACxBD,MAAMoB,SAASnB,OAAS,OACzB,IAAIjL,KAAKJ,KAAKiL,QAAQ8E,MAAM1E,YACvBD,MAAMoB,SAASnB,OAAOzJ,KAAKxB,QAInCgL,MAAM7L,OAAS,YACf6L,MAAMqE,WAAa,cACnBrE,MAAMO,KAAO,OAInB3L,KAAKsK,qBAER,IAAIlK,KAAKJ,KAAKoL,MAAMC,YACfD,MAAMC,OAAOjL,GAAGsE,IAAK,MAG1B,IAAIE,KAAS5E,KAAKoL,MAAMoB,SAASnB,YAC5BD,MAAMC,OAAOzG,GAAOF,IAAK,GCpkB1C,MAAe,CACXsL,aA3BJ,SAAsB/P,OACdE,EAAQ,GACR8P,EAAO,OACP,IAAI7P,KAAKH,EACgB,iBAAdA,EAAOG,IAAmBH,EAAOG,IAEjCC,MAAMC,QAAQL,EAAOG,IAD5BD,EAAMC,GAAKH,EAAOG,GAIlB6P,EAAKrO,KAAKxB,EAAI,IAAM8P,mBAAmBjQ,EAAOG,YAIlD+P,OAAOC,KAAKjQ,GAAOkC,OAAS,GAAG4N,EAAKrO,KAAM,SAAWsO,mBAAmB1P,KAAKC,UAAUN,KACpF8P,EAAKlH,KAAK,MAcjBsH,aA3CJ,iBACUpQ,EAAS,IAAIC,gBAAgBoQ,OAAOC,SAASC,YAC/CC,EAAY,UAChBxQ,EAAOyQ,SAAQ,SAASvS,EAAO6I,MAChB,SAAPA,EAAgB,KACZ2J,EAAYnQ,KAAKoQ,MAAMC,mBAAmB1S,IAC9CsS,EAAY,IAAKA,KAAcE,QAE/BF,EAAUzJ,GAAO7I,KAGlBsS,GAiCPK,UAZJ,SAAmBtS,EAAKyB,OAChB,IAAIG,KAAKH,EAAQ,OAEX8Q,EAAQ,IAAIC,OADN,KAAO5Q,EAAI,IACO,KAC9B5B,EAAMA,EAAIyO,QAAQ8D,EAAO9Q,EAAOG,WAE7B5B,ICnCX,MAAMyS,EAAa,MACN,cACD,iBACG,gBACD,gBACC,qBACI,eACP,IAGZ,MAAMC,EAEF/P,mBACSgQ,YACA9D,OAAS,QACTxF,KAAO,OACPsD,IAGLY,UAAMA,QACDoF,OAASpF,EAGdQ,UAAMA,QACDc,OAASd,EAGdvF,QAAIA,QACCa,KAAOb,EAGZ4F,OAAGA,QACEzB,IAAMyB,EAGXb,mBACO/L,KAAKmR,OAGZ5E,mBACOvM,KAAKqN,OAGZrG,iBACOhH,KAAK6H,KAGZ+E,gBACO5M,KAAKmL,IAGhBiG,KAAK5D,QACI2D,OAAS3D,EAAIzB,WACbsB,OAASG,EAAIjB,WACb1E,KAAO2F,EAAIxG,SACXmE,IAAMqC,EAAIZ,GAInByE,mBACQtF,EAAQ/L,KAAKmR,OACb5E,EAAQvM,KAAKqN,OACbrG,EAAMhH,KAAK6H,KACX+E,EAAK5M,KAAKmL,IAEV3M,EAAMuN,EAAQkF,EAAW1E,UACzBvF,IAAKxI,GAAO,IAAMwI,GAClB4F,IAAIpO,GAAO,OAASoO,GACjBpO,EAGX8S,eAAe9S,OACNA,EAAK,WACN+S,EAAQ/S,EAAIgT,MAAM,QAClBD,EAAMlP,OAAS,SACV8I,IAAMoG,EAAM,GACjB/S,EAAM+S,EAAM,IAEhBA,EAAQ/S,EAAIgT,MAAM,SACdxK,EAAMyK,SAASF,EAAMA,EAAMlP,OAAS,OACpCD,MAAM4E,GAAMhH,KAAK6H,KAAO,GAExB0J,EAAMG,WACD7J,KAAOb,GAGI,GAAhBuK,EAAMlP,aACA,IAAI7C,MAAM,kCAAoChB,OAEpD,IAAI4B,KAAK6Q,KACLA,EAAW7Q,IAAM,IAAMmR,EAAMA,EAAMlP,OAAS,GAAI,MAC3CgL,OAASjN,EACdmR,EAAMG,iBAITP,OAASI,EAAMxI,KAAK,MAIjC,IAAI4I,EAAO,GACPC,EAAa,KACbC,EAAa,GACb5R,EAAS,GAmBb,SAAS6R,QACDtE,EAAM,IAAI0D,SACdS,EAAK/P,KAAK4L,GACHA,EA0CX,MAAe,CACXuE,QAlDJ,SAAiBC,GACbJ,EAAaI,GAkDbC,UAvDJ,WACIN,EAAO,IAuDPG,UAAAA,EACAT,aA3CJ,eACQa,EAAY,OACZ,IAAI1E,KAAOmE,EACXO,EAAUtQ,KAAK4L,EAAI6D,oBAEnB7S,EAAMqT,EAAa,IAAMK,EAAUnJ,KAAK,WAEtCoJ,EAAYC,EAAOpC,aAAa/P,UAClCkS,IAAW3T,GAAO,IAAM2T,GAErB3T,GAkCP8S,eA/BJ,SAAwB9S,OAGhB+S,GADJ/S,GADAA,EAAMA,EAAIyO,QAAQ4E,EAAY,KACpB5E,QAAQ,aAAc,KAChBuE,MAAM,KACtBG,EAAO,OACH,IAAIvR,KAAKmR,EAAO,CACNO,IACNR,eAAeC,EAAMnR,IAEzBwR,GAAYA,KAuBhBS,QAnBJ,SAAiBC,GAEbA,EAAOA,EAAKrF,QAAQ,aAAc,IAClC4E,EAAa,IAAMS,GAiBnBC,QAdJ,kBACWZ,IClKX,IAAIa,EAqBJ,SAASC,EAASC,GACTA,IAAKA,EAAMpC,OAAOC,SAASoC,UAC5BH,GAAIA,EAAGE,GAPfpC,OAAOsC,WAAa,WAChBH,EAASI,SAAStC,SAASoC,WAgB/B,MAAe,CACXG,SA9BJ,SAAkBJ,EAAKnH,EAAQ,IAE3B+E,OAAOyC,QAAQC,UAAU,MAAUN,GAAMG,SAAStH,MAAOmH,GACzDD,EAASC,IA4BTO,aAxBJ,SAAsBC,GAClB5C,OAAOC,SAAW2C,GAwBlBT,SAAAA,EACAU,YAXJ,SAAqBC,GACjBZ,EAAKY,ICvBT,IAAIC,EAAShP,WAAS,QAAa,GAAIiP,QAAU,OAC7CtI,EAAY,GACZuI,EAAU,GACVC,GAAW,EAqDf,SAASC,EAAWjG,EAAKtB,OACjB1N,EAAQgP,EAAIzB,MAAiC,UAAYyB,EAAIzB,MAAxC,sBACrBjM,EAAO,UACP0N,EAAIZ,KAAI9M,EAAKsN,KAAOI,EAAIZ,IACrB9F,EAAO/G,IAAIvB,EAAKsB,GACtBb,MAAKC,OACuB,WAArBA,EAASyP,eACH,IAAInP,MAAMN,OAEhBwU,EAAaxU,EAAS6M,MACtBA,EAAQ,IAAI3B,SAChB2B,EAAMa,GAAKY,EAAIZ,GACX5B,EAAU0I,IAAa3H,EAAMgB,qBAAqB/B,EAAU0I,IAChE3H,EAAMkC,YAAY/O,GAClB6M,EAAMQ,MAAQiB,EAAIjB,MAClBR,EAAM/E,IAAMwG,EAAIxG,IAEhB+E,EAAMG,MAAQA,EACdqH,EAAQrH,GAASH,EACVA,KAEV9M,MAAK8M,GACKA,EAAM0C,SAKrB,SAAS9P,IACL6U,GAAW,MACP7B,EAAOgC,EAAIpB,aACI,GAAfZ,EAAKtP,aACC,IAAI7C,MAAM,8CAEpB6T,EAAOO,OAAS,OACZ/J,EAAW,GAEX0J,EAAQlR,OAASsP,EAAKtP,QAAQkR,EAAQM,OAAOlC,EAAKtP,OAAQkR,EAAQlR,OAASsP,EAAKtP,YAC/E,IAAIjC,KAAKuR,EAAM,OACVnE,EAAMmE,EAAKvR,OACb2L,EAAO+H,EACP1T,GAAKmT,EAAQlR,QAAUkR,EAAQnT,GAAGlC,MAAQsP,EAAIzB,MAC9C+H,EAAUL,EAAWjG,EAAKpN,IAE1B2L,EAAQwH,EAAQnT,GACZ2L,EAAMQ,OAASiB,EAAIjB,OAASR,EAAM/E,KAAOwG,EAAIxG,MAC7C+E,EAAMQ,MAAQiB,EAAIjB,MAClBR,EAAM/E,IAAMwG,EAAIxG,KAEpB8M,EAAUP,EAAQnT,GAAGqO,OACpBhP,OAAMwH,GAAKtH,QAAQC,IAAIqH,MAE5B4C,EAASjI,KAAKkS,GAKlBnN,QAAQwD,IAAIN,GACX5K,MAAK,SACE,IAAI8M,KAASwH,EACbF,EAAOO,OAAOhS,KAAKmK,MAG1BtM,OAAMwH,IACHtH,QAAQC,IAAIqH,MAoEpB0M,EAAI5B,SAAQ,KACRpT,OAGJoV,EAAOZ,YAAYQ,EAAIrC,gBAEvB,MAAe,CACXlG,MAAQiI,EACRO,OAASL,EACTS,YA9LJ,SAAqBxH,MACbA,EAASkC,OAAQ,IACjB5H,EAAOvI,OAAOiO,EAASkC,OAAOlQ,KAC1BgO,EAASkC,OAAO5Q,mBACZ,IAAIsC,KAAKoM,EAASkC,OAAO5Q,eACzBgJ,EAAO7I,gBAAgBmC,EAAGoM,EAASkC,OAAO5Q,eAAesC,IAI7DoM,EAASkC,OAAO1Q,OAChB8I,EAAOrI,UAAS,GAGpBqI,EAAO1I,iBAAiB,KAAK,WACzB6K,MAAM,qBAIVuD,EAASyH,QACLzH,EAASyH,OAAO3B,MAAMqB,EAAItB,QAAQ7F,EAASyH,OAAO3B,MAGtD9F,EAASoH,SAAQ5I,EAAYwB,EAASoH,SAyK1CM,YArKJ,kBACWpN,EAAO/G,IAAI,oBACjBd,MAAKC,IACFmU,EAAOC,QAAUpU,EAASiV,UACnBd,EAAOC,YAkKlBc,WA9JJ,SAAoBC,UACTvN,EAAOjG,KAAK,oBAAqB,MAAWwT,IAClDpV,MAAKqV,IACFjB,EAAOC,QAAUgB,EAAQH,UAClBd,EAAOC,YA2JlBiB,WAvJJ,kBACWzN,EAAOjG,KAAK,qBAClB5B,MAAKqV,IACFjB,EAAOC,QAAUgB,EAAQH,UAClBd,EAAOC,YAoJlB3U,IAAAA,EACA8U,WAAAA,EACAe,UA/EJ,WACIb,EAAI1B,gBACAwC,EAAQ,GACRC,EAAU,OACV,IAAItU,KAAKmT,EAAS,KACdxH,EAAQwH,EAAQnT,GACpBqU,EAAM7S,KAAKmK,EAAMyB,KACjBkH,EAAQ9S,KAAKmK,EAAMc,sBAGlB,IAAIzM,EAAG,EAAEwI,EAAE8L,EAAQrS,OAAQjC,EAAEwI,IAAKxI,EAAG,KAClCuU,EAASD,EAAQtU,OAChBuU,EAAQ,aACTC,EAAKxU,EAAIuU,EAAOlL,UAChBmL,EAAK,EAAGH,EAAMI,QAAQ,IAAKJ,EAAMrU,KAC5BwU,GAAMH,EAAMpS,QAAQoS,EAAM7S,KAAK,IAAM6S,EAAMA,EAAMpS,OAAS,KAC/DsS,EAAO5I,QAAO0I,EAAMG,GAAI7I,MAAQ4I,EAAO5I,OACvC4I,EAAOpI,QAAOkI,EAAMG,GAAIrI,MAAQoI,EAAOpI,OACvCoI,EAAO/H,KAAI6H,EAAMG,GAAIhI,GAAK+H,EAAO/H,IACjC+H,EAAO3N,MAAKyN,EAAMG,GAAI5N,IAAM2N,EAAO3N,KACnC2N,EAAOnM,IAAK,CACZiM,EAAMZ,OAAOe,EAAK,EAAGH,EAAMpS,mBAK/B,MAAMyS,KAAQL,EAAO,KACjBM,EAAOpB,EAAI7B,gBACX,IAAI1R,KAAK0U,EACTC,EAAK3U,GAAK0U,EAAK1U,OAGnB5B,EAAMmV,EAAItC,eACd0C,EAAOjB,SAAStU,IA+ChBwW,QA5CJ,WACIrB,EAAIlB,YA4CJwC,QAxCJ,SAAiBvC,EAAM,MACdA,IAAKA,EAAMpC,OAAOC,SAASoC,UAChCgB,EAAIrC,eAAeoB,IAuCnBwC,eAlCJ,WACIvB,EAAI1B,gBACAzT,EAAMmV,EAAItC,eACd0C,EAAOjB,SAAStU,IAgChB2W,SA5BJ,kBACW9B,EAAOO,OAAOJ,GAASpI,OA4B9BO,KAxBJ,aACM6H,IC9LN,IAAI4B,EAAe,8BACgB,mDACP,wCACJ,6BACP,0BACI,gCACE,kCACA,4BACN,4BACM,kCACA,kCACA,mCACC,6BACP,sBACA,2BACK,+BACD,0BACJ,qBACD,yBACK,iCACG,wCACI,8CACE,gDACA,kDACE,qDACC,+CACP,+CACO,qDACD,qDACC,oDACF,iDACD,kDACE,qCACf,0BACI,oCACM,4CACE,wCACN,6BACL,+BACO,2CACK,wCACR,iCACC,2CACS,iDACH,gDACE,4CACN,oCACF,mCACC,0CACM,iDACC,+CACH,8CACE,0CACN,kCACF,oCACI,uCACD,+CACS,qDACH,8CACJ,4CACE,qDACO,iDACX,wCACE,oCACN,uCACS,kDACE,8CACN,yCACC,4CACE,wCACN,4CACU,qDACD,6CACP,+BACP,uCACe,wDACE,sDACJ,kDACA,wDACM,gEACE,4DACN,wDACE,kDACR,gCACV,YAWjB,MAAe,CACXC,SATJ,SAAkBnX,EAAMC,GACpBiX,EAAalX,GAAQC,GASrBmX,SANJ,SAAkBpX,UACPkX,EAAalX,OCnFTqX,kBAAgB,CAC3BrX,KAAO,YACPsX,MAAQ,CACJ1P,MAAU2P,QAEdC,MAAK,KACM,CAAEC,MAAAA,MCfjB,SAASC,EAAYC,EAAKhS,QACX,IAARA,IAAiBA,EAAM,QACxBiS,EAAWjS,EAAIiS,YAEdD,GAA2B,oBAAbhD,cAEfkD,EAAOlD,SAASkD,MAAQlD,SAASmD,qBAAqB,QAAQ,GAC9DC,EAAQpD,SAASqD,cAAc,SACnCD,EAAMzQ,KAAO,WAEI,QAAbsQ,GACEC,EAAKI,WACPJ,EAAKK,aAAaH,EAAOF,EAAKI,YAKhCJ,EAAKM,YAAYJ,GAGfA,EAAMK,WACRL,EAAMK,WAAWC,QAAUV,EAE3BI,EAAMI,YAAYxD,SAAS2D,eAAeX,kGCtB1CY,0BAAIC,uBAAOC,QAAMrB,0CAA0BqB,gECa/C,MAAepB,kBAAgB,CAC7BrX,KAAM,YACNsX,MAAQ,CACN5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,IAEdiB,WAAa,CACT,YAAcC,oICtBlBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,mCAAuCqB,QAAMzY,kBACxFyY,QAAM1R,KAAKO,oBAAxBiR,oCAA2CC,uBAAOC,QAAMrB,qDAAqCqB,QAAM5Q,4DACnG+Q,8BAAQJ,uBAAOC,QAAMrB,4BAA6BpX,KAAMyY,QAAMzY,KAAOsH,KAAMmR,QAAM1R,KAAKO,0CAAemR,QAAS,OAAGI,sBAAMJ,QAAM1Q,eAAoBlB,SAAU4R,QAAM5R,uCAA5D4R,QAAMtX,wBAC3G2X,iBAAqClR,MAAO6Q,QAAM7Q,mCAA/B6Q,QAAMpQ,0ECU7B,MAAegP,kBAAgB,CAC7BrX,KAAM,cACNsX,MAAQ,CACN5Q,MAAQuL,QAEVrQ,KAAI,KACO,CACHmX,KAAO,KAGfvB,MAAK,KACO,CAAEC,MAAAA,IAEdnR,SAAW,CACTtG,OACI,OAAO8B,KAAK4E,MAAM1G,KAAO,YAE7B4H,QACI,GAAI9F,KAAKkX,aACL,OAAIlX,KAAK4E,MAAMvF,KAAOW,KAAKiX,KAAa,GAC5B,iBAAmBjX,KAAK4E,MAAM1G,OAIpD0Y,WAAa,CACT,YAAcC,yHCtClBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,oCACxDwB,8BAAQJ,uBAAOC,QAAMrB,uDAAuCqB,QAAM5Q,2BAClE+Q,8BAAQJ,uBAAOC,QAAMrB,8BAA+BpX,KAAMyY,OAAOnR,KAAMmR,QAAM1R,KAAKO,0CAAemR,EAAI,QAAGI,sBAAMJ,QAAMQ,+CAAnBR,2BACjGK,iBAA2BlR,MAAO6Q,qCAAfA,0ECavB,MAAepB,kBAAgB,CAC5BC,MAAQ,CACP5Q,MAAQuL,QAEVuF,MAAMF,IACM,CAAEG,MAAAA,IAEdiB,WAAa,CACT,YAAcC,8CCrBhBC,+BAAQ3Y,MAAM,KAAI,4HAHpBsY,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,mCAC1DwB,8BAAQJ,uBAAOC,QAAMrB,sDAAsCqB,QAAM5Q,2BACjE+Q,+BAASJ,uBAAOC,QAAMrB,kEAAsCqB,QAAS,OAAG5R,SAAU4R,QAAM5R,SAAW7G,KAAMyY,QAAMzY,KAAOuH,SAAUkR,QAAMlR,WACpI2R,mBACAX,kDAAyBE,QAAMzQ,SAAhBmR,kBAAfZ,+BAAyCzP,IAAKqQ,EAAOrQ,IAAM7I,MAAOkZ,EAAOrQ,uBAAQqQ,EAAOlZ,6CAF9BwY,QAAMtX,wBAIlE2X,iBAAqClR,MAAO6Q,QAAM7Q,mCAA/B6Q,QAAMpQ,2ECU3B,MAAegP,kBAAgB,CAC7BrX,KAAM,YACNsX,MAAQ,CACN5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,IAEd7V,KAAI,KACO,CACHoX,cAAe,IAGvBI,QAAU,CACNH,gBACInX,KAAKkX,cAAe,IAG5BN,WAAa,CACT,YAAcC,0HCnChBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,kCACxDwB,8BAAQJ,uBAAOC,QAAMrB,qDAAqCqB,QAAM5Q,2BAC9D0Q,kDAAsBE,QAAMzQ,SAAhBmR,kBAAZZ,4BAAsCzP,IAAKqQ,IACvCP,8BAAQJ,uBAAOC,QAAMrB,4DAA4C+B,EAAOA,4BACxEP,8BAAQ5Y,KAAMyY,SAAOzY,KAAMsH,KAAK,QAASrH,MAAOkZ,EAAOlZ,2CAAgBwY,QAAS,kCAATA,QAAMtX,mCAEjF2X,iBAAiClR,MAAO6Q,QAAM7Q,mCAA3B6Q,QAAM7Q,sECQjC,MAAeyP,kBAAgB,CAC7BrX,KAAM,eACLsX,MAAQ,CACP5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,IAEdiB,WAAa,CACT,YAAcC,kHCvBlBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,gCACxDwB,8BAAQJ,uBAAOC,QAAMrB,mDAAmCqB,QAAM5Q,2BAC9D+Q,8BAAQJ,uBAAOC,QAAMrB,0BAA0B9P,KAAK,WAAY,aAAY,EAAI,cAAa,EAAItH,KAAMyY,QAAMzY,0CAAeyY,QAAS,sCAATA,QAAMtX,wBAClI2X,iBAAqClR,MAAO6Q,QAAM7Q,mCAA/B6Q,QAAMpQ,6ECU7B,MAAegP,kBAAgB,CAC7BrX,KAAM,eACNsX,MAAQ,CACN5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,IAEdiB,WAAa,CACT,YAAcC,yICtBhBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,sCAA0CqB,QAAMzY,KAAK+O,oBAC5G6J,8BAAQJ,uBAAOC,QAAMrB,wDAAwCqB,QAAM5Q,2BACnE+Q,iCAAWJ,uBAAOC,QAAMrB,+BAAgCpX,KAAMyY,QAAMzY,0CAAeyY,QAAS,OAAG5R,SAAU4R,QAAM5R,SAAW,YAAW4R,QAAM1R,KAAKsS,gCAA7DZ,QAAMtX,wBACzF2X,iBAAiClR,MAAO6Q,QAAM7Q,mCAA3B6Q,QAAM7Q,yECUhC,MAAeyP,kBAAgB,CAC7BrX,KAAM,kBACNsX,MAAQ,CACN5Q,MAAQ,CACJY,KAAO2K,OACP/J,UAAW,IAGjBsP,MAAK,KACO,CAAEC,MAAAA,IAEd2B,QAAU,CACNE,QAAQvQ,GACAA,EAAEwC,OAAOgO,MAAMpV,OAAS,EAC1BrC,KAAK4E,MAAMvF,IAAM4H,EAAEwC,OAAOgO,MAAM,GAEhCzX,KAAK4E,MAAMvF,IAAM,KAEnBW,KAAK4E,MAAMqB,YAAa,IAGhC2Q,WAAa,CACT,YAAcC,kHCnCnBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,kCACzDwB,8BAAQJ,uBAAOC,QAAMrB,qDAAqCqB,QAAM5Q,UAChE+Q,8BAAQJ,uBAAOC,QAAMrB,4BAA4BzR,IAAI,QAAS6T,6BAAQf,4BAAUzY,KAAMyY,QAAMzY,KAAMsH,KAAK,oCACvGwR,iBAAqClR,MAAO6Q,QAAM7Q,mCAA/B6Q,QAAMpQ,0ECU3B,MAAegP,kBAAgB,CAC7BrX,KAAM,mBACNsX,MAAQ,CACJmC,MAAQC,OACRC,SAAWD,QAEflC,MAAK,KACO,CAAEC,MAAAA,IAEdnR,SAAW,CACPsT,MACI,IAAIA,EAAM/N,KAAKgO,MAAO/X,KAAK6X,SAAW7X,KAAK2X,MAAS,KACpD,OAAQvV,MAAM0V,GAAQ,EAAIA,GAE9B7B,QACI,MAAO,SAAYjW,KAAK8X,IAAM,yZC5BpCrB,4BAAMC,uBAAOC,QAAMrB,wCACfwB,4BAAMJ,uBAAOC,QAAMrB,8DACfwB,4BAAMJ,uBAAOC,QAAMrB,yCAA4CW,uBAAOU,UAAO,WAEjFG,mDAASH,OAAM,oGCkCvB,OAAepB,kBAAgB,CAC7BrX,KAAM,WACN4B,KAAI,KACO,CACHkY,OAAS,EACTH,SAAW,EACXI,YAAc,KAGtBvC,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtC2B,QAAU,CACRa,cACInY,KAAKiY,YAAc,GACnB,IAAI,IAAI7X,KAAKJ,KAAKoL,MAAMC,OACpBrL,KAAKoL,MAAMC,OAAOjL,GAAG0F,MAAQ,GAGrCU,UAAU5B,GACN,MAAMvF,EAAMW,KAAKoL,MAAMtL,KAAK8E,EAAM1G,MAClC,IAAKmB,EAAK,OAAOsH,QAAQC,UACzBxB,MAAMsB,SAASrH,EAAKW,KAAK6H,MAAM,MAAQ7H,KAAK6X,WAC5C7X,KAAK2X,OAASvS,MAAMgT,YAExBC,OAAOpR,GACHjH,KAAKgY,OAAUhY,KAAK2X,MAAQ,EAAK,EAAI,EACrC3X,KAAKmY,cACL,IAAIrY,EAAO,GACX,IAAI,IAAIM,KAAKJ,KAAKoL,MAAMC,OAChBrL,KAAKoL,MAAMC,OAAOjL,GAAGsE,KAAI5E,EAAKM,GAAKJ,KAAKoL,MAAMC,OAAOjL,GAAGf,KAGhE,OADAW,KAAKoL,MAAMsE,QAAQ5P,GACZgH,EAAO9G,KAAKoL,MAAM7L,QAAQS,KAAKoL,MAAMqE,UAAW3P,GACtDb,MAAKqV,IACF,GAAuB,WAAnBA,EAAQ3F,SACR,KAAM,CAAE2J,QAAUhE,EAAQiE,YAE9BvY,KAAKoL,MAAMuE,YAAY2E,MAE1BrV,MAAK,KACF,IAAI4K,EAAW,GACf,IAAI,IAAIzJ,KAAKJ,KAAKoL,MAAMC,OACpB,GAAiC,SAA7BrL,KAAKoL,MAAMC,OAAOjL,GAAGoF,KAAiB,CACtC,IAAIsO,EAAU9T,KAAKoL,MAAMC,OAAOjL,GAAGoG,UAAUxG,KAAKoL,MAAMmC,cACvDtO,MAAK,OACAe,KAAK6X,YAEVpY,OAAMC,IACHM,KAAKgY,OAAS,EACdhY,KAAK6X,SAAW,EAChB7X,KAAKoL,MAAMC,OAAOjL,GAAG0F,MAAQpG,KAEjCmK,EAASjI,KAAKkS,GAGtB,OAAOnN,QAAQwD,IAAIN,MAEtB5K,MAAK,KACFe,KAAKoL,MAAMO,OACXuM,EAAK1D,eAER/U,OAAMC,IAIH,GAFAM,KAAKgY,OAAS,EACdrY,QAAQC,IAAIF,GACM,iBAAPA,EACPM,KAAKiY,YAAcvY,OAEnB,IAAI,IAAIU,KAAKV,EACe,IAApBU,EAAEM,QAAQ,OACLV,KAAKoL,MAAMC,OAAOjL,KACvBJ,KAAKoL,MAAMC,OAAOjL,GAAG0F,MAAQQ,EAAO5D,SAAShD,EAAIU,UAOvEoE,SAAW,CACPmT,QACI,IAAIA,EAAQ,EACZ,IAAI,IAAIvX,KAAKJ,KAAKoL,MAAMC,OACW,SAA7BrL,KAAKoL,MAAMC,OAAOjL,GAAGoF,QACnBmS,EAGR,OAAOA,IAGff,WACE,CACE,YAAc4B,EACd,cAAgBC,EAChB,aAAeC,EACf,YAAcC,EACd,eAAiBC,EACjB,eAAgBC,EAChB,kBAAoBC,EACpB,mBAAqBC,8aCzI1BjC,6BAAOkC,8CAAgBrC,wCAA4BD,uBAAOC,QAAMrB,yBAA6BqB,QAAMvK,4BAChG0K,4BAAMJ,uBAAOC,QAAMrB,+CAAoDqB,4BAAhBA,kCACvDF,kDAAqBE,QAAMtL,QAAfzG,mCAAZ6R,4BAAsDzP,IAAKpC,EAAM1G,KAAOwY,uBAAOC,QAAMrB,wCAC7D1Q,EAAMY,oBAAxByT,uBAAyCrU,MAAOA,EAAQsU,OAAQvC,8CAC1C/R,EAAMY,oBAA5ByT,uBAA4CrU,MAAOA,EAAQsU,OAAQvC,iDAC1C/R,EAAMY,oBAA/ByT,uBAAkDrU,MAAOA,EAAQsU,OAAQvC,iDAChD/R,EAAMY,oBAA/ByT,uBAAkDrU,MAAOA,EAAQsU,OAAQvC,8CAC7C/R,EAAMY,oBAAlCyT,uBAAkDrU,MAAOA,EAAQsU,OAAQvC,oDACzEsC,uBAAmBrU,MAAOA,EAAQsU,OAAQvC,qCAC/B/R,EAAa,uBAAxB6R,+BACEO,iBAAcpS,MAAOA,EAAQsU,OAAQvC,uEAEvCwC,kDAVqCvU,EAAMF,cAYjDoS,8BAAOtR,KAAK,SAASrH,MAAM,SAAUuY,uBAAOC,QAAMrB,wDAddqB,6BAiBtCK,iBAAwCW,MAAOhB,QAAQkB,SAAUlB,sDAAvCA,qECJ5B,OAAepB,kBAAgB,CAC7BrX,KAAM,UACNsX,MAAO,CACL9J,QAAUrL,MACV+L,QAAU,CACN5G,KAAOiQ,OACPvQ,QAAU,KAGhBwQ,MAAK,KACO,CAAEC,MAAAA,IAEd2B,QAAU,CACNxE,SAASI,GACLA,EAAM/E,IACN+J,EAAK1D,0FC5BbiC,6BAAOC,uBAAOC,QAAMrB,wBAA4BqB,8BAChDF,kDAAmBE,WAATzD,kBAAVuD,0BAAmCzP,IAAKkM,EAAQkG,YAAOzC,WAASzD,IAAUwD,uBAAOC,QAAMrB,6CAClFpC,EAAMtK,0ECWb,OAAe2M,kBAAgB,CAC7BrX,KAAM,iBACPsX,MAAQ,CACL5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,IAEdiB,WAAa,CACT,YAAcC,kGCtBnBJ,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,wCACzDwB,8BAAQJ,uBAAOC,QAAMrB,2DAA2CqB,QAAM5Q,2BACtE+Q,8BAAQJ,uBAAOC,QAAMrB,oCAAoC9P,KAAK,4CAAgBmR,QAAU,gCAAVA,QAAM0C,yBACpFvC,8BAAQJ,uBAAOC,QAAMrB,oCAAoC9P,KAAK,4CAAgBmR,QAAU,gCAAVA,QAAM2C,yBACpFtC,iBAAiClR,MAAO6Q,QAAM7Q,mCAA3B6Q,QAAM7Q,6ECY3B,OAAeyP,kBAAgB,CAC7BrX,KAAM,eACLsX,MAAQ,CACP5Q,MAAQuL,QAEVuF,MAAK,KACO,CAAEC,MAAAA,4BCnBRmB,+BAAQ3Y,MAAM,sBAAM,WACpB2Y,+BAAQ3Y,MAAM,uBAAO,eACrB2Y,+BAAQ3Y,MAAM,uBAAO,uEAL5BsY,4BAAMC,uBAAOC,QAAMrB,6BAAiCqB,QAAMrB,4CACvDwB,8BAAQJ,uBAAOC,QAAMrB,+DAA+CqB,QAAM5Q,2BAC1E+Q,+BAAS5Y,KAAMyY,QAAMzY,0CAAeyY,QAAS,OAAGD,uBAAOC,QAAMrB,kEAAzBqB,QAAMtX,+ECc9C,OAAekW,kBAAgB,CAC3BC,MAAQ,CACJjK,MAAQkK,OACR8D,OAAS,CACL/T,KAAO4B,QACPlC,SAAU,GAEdkH,QAAU,CACN5G,KAAOiQ,OACPvQ,QAAU,KAGlBwQ,MAAK,KACK,CAAEC,MAAAA,IAEZ7V,OACI,MAAO,CACH0Z,KAAOxZ,KAAKuZ,SAGpBjC,QAAU,CACNmC,eACIzZ,KAAKwZ,MAAQxZ,KAAS,mBCnCuD8W,qBAA8C,QAAxCJ,MAAM,kBAAiB,sBAGzGA,MAAM,iGANfD,4BAAMC,uBAAOC,QAAMrB,kCAAuCqB,aACtDG,4BAAMJ,uBAAOC,QAAMrB,wCACfwB,2BAAKJ,uBAAOC,QAAMrB,2EAAwCqB,gBAC1DG,0BAAIJ,uBAAOC,QAAMrB,sCAAuC8D,4BAAOzC,sEAGnEG,2BAAA4C,IACIC,iDAD0DhD,2ECyBtE,OAAepB,kBAAgB,CAC7BrX,KAAM,kBACNwX,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtC2B,QAAU,CACRe,SACErY,KAAKoL,MAAMwE,WAGfgH,WACE,CACE,YAAc4B,EACd,aAAeoB,EACf,eAAiBhB,EACjB,iBAAmBiB,GACnB,sBAAwBC,GACxB,aAAeC,0TChDpBd,iBAAY1N,MAAM,8BAChB,KAAAuL,6BAAOkC,8CAAgBrC,wCAASD,uBAAOC,QAAMrB,+BAC1CwB,+BAAI,4BAAUH,QAAMpL,2BACpBkL,kDAAqBE,QAAMtL,QAAfzG,kBAAZ6R,4BAAoCzP,IAAKpC,EAAM1G,KAAOwY,uBAAOC,QAAMrB,+CAC7C1Q,EAAMY,oBAAxByT,uBAAyCrU,MAAOA,EAAQa,UAAU,EAAQyT,OAAQvC,iDAClD/R,EAAMY,oBAAtCyT,uBAAyDrU,MAAOA,EAASsU,OAAQvC,iDACtD/R,EAAMK,KAAKO,oBAAtCyT,uBAAyDrU,MAAOA,EAASsU,OAAQvC,oDACjFsC,uBAAmBrU,MAAOA,EAAQsU,OAAQvC,qCAE1CwC,gDAEJrC,8BAAOtR,KAAK,SAASrH,MAAM,SAAUuY,uBAAOC,QAAMrB,qJCAxD,OAAeC,kBAAgB,CAC3BC,MAAQ,CACJwE,eAAiBpC,QAErBlC,MAAMF,IAEK,CACHrJ,OAFSpC,KAAKC,KAAKwL,EAAMyE,MAAQzE,EAAMwE,gBAE/BE,cAAgB,EAAGvE,MAAAA,IAGnCnR,SAAW,CACP2V,aACI,OAAOna,KAAKka,cAAgBla,KAAKoa,aAErCC,WAAU,IACC,IAGf/C,QAAU,CACNgD,UAAUhS,GACN,IAAI4K,EAAQqH,WAAWC,cAAcrc,MACjCK,EAAM0U,EAAQ,IACdA,EAAMuH,QAAOjc,GAAO0U,EAAMuH,MAAQ,KACtCjc,GAAO,WAAawB,KAAKma,WAAa7R,GACtCyL,OAAOjB,SAAStU,iFCnC3BiY,4BAAMC,uBAAOC,QAAMrB,+CACfwB,0BAA6BsC,wBAAOzC,mBAAgB,oBAAzCA,oCACXF,kDAAmBE,cAATrO,kBAAVmO,0BAAgCzP,IAAKsB,EAAQ8Q,WAAOzC,OAAKrO,sBAAWqO,aAAarO,mCACjFwO,0BAAwCsC,uBAAOzC,iBAAc,oBAAlDA,gBAAgBA,4ECehC,OAAepB,kBAAgB,CAC3BG,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtCiB,WAAa,CACT,aAAemD,qICvBnBd,iBAAY1N,MAAM,gBAAiBa,QAASuK,QAAMrB,kDACzC,sBAALmB,kDAA2BE,QAAMtL,SAArBzG,EAAO1G,mBAAnBuY,4BAA0CzP,IAAK9I,qBAC3C4Y,8BACItR,KAAK,oCACIZ,EAAQ,KAChB8R,uBAAOC,QAAMrB,uEADL1Q,EAAMF,MAEnBoS,8BAAQJ,uBAAOC,QAAMrB,uDAAuC1Q,EAAM1G,uGCU9E,OAAeqX,kBAAgB,CAC7BrX,KAAM,aACNwX,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEpCiB,WAAa,CACT,UAAY8D,GACZ,kBAAoBC,GACpB,iBAAmBC,GACnB,mBAAqBC,wNCzBzB/D,2BAAKJ,uBAAOC,QAAMrB,sDAAsCqB,QAAMpL,UAC9DyL,iBAAUtL,QAASiL,QAAMjL,QAAUgL,uBAAOC,QAAMrB,qEACxBqB,QAAM9I,8BAA9BoL,6DACwBtC,QAAM7I,oCAA9BmL,0HC0BJ,OAAe1D,kBAAgB,CAC9BrX,KAAO,gBACPsX,MAAQ,CACPsF,OAAS,CACCtV,KAAO2K,OACP/J,UAAW,GAEf2U,UAAY3T,QACZ4T,QAAU,CACNxV,KAAO4B,QACPlC,SAAU,IAIlBpF,KAAI,KACO,CACHmb,aAAe,KAGvBvF,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEzC2B,QAAU,CACH4D,OAAO5S,GACHtI,KAAKib,aAAa3S,IAAUtI,KAAKib,aAAa3S,IAElD6S,aAAalU,GACTA,EAAEwC,OAAO2R,QAAQ,kBAAkBC,aAAa,aAAa,IAEjEC,aAAarU,GACTA,EAAEwC,OAAO2R,QAAQ,kBAAkBC,aAAa,aAAa,IAEjEE,UAAUvU,GACNhH,KAAKoL,MAAMO,KAAK3E,GAChBkR,EAAK1D,aAETgH,cACI,IAAIC,EAAM,GACV,IAAI,IAAIvd,KAAQ8B,KAAKoL,MAAMe,OACvBsP,EAAI7Z,KAAK5B,KAAKoL,MAAMW,MAAQ,IAAM7N,EAAK+O,QAAQ,IAAK,KAAO,IAAMjN,KAAK8a,OAAO5c,IAEjF,OAAOud,EAAI1S,KAAK,OAGxBvE,SAAW,CACPkX,SAAQ,KACG,EAEXzP,WACI,IAAI0P,EAAM,GACN3b,KAAKoL,MAAMU,UAAY9L,KAAK8a,OAAO9a,KAAKoL,MAAMW,SAAQ4P,EAAM3b,KAAK8a,OAAO9a,KAAKoL,MAAMW,QACvF,IAAI,IAAI3L,KAAKJ,KAAKoL,MAAMwQ,eAChB5b,KAAK8a,OAAO9a,KAAKoL,MAAMwQ,eAAexb,MAAKub,EAAIA,EAAIE,OAAO7b,KAAK8a,OAAO9a,KAAKoL,MAAMwQ,eAAexb,MAExG,OAAOub,IAGlB/E,WAAa,iGClFME,6BAAMJ,MAAM,kBAAiB,8CAG7BI,6BAAMJ,MAAM,kBAAiB,qDAK7BI,6BAAMJ,MAAM,kBAAiB,+aAZ7CD,4BAAMC,uBAAOC,QAAMrB,gDAAoDkG,eAAgB/U,GAAIkQ,SAAOA,QAAM/K,gBAAiBmP,UAAU,UAC/HjE,4BAAMJ,uBAAOC,QAAMrB,+BAAgC8D,wBAAOzC,YAAUA,SAAOA,QAAM/K,qBAC7EkL,iCACaH,EAAO,uBAAhBF,gCAAkB,cAAY,OAAOC,MAAM,SAAU0C,wCAAoBzC,SAAOA,SAAOA,QAAM/K,+DAG7F6K,gCAAU,cAAY,OAAOC,MAAM,SAAU0C,wCAAoBzC,SAAOA,SAAOA,QAAM/K,kDAI9E+K,EAAQ,wBAAnBF,+BACIK,0BAAG,cAAY,OAAOJ,MAAM,SAAU0C,4BAAOzC,UAAQmF,MAARnF,UAAQmF,YAAOC,gCAAWpF,sCAAeqF,8BAASrF,kGAInGF,kDAA+BE,QAAMtL,SAAxBzG,EAAOqX,oCAApBxF,4BAA8CzP,IAAKiV,IAC/CnF,mDAASlS,EAAMmB,OAAQ,uBAAK4Q,SAAO/R,EAAM1G,uBADsB0G,EAAMF,mCAK7E+R,kDAAsCE,aAAf9T,EAAKyF,oCAA5B2Q,iBAAiD6B,OAAQjY,EAAMmY,SAAS,EAAQhU,IAAKsB,EAA4D8C,MAAOuL,+CAApDA,eAAaA,SAAOA,QAAM/K,4HCrBtI,MAAMsQ,GAEF/a,YAAYqU,EAAQ,SACX2G,QAAU3G,EAAM4G,YAChBC,aAAe7G,EAAM8G,iBACrBC,aAAe/G,EAAMgH,iBACrBC,WAAajH,EAAMpC,cACnBsJ,GAAK,OACLC,GAAK,OACLC,UAAY,OACZC,UAAY,OACZC,QAAWtH,EAAMuH,OAAUvH,EAAMuH,OAAS,OAC1CC,gBACAC,gBACAC,MAAQ1H,EAAM2H,KAGvBC,SAASzY,EAAG0Y,SACFC,EAAK3Y,EAAI3E,KAAK0c,GACda,EAAKF,EAAIrd,KAAK2c,WAEhBW,GAAM,GAAKA,EAAK,MACXC,GAAM,GAAKA,EAAK,GAI7BC,aAAa7Y,EAAG0Y,SAIL,CAAE1Y,EAHMA,GAAK3E,KAAK0c,GAAM,EAAK/X,EAAI3E,KAAK0c,GAAM,GAAK,EAGpCW,EAFLA,GAAKrd,KAAK2c,GAAM,EAAKU,EAAIrd,KAAK2c,GAAM,GAAK,GAK5Dc,OAAOC,OACCC,EAAOD,EAAKE,wBACZC,EAAMH,EAAKI,cAAcC,kBAEtB,CACHC,IAAKL,EAAKK,IAAMH,EAAII,YACpBC,KAAMP,EAAKO,KAAOL,EAAIM,aAI9BC,kBACQC,EAAUre,KAAKgd,WAAWsB,aAAa,MACvCC,EAAUve,KAAKid,WAAWqB,aAAa,MAEvCxS,EAAW,EACX0S,EAAO,KACPxe,KAAKid,WAAWwB,mBAAoB,KAChC,IAAIre,KAAKJ,KAAKkd,MAAO,KACjBwB,EAAO1e,KAAKkd,MAAM9c,MAClBse,EAAKjY,IAAM8X,EAAS,CACpBzS,EAAW4S,EAAK5S,SAChB0S,EAAOE,EAAKF,gBAKhB,IAAIpe,KAAKJ,KAAKkd,MAAO,KACjBwB,EAAO1e,KAAKkd,MAAM9c,GAClBse,EAAKjY,IAAM4X,GACXK,EAAK5S,SAAWA,EAChB4S,EAAKF,KAAOA,EAAO,GACZE,EAAK5S,UAAYA,GAAY4S,EAAKF,KAAOA,KAC9CE,EAAKF,eAIX,IAAIpe,KAAKJ,KAAKkd,MAAO,KACjBwB,EAAO1e,KAAKkd,MAAM9c,GAClBse,EAAKjY,IAAM4X,IACXK,EAAK5S,SAAWA,EAChB4S,EAAKF,KAAO,IAM5BpI,mBACQiI,EAAUre,KAAKgd,WAAWsB,aAAa,MACvCC,EAAUve,KAAKid,WAAWqB,aAAa,MAEvCxS,EAAW,EACX0S,EAAO,MACP,IAAIpe,KAAKJ,KAAKkd,MAAO,KACjBwB,EAAO1e,KAAKkd,MAAM9c,MAClBse,EAAKjY,IAAM8X,EAAS,CACpBzS,EAAW4S,EAAK5S,SAChB0S,EAAOE,EAAKF,OACVE,EAAKF,gBAKX,IAAIpe,KAAKJ,KAAKkd,MAAO,KACjBwB,EAAO1e,KAAKkd,MAAM9c,GAClBse,EAAKjY,IAAM4X,GACXK,EAAK5S,SAAWA,EAChB4S,EAAKF,KAAOA,GACLE,EAAK5S,UAAYA,GAAY4S,EAAKF,KAAOA,KAC9CE,EAAKF,MAKnBG,UAAUC,SACAC,EAAOD,EAAGnV,OAAO2R,QAAQ,aAC1B4B,WAAa6B,QACZb,IAAEA,EAAFE,KAAOA,GAASle,KAAKyd,OAAOoB,GAElCD,EAAGE,aAAaC,WAAa,YAExBrC,GAAKkC,EAAGI,aACRrC,GAAKiC,EAAGK,aAERrC,UAAYgC,EAAGI,QAAUd,OACzBrB,UAAY+B,EAAGK,QAAUjB,EAGlCkB,YAAYN,WACGA,EAAGnV,OAAO2R,QAAQpb,KAAKqc,cAItC8C,UAAUP,OACD5e,KAAKkf,YAAYN,GAAK,OAAO,KAClCA,EAAGQ,iBACHR,EAAGE,aAAaC,WAAa,YAExB9B,WAAa2B,EAAGnV,OAAO2R,QAAQpb,KAAKuc,eAEpCvc,KAAKid,YAAcjd,KAAKid,WAAWqB,aAAa,OAASte,KAAKgd,WAAWsB,aAAa,mBAIrFe,EAAMrf,KAAKwd,aAAaoB,EAAGI,QAASJ,EAAGK,SAEhC,GAATI,EAAIhC,OACCe,eACY,GAAViB,EAAIhC,QACNjH,oBAEJsG,GAAKkC,EAAGI,aACRrC,GAAKiC,EAAGK,QAGjBK,SAASV,OACA5e,KAAKkf,YAAYN,GAAK,OAAO,EAClCA,EAAGQ,iBACHR,EAAGE,aAAaC,WAAa,OAIjCQ,UACQvf,KAAKgd,YAAYhd,KAAKgd,WAAW3B,aAAa,aAAa,QAC1D2B,WAAa,KAGtBwC,KAAKZ,OACI5e,KAAKid,WAAY,OAAO,EAC7B2B,EAAGQ,iBACCpf,KAAKyc,YAAYzc,KAAKyc,WAAWzc,KAAKkd,QA+BlD,OAAe,CACXuC,OAzBJ,SAAgBjK,OACRkK,EAAO,IAAIxD,GAAY1G,MACb3C,SAAS8M,iBAAiBnK,EAAM4G,QACtC1L,SAAQkP,GAAMA,EAAGC,aAAa,aAAa,KAE/CrK,EAAM4G,OAAQ,CAEAvJ,SAAS8M,iBAAiBnK,EAAM4G,QAEtC1L,SAAQkP,IACZA,EAAGE,iBAAiB,aAAa7Y,IAClBA,EAAEwC,OAAO2R,QAAQ5F,EAAMgH,aAC7BqD,aAAa,aAAa,SAK3CrK,EAAMuK,KAAKD,iBAAiB,aAAa7Y,GAAKyY,EAAKf,UAAU1X,KAC7DuO,EAAMuK,KAAKD,iBAAiB,aAAa7Y,GAAKyY,EAAKP,UAAUlY,KAC7DuO,EAAMuK,KAAKD,iBAAiB,YAAY7Y,GAAKyY,EAAKJ,SAASrY,KAC3DuO,EAAMuK,KAAKD,iBAAiB,QAAQ7Y,GAAKyY,EAAKF,KAAKvY,KACnDuO,EAAMuK,KAAKD,iBAAiB,WAAW7Y,GAAKyY,EAAKH,QAAQtY,UC7K9CsO,kBAAgB,CAC9BrX,KAAO,WACJwX,MAAMF,GACF,IAAIlD,EAAO,CAAElH,MAAQ8M,EAAK/C,WAAY6K,SAAWnc,MAAI,MAAO8R,MAAAA,GAc7D,OAbCsK,aAAU,KAELC,GAAWT,OAAO,CAChBrD,OAAS,mBACTI,YAAc,iBACdF,YAAc,mBACdyD,KAAOzN,EAAK0N,SAAS7hB,MACrBgf,KAAO7K,EAAKlH,MAAMtL,KAClBsT,SAAWd,EAAKlH,MAAM+U,cAKvB7N,GAEVsE,WAAa,CACT,UAAY8D,GACZ,gBAAkB0F,GAClB,kBAAoBzF,GACpB,mBAAqBE,uGCvC3BpE,4BAAMC,uBAAOC,QAAMrB,yBAA6BqB,QAAMvK,4BAA8BvI,IAAI,8BACtF4S,kDAAsCE,QAAM7W,OAArB+C,EAAKyF,mBAA5B2Q,iBAAmDjS,IAAKsB,EAAQwS,OAAQjY,uFC+B5E,OAAe0S,kBAAgB,CAC3BrX,KAAM,YACNwX,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtC2B,QAAU,CACN3L,KAAK3E,GACDhH,KAAKoL,MAAMO,KAAK3E,GAChBkR,EAAK1D,aAET6L,QAAQC,EAAMjB,GACV,IAAIkB,EAAQ,GACZA,EAAMD,EAAKpiB,MAAQmhB,EACnBrf,KAAKoL,MAAMoV,QAAUD,EACjBvgB,KAAKoL,MAAM6O,MAAQ,EACnBja,KAAKoL,MAAMqD,OAGP4Q,EACArf,KAAKoL,MAAMtL,KAAK0e,MAAK,SAAS7Z,EAAG0Y,GAC7B,IAAIoD,EAAO9b,EAAE2b,EAAKpiB,MACdwiB,EAAOrD,EAAEiD,EAAKpiB,MAClB,OAAIuiB,EAAOC,GACC,EACDD,EAAOC,EACP,EAEA,KAIf1gB,KAAKoL,MAAMtL,KAAK0e,MAAK,SAAS7Z,EAAG0Y,GAC7B,IAAIoD,EAAO9b,EAAE2b,EAAKpiB,MACdwiB,EAAOrD,EAAEiD,EAAKpiB,MAClB,OAAIuiB,EAAOC,EACA,EACAD,EAAOC,GACN,EAED,MAM3BlF,YAAY3Y,GACR,IAAI4Y,EAAM,GACV,IAAI,IAAIvd,KAAQ8B,KAAKoL,MAAMe,OACvBsP,EAAI7Z,KAAK5B,KAAKoL,MAAMW,MAAQ,IAAM7N,EAAK+O,QAAQ,IAAK,KAAO,IAAMpK,EAAI3E,IAEzE,OAAOud,EAAI1S,KAAK,OAGxBvE,SAAW,CACPkX,WACI,QAAQ1b,KAAKoL,MAAU,MAE3BuV,UAAS,KACE,EAEXC,cAIJhK,WAAa,CACT,iBAAmBgE,4IClFX9D,6BAAMJ,MAAM,kBAAiB,mSAfzCI,8BAAQJ,uBAAOC,QAAMrB,0BAA8BqB,QAAMvK,WACzD0K,mCACIA,2BAAKJ,uBAAOC,QAAMrB,iDAClBmB,kDAA4BE,QAAMtL,SAAtBiV,EAAMhY,oCAAlBmO,2BAA2CzP,IAAKsZ,EAAKpiB,KAAOwY,uBAAOC,QAAMrB,sCAA0CgL,EAAKpiB,KAAK+O,wDAAsDqT,EAAKva,iBACxK4Q,0BAAZF,mCAA+BC,MAAM,iBAAkB0C,YAAOzC,UAAQ2J,QAAe,8DACzE3J,0BAAZF,mCAA+BC,MAAM,iBAAkB0C,YAAOzC,UAAQ2J,QAAc,4EAFgE3J,QAAMtL,OAAO/C,GAAO5D,cAIlKiS,EAAQ,wBAAlBF,6BAAoB,4CAGxBK,oDACEL,kDAA4BE,QAAM7W,OAAtB+C,EAAKge,mBAAjBpK,2BAAyCzP,IAAK6Z,EAASnK,uBAAOC,QAAMrB,mCAAuCkG,YAAY3Y,IAAOuW,YAAOzC,OAAK9T,EAAI8T,QAAM/K,qCAClJ6K,kDAA6BE,QAAMtL,SAAvBzG,EAAO0D,oCAAnBmO,2BAA4CzP,IAAKsB,EAAQoO,uBAAOC,QAAMrB,+BAAmC1Q,EAAM1G,KAAK+O,qCAAsDpK,EAAI+B,EAAM1G,qBAArCyY,QAAMtL,OAAO/C,GAAO5D,cACtGiS,EAAQ,wBAArEF,iCAAKC,uBAAOC,QAAMrB,uCACdwB,0BAAG,cAAY,OAAOJ,MAAM,SAAU0C,6CAAezC,wCAAQoE,UAAU,wEAOzDpE,EAAS,yBAA/BsC,mJCKJ,OAAe1D,kBAAgB,CAC7BrX,KAAM,WACNwX,MAAK,KACI,CAAEtK,MAAO8M,EAAK/C,WAAYQ,MAAAA,IAEnC2B,QAAS,CACP3L,KAAK3E,GACHhH,KAAKoL,MAAMO,KAAK3E,GAChBkR,EAAK1D,aAEPsM,gBAAgBC,EAAKjhB,EAAMkhB,GACzB,MAAMC,EAAU,GAChB,GAAqB,GAAjBD,EAAO3e,OACP,IAAI,IAAI6e,KAAKphB,EACXmhB,EAAQrf,KAAK,CAAEuf,KAAO,CAAEJ,IAAMjhB,EAAKohB,GAAG7R,SAAWvP,KAAOA,EAAKohB,GAAG5R,gBAGpE,IAAK,IAAI8R,KAAKJ,EACZ,IAAI,IAAIE,KAAKphB,EAAM,CACjB,IAAIqhB,EAAOC,EAAED,KACbA,EAAKJ,GAAOG,EAAE7R,QACd4R,EAAQrf,KAAK,CAAEuf,KAAOA,EAAMrhB,KAAOshB,EAAEthB,KAAKuhB,QAAQljB,GAAS2B,EAAKohB,GAAG5R,SAASgS,SAASnjB,OAI3F,OAAO8iB,IAGXzc,SAAU,CACR+c,uBACE,IAAIP,EAAS,GACb,IAAK,IAAI7R,KAASnP,KAAKoL,MAAM8D,QACzB8R,EAAShhB,KAAK8gB,gBAAgB3R,EAAOnP,KAAKoL,MAAM8D,QAAQC,GAAQ6R,GAEpE,OAAOA,gFC5DXvK,4BAAMC,uBAAOC,QAAMrB,yBAA6BqB,QAAMvK,4BACpDqK,kDAAqCE,yBAAxB6K,EAAclZ,mBAA3BmO,4BAA4DzP,IAAKsB,IAC/DwO,iDAAIL,qBAG2BgL,6BAFAD,EAAaL,OAA5BJ,EAAKzY,mBADjBmO,qBAG2B,QADtBzP,IAAKsB,qBACFyY,GAAM,kBAClBjK,iDACEL,kDAAmB+K,EAAa1hB,MAArBsP,kBAAXqH,2BAAuCzP,IAAKoI,IAC1C0H,0BAAIsC,WAAOzC,OAAKA,QAAM7W,KAAKsP,GAAMuH,QAAM/K,oCACrC6K,kDACkBE,QAAMtL,QAAfzG,mCADT6R,6BAEGzP,IAAKpC,EAAM1G,wBAERyY,QAAM7W,KAAKsP,GAAMxK,EAAM1G,OAAQ,kBAD3B0G,EAAMF,qGCK5B,OAAe6Q,kBAAgB,CAC7BrX,KAAM,WACNwX,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEpCiB,WAAa,CACT,kBAAoB8K,GACpB,WAAaC,GACb,YAAcC,GACd,WAAaC,qTC1BrBpL,4BAAMC,uBAAOC,QAAMrB,yBAA6BqB,QAAMvK,WAClD4K,gCACAiC,wCAAiCtC,QAAMlL,eAA3BzE,IAAK2P,QAAM3P,8FCgB3B,OAAeuO,kBAAgB,CAC7BrX,KAAM,kBACNsX,MAAQ,CACJ+D,OAAS,CACL/T,KAAO4B,QACPlC,SAAU,IAGlBwQ,MAAK,KACM,CAAEtK,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtCnR,SAAW,CACPsd,UACI,OAAO9hB,KAAKoL,MAAMM,QAAQ3K,KAE9BghB,SACI,OAAO/hB,KAAKoL,MAAMM,QAAQzK,QAE9BsK,QACI,OAAOvL,KAAKoL,MAAMG,MAAQ,IAAMvL,KAAKoL,MAAMpF,YAGnDsR,QAAU,CACN0K,SACIhiB,KAAKoL,MAAM6W,cAGnBrL,WAAa,CACX,UAAY8D,GAAO,aAAeX,iCC1CqD,sIAJvFjD,4BAAMJ,uBAAOC,QAAMrB,gCAAoCqB,QAAMvK,WACzD0K,iDAAOH,QAAMpL,UACbyL,iBAAUtL,QAASiL,QAAMjL,QAAUgL,uBAAOC,QAAMrB,mFAChDmB,kDAA8BE,QAAMtL,SAAvBzG,EAAO0D,mBAApBmO,4BAA6CzP,IAAKsB,EAAQoO,uBAAOC,QAAMrB,oCAAwC1Q,EAAM1G,QACjH4Y,qBAA+E,QAAxEJ,uBAAOC,QAAMrB,sDAAsC1Q,EAAMmB,aAAqB+Q,6BAAOJ,uBAAOC,QAAMrB,sDAAsC1Q,EAAMvF,yBAG7J2X,iBAAUtL,QAASiL,QAAM1K,SAAWyK,uBAAOC,QAAMrB,mICUrD,OAAeC,kBAAgB,CAC7BrX,KAAM,YACNwX,QACI,IAAItK,EAAQ8M,EAAK/C,WAIjB,OAHA/J,EAAMO,KAAO,KACRuM,EAAKhD,kBAEH,CAAE9J,MAAQA,EAAOuK,MAAAA,IAE5BiB,WACE,CACE,WAAasL,GAAQ,UAAYxH,kIC5BtCjE,4BAAMC,uBAAOC,QAAMrB,kCAChBwB,iDAAOH,QAAMpL,UACbyL,iBACAA,iBAAUxH,OAAQmH,QAAMjL,8FCa5B,OAAe6J,kBAAgB,CAC7BrX,KAAM,WACNsX,MAAQ,CACJpK,MAAQ+E,OACRoJ,OAAS,CACL/T,KAAO4B,QACPlC,SAAU,IAGlBoS,QAAU,CACN3L,OACI3L,KAAKoL,MAAMO,OACXuM,EAAK1D,cAGbhQ,SAAW,CACP+G,QACI,OAAOvL,KAAKoL,MAAMG,OAEtBa,UACI,OAAOuJ,EAAML,SAAS,YAAe,IAAMtV,KAAKoL,MAAMgB,SAE1DwU,SAAQ,IACGjL,EAAML,SAAS,gBAE1B6M,WAAU,IACCxM,EAAML,SAAS,kBAE1B8M,WAAU,IACCzM,EAAML,SAAS,mBAG9BsB,WAAa,CACX,aAAemD,gBC/CUjD,qBAAiD,QAA3CJ,MAAM,kBAAiB,0CAEQ,mGAJ9DuC,iBAAa1N,MAAOoL,QAAQ4C,OAAQ5C,8BAChC,KAAAG,4BAAMJ,uBAAOC,aACTG,0BAAIsC,4BAAOzC,4CACXF,kDAA8BE,QAAMtL,SAAvBzG,EAAO0D,mBAApBmO,4BAA6CzP,IAAKsB,EAAQoO,uBAAOC,eAAiB/R,EAAM1G,QACpF4Y,qBAAkD,QAA3CJ,uBAAOC,iCAAe/R,EAAMmB,aAAqB+Q,6BAAOJ,uBAAOC,+BAAa/R,EAAMvF,2GCoBzG,OAAekW,kBAAgB,CAC3BC,MAAQ,CACJlN,MAAO,CACH9C,KAAO4B,UAGfsO,MAAMF,IACEA,EAAMlN,OAAO4P,EAAKvM,OACf,CAAEP,MAAQ8M,EAAK/C,WAAYQ,MAAAA,IAEtCnR,SAAW,CACP6d,UACI,OAAOriB,KAAKoL,MAAME,cAAcgX,QAAQC,YAGhD3L,WAAa,CACT,WAAasL,GACb,UAAYxH,GACZ,kBAAoB8H,GACpB,sBAAwBC,GACxB,WAAaC,GACb,WAAaC,kGC7CjBlM,4BAAMC,uBAAOC,QAAMrB,yCACfmB,kDAA+DE,WAAV9H,kBAArD4H,4BAAMC,uBAAOC,QAAMrB,2BAAsDtO,IAAK6H,EAAO3Q,iBACjF8Y,iBAAW5L,MAAOyD,EAAOzD,sCAG7B0L,4BAAMJ,uBAAOC,QAAMrB,2CACf2D,wCAAmCtC,QAAMnL,YAA7BxE,IAAK2P,QAAMrO,qECKnC,OAAeiN,kBAAgB,CAC3BG,MAAK,KACM,CAAEC,MAAAA,IAEb2B,QAAU,CACNsL,SACI9b,EAAOjG,KAAK,gBACX5B,MAAK,KACFiZ,EAAKhD,6ECnBjB+D,0BAAUrM,GAAG,wBACbkK,0BAAIJ,uBAAOC,QAAMrB,wCAAyC8D,4BAAOzC,2BAAQ,6ECa7E,OAAepB,kBAAgB,CAC3BrX,KAAO,WACPwX,MAAK,KACM,CAAEC,MAAAA,IAEbnR,SAAW,CACP2H,OAAM,IACK+L,EAAK9M,MAAMwI,OAEtBiP,UAAS,IACwB,UAAtB3K,EAAK9M,MAAMkI,SAG1BsD,WAAa,CACT,WAAakM,GAAQ,sBAAwBC,oLC5BxBpM,EAAS,yBAApCsC,2EACAxC,kDAAyDE,UAATxH,kBAAhDsH,4BAAMC,uBAAOC,QAAMrB,sBAA+CtO,IAAKmI,EAAM7G,QAC3E0O,iBAAY1O,OAAO,0ECOvB,OAAe,CACX4P,KAAAA,EAAM8K,OAPV,SAAgBC,SACNC,EAAMC,YAAUC,WACtBF,EAAID,MAAMA,GACHC"}